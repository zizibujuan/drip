//>>built
define("dojox/mobile/app/_base",["dojo","dijit","dojox","dojo/require!dijit/_base,dijit/_WidgetBase,dojox/mobile,dojox/mobile/parser,dojox/mobile/Button,dojox/mobile/app/_event,dojox/mobile/app/_Widget,dojox/mobile/app/StageController,dojox/mobile/app/SceneController,dojox/mobile/app/SceneAssistant,dojox/mobile/app/AlertDialog,dojox/mobile/app/List,dojox/mobile/app/ListSelector,dojox/mobile/app/TextBox,dojox/mobile/app/ImageView,dojox/mobile/app/ImageThumbView"],function(dojo,dijit,dojox){dojo.provide("dojox.mobile.app._base"),dojo.experimental("dojox.mobile.app._base"),dojo.require("dijit._base"),dojo.require("dijit._WidgetBase"),dojo.require("dojox.mobile"),dojo.require("dojox.mobile.parser"),dojo.require("dojox.mobile.Button"),dojo.require("dojox.mobile.app._event"),dojo.require("dojox.mobile.app._Widget"),dojo.require("dojox.mobile.app.StageController"),dojo.require("dojox.mobile.app.SceneController"),dojo.require("dojox.mobile.app.SceneAssistant"),dojo.require("dojox.mobile.app.AlertDialog"),dojo.require("dojox.mobile.app.List"),dojo.require("dojox.mobile.app.ListSelector"),dojo.require("dojox.mobile.app.TextBox"),dojo.require("dojox.mobile.app.ImageView"),dojo.require("dojox.mobile.app.ImageThumbView"),function(){function loadResources(resources,callback){var resource,url;do{resource=resources.pop();if(resource.source)url=resource.source;else{if(!resource.module){0;return}url=dojo.moduleUrl(resource.module)+".js"}}while(resources.length>0&&loadedResources[url]);if(resources.length<1&&loadedResources[url]){callback();return}dojo.xhrGet({url:url,sync:!1}).addCallbacks(function(text){dojo.eval(text),loadedResources[url]=!0,resources.length>0?loadResources(resources,callback):callback()},function(){0})}var stageController,appInfo,jsDependencies=["dojox.mobile","dojox.mobile.parser"],loadedResources={},loadingDependencies,rootNode,sceneResources=[],pushFirstScene=function(){stageController=new dojox.mobile.app.StageController(rootNode);var defaultInfo={id:"com.test.app",version:"1.0.0",initialScene:"main"};dojo.global.appInfo&&dojo.mixin(defaultInfo,dojo.global.appInfo),appInfo=dojox.mobile.app.info=defaultInfo;if(appInfo.title){var titleNode=dojo.query("head title")[0]||dojo.create("title",{},dojo.query("head")[0]);document.title=appInfo.title}stageController.pushScene(appInfo.initialScene)},initBackButton=function(){var hasNativeBack=!1;dojo.global.BackButton?(BackButton.override(),dojo.connect(document,"backKeyDown",function(e){dojo.publish("/dojox/mobile/app/goback")}),hasNativeBack=!0):!dojo.global.Mojo,hasNativeBack&&dojo.addClass(dojo.body(),"mblNativeBack")};dojo.mixin(dojox.mobile.app,{init:function(node){rootNode=node||dojo.body(),dojox.mobile.app.STAGE_CONTROLLER_ACTIVE=!0,dojo.subscribe("/dojox/mobile/app/goback",function(){stageController.popScene()}),dojo.subscribe("/dojox/mobile/app/alert",function(params){dojox.mobile.app.getActiveSceneController().showAlertDialog(params)}),dojo.subscribe("/dojox/mobile/app/pushScene",function(sceneName,params){stageController.pushScene(sceneName,params||{})}),dojo.xhrGet({url:"view-resources.json",load:function(data){var resources=[];if(data){sceneResources=data=dojo.fromJson(data);for(var i=0;i<data.length;i++)data[i].scene||resources.push(data[i])}resources.length>0?loadResources(resources,pushFirstScene):pushFirstScene()},error:pushFirstScene}),initBackButton()},getActiveSceneController:function(){return stageController.getActiveSceneController()},getStageController:function(){return stageController},loadResources:function(resources,callback){loadResources(resources,callback)},loadResourcesForScene:function(sceneName,callback){var resources=[];for(var i=0;i<sceneResources.length;i++)sceneResources[i].scene==sceneName&&resources.push(sceneResources[i]);resources.length>0?loadResources(resources,callback):callback()},resolveTemplate:function(sceneName){return"app/views/"+sceneName+"/"+sceneName+"-scene.html"},resolveAssistant:function(sceneName){return"app/assistants/"+sceneName+"-assistant.js"}})}()})