//>>built
define("dojox/mobile/app/_event",["dojo","dijit","dojox"],function(dojo,dijit,dojox){dojo.provide("dojox.mobile.app._event"),dojo.experimental("dojox.mobile.app._event.js"),dojo.mixin(dojox.mobile.app,{eventMap:{},connectFlick:function(target,context,method){var startX,startY,isFlick=!1,currentX,currentY,connMove,connUp,direction,time,connDown=dojo.connect("onmousedown",target,function(event){isFlick=!1,startX=event.targetTouches?event.targetTouches[0].clientX:event.clientX,startY=event.targetTouches?event.targetTouches[0].clientY:event.clientY,time=(new Date).getTime(),connMove=dojo.connect(target,"onmousemove",onMove),connUp=dojo.connect(target,"onmouseup",onUp)}),onMove=function(event){dojo.stopEvent(event),currentX=event.targetTouches?event.targetTouches[0].clientX:event.clientX,currentY=event.targetTouches?event.targetTouches[0].clientY:event.clientY,Math.abs(Math.abs(currentX)-Math.abs(startX))>15?(isFlick=!0,direction=currentX>startX?"ltr":"rtl"):Math.abs(Math.abs(currentY)-Math.abs(startY))>15&&(isFlick=!0,direction=currentY>startY?"ttb":"btt")},onUp=function(event){dojo.stopEvent(event),connMove&&dojo.disconnect(connMove),connUp&&dojo.disconnect(connUp);if(isFlick){var flickEvt={target:target,direction:direction,duration:(new Date).getTime()-time};context&&method?context[method](flickEvt):method(flickEvt)}}}}),dojox.mobile.app.isIPhone=dojo.isSafari&&(navigator.userAgent.indexOf("iPhone")>-1||navigator.userAgent.indexOf("iPod")>-1),dojox.mobile.app.isWebOS=navigator.userAgent.indexOf("webOS")>-1,dojox.mobile.app.isAndroid=navigator.userAgent.toLowerCase().indexOf("android")>-1;if(dojox.mobile.app.isIPhone||dojox.mobile.app.isAndroid)dojox.mobile.app.eventMap={onmousedown:"ontouchstart",mousedown:"ontouchstart",onmouseup:"ontouchend",mouseup:"ontouchend",onmousemove:"ontouchmove",mousemove:"ontouchmove"};dojo._oldConnect=dojo._connect,dojo._connect=function(obj,event,context,method,dontFix){event=dojox.mobile.app.eventMap[event]||event;if(event=="flick"||event=="onflick"){if(!dojo.global.Mojo)return dojox.mobile.app.connectFlick(obj,context,method);event=Mojo.Event.flick}return dojo._oldConnect(obj,event,context,method,dontFix)}})