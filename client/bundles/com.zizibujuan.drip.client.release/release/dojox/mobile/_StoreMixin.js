//>>built
define("dojox/mobile/_StoreMixin",["dojo/_base/Deferred","dojo/_base/declare"],function(Deferred,declare){return declare("dojox.mobile._StoreMixin",null,{store:null,query:null,queryOptions:null,labelProperty:"label",childrenProperty:"children",setStore:function(store,query,queryOptions){return store===this.store?null:(store&&(store.getValue=function(item,property){return item[property]}),this.store=store,this._setQuery(query,queryOptions),this.refresh())},setQuery:function(query,queryOptions){return this._setQuery(query,queryOptions),this.refresh()},_setQuery:function(query,queryOptions){this.query=query,this.queryOptions=queryOptions||this.queryOptions},refresh:function(){if(!this.store)return null;var _this=this,promise=this.store.query(this.query,this.queryOptions);return Deferred.when(promise,function(results){results.items&&(results=results.items),promise.observe&&promise.observe(function(object,removedFrom,insertedInto){removedFrom>-1?_this.onDelete(object,removedFrom):insertedInto>-1&&_this.onUpdate(object,insertedInto)}),_this.onComplete(results)},function(error){_this.onError(error)}),promise}})})