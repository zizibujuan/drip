//>>built
define("dojox/mobile/_ScrollableMixin",["dojo/_base/kernel","dojo/_base/config","dojo/_base/declare","dojo/_base/lang","dojo/_base/window","dojo/dom","dojo/dom-class","dijit/registry","./scrollable"],function(dojo,config,declare,lang,win,dom,domClass,registry,Scrollable){var cls=declare("dojox.mobile._ScrollableMixin",Scrollable,{fixedHeader:"",fixedFooter:"",scrollableParams:null,allowNestedScrolls:!0,appBars:!0,constructor:function(){this.scrollableParams={}},destroy:function(){this.cleanup(),this.inherited(arguments)},startup:function(){if(this._started)return;this.findAppBars();var node,params=this.scrollableParams;this.fixedHeader&&(node=dom.byId(this.fixedHeader),node.parentNode==this.domNode&&(this.isLocalHeader=!0),params.fixedHeaderHeight=node.offsetHeight),this.fixedFooter&&(node=dom.byId(this.fixedFooter),node.parentNode==this.domNode&&(this.isLocalFooter=!0,node.style.bottom="0px"),params.fixedFooterHeight=node.offsetHeight),this.scrollType=this.scrollType||config.mblScrollableScrollType||0,this.init(params);if(this.allowNestedScrolls)for(var p=this.getParent();p;p=p.getParent())if(p&&p.scrollableParams){this.dirLock=!0,p.dirLock=!0;break}this._resizeHandle=this.subscribe("/dojox/mobile/afterResizeAll",function(){if(this.domNode.style.display==="none")return;var elem=win.doc.activeElement;this.isFormElement(elem)&&dom.isDescendant(elem,this.containerNode)&&this.scrollIntoView(elem)}),this.inherited(arguments)},findAppBars:function(){if(!this.appBars)return;var i,len,c;for(i=0,len=win.body().childNodes.length;i<len;i++)c=win.body().childNodes[i],this.checkFixedBar(c,!1);if(this.domNode.parentNode)for(i=0,len=this.domNode.parentNode.childNodes.length;i<len;i++)c=this.domNode.parentNode.childNodes[i],this.checkFixedBar(c,!1);this.fixedFooterHeight=this.fixedFooter?this.fixedFooter.offsetHeight:0},checkFixedBar:function(node,local){if(node.nodeType===1){var fixed=node.getAttribute("fixed")||registry.byNode(node)&&registry.byNode(node).fixed;if(fixed==="top")return domClass.add(node,"mblFixedHeaderBar"),local&&(node.style.top="0px",this.fixedHeader=node),fixed;if(fixed==="bottom")return domClass.add(node,"mblFixedBottomBar"),this.fixedFooter=node,fixed}return null}});return cls})