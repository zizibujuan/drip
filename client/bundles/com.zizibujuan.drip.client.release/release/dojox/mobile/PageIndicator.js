//>>built
define("dojox/mobile/PageIndicator",["dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/dom-construct","dijit/registry","dijit/_Contained","dijit/_WidgetBase"],function(connect,declare,dom,domClass,domConstruct,registry,Contained,WidgetBase){return declare("dojox.mobile.PageIndicator",[WidgetBase,Contained],{refId:"",baseClass:"mblPageIndicator",buildRendering:function(){this.inherited(arguments),this._tblNode=domConstruct.create("table",{className:"mblPageIndicatorContainer"},this.domNode),this._tblNode.insertRow(-1),this._clickHandle=this.connect(this.domNode,"onclick","_onClick"),this.subscribe("/dojox/mobile/viewChanged",function(view){this.reset()})},startup:function(){var _this=this;setTimeout(function(){_this.reset()},0)},reset:function(){var r=this._tblNode.rows[0],i,c,a=[],dot,refNode=this.refId&&dom.byId(this.refId)||this.domNode,children=refNode.parentNode.childNodes;for(i=0;i<children.length;i++)c=children[i],this.isView(c)&&a.push(c);if(r.cells.length!==a.length){domConstruct.empty(r);for(i=0;i<a.length;i++)c=a[i],dot=domConstruct.create("div",{className:"mblPageIndicatorDot"}),r.insertCell(-1).appendChild(dot)}if(a.length===0)return;var currentView=registry.byNode(a[0]).getShowingView();for(i=0;i<r.cells.length;i++)dot=r.cells[i].firstChild,a[i]===currentView.domNode?domClass.add(dot,"mblPageIndicatorDotSelected"):domClass.remove(dot,"mblPageIndicatorDotSelected")},isView:function(node){return node&&node.nodeType===1&&domClass.contains(node,"mblView")},_onClick:function(e){if(this.onClick(e)===!1)return;if(e.target!==this.domNode)return;e.layerX<this._tblNode.offsetLeft?connect.publish("/dojox/mobile/prevPage",[this]):e.layerX>this._tblNode.offsetLeft+this._tblNode.offsetWidth&&connect.publish("/dojox/mobile/nextPage",[this])},onClick:function(){}})})