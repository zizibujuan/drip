//>>built
define("dojox/mobile/TabBarButton",["dojo/_base/connect","dojo/_base/declare","dojo/_base/event","dojo/_base/lang","dojo/dom","dojo/dom-class","dojo/dom-construct","dojo/dom-style","./iconUtils","./_ItemBase","./Badge","./sniff","dojo/has!dojo-bidi?dojox/mobile/bidi/TabBarButton"],function(connect,declare,event,lang,dom,domClass,domConstruct,domStyle,iconUtils,ItemBase,Badge,has,BidiTabBarButton){var TabBarButton=declare(has("dojo-bidi")?"dojox.mobile.NonBidiTabBarButton":"dojox.mobile.TabBarButton",ItemBase,{icon1:"",icon2:"",iconPos1:"",iconPos2:"",selected:!1,transition:"none",tag:"li",badge:"",baseClass:"mblTabBarButton",closeIcon:"mblDomButtonWhiteCross",_selStartMethod:"touch",_selEndMethod:"touch",destroy:function(){this.badgeObj&&delete this.badgeObj,this.inherited(arguments)},inheritParams:function(){this.icon&&!this.icon1&&(this.icon1=this.icon);var parent=this.getParent();parent&&(this.transition||(this.transition=parent.transition),this.icon1&&parent.iconBase&&parent.iconBase.charAt(parent.iconBase.length-1)==="/"&&(this.icon1=parent.iconBase+this.icon1),this.icon1||(this.icon1=parent.iconBase),this.iconPos1||(this.iconPos1=parent.iconPos),this.icon2&&parent.iconBase&&parent.iconBase.charAt(parent.iconBase.length-1)==="/"&&(this.icon2=parent.iconBase+this.icon2),this.icon2||(this.icon2=parent.iconBase||this.icon1),this.iconPos2||(this.iconPos2=parent.iconPos||this.iconPos1),parent.closable&&(this.icon1||(this.icon1=this.closeIcon),this.icon2||(this.icon2=this.closeIcon),domClass.add(this.domNode,"mblTabBarButtonClosable")))},buildRendering:function(){this.domNode=this.srcNodeRef||domConstruct.create(this.tag),this.srcNodeRef&&(this.label||(this.label=lang.trim(this.srcNodeRef.innerHTML)),this.srcNodeRef.innerHTML=""),this.labelNode=this.box=domConstruct.create("div",{className:"mblTabBarButtonLabel"},this.domNode),this.inherited(arguments)},startup:function(){if(this._started)return;this._dragstartHandle=this.connect(this.domNode,"ondragstart",event.stop),this._keydownHandle=this.connect(this.domNode,"onkeydown","_onClick");var parent=this.getParent();parent&&parent.closable&&(this._clickCloseHandler=this.connect(this.iconDivNode,"onclick","_onCloseButtonClick"),this._keydownCloseHandler=this.connect(this.iconDivNode,"onkeydown","_onCloseButtonClick"),this.iconDivNode.tabIndex="0"),this.inherited(arguments),this._isOnLine||(this._isOnLine=!0,this.set({icon:this._pendingIcon!==undefined?this._pendingIcon:this.icon,icon1:this.icon1,icon2:this.icon2}),delete this._pendingIcon),dom.setSelectable(this.domNode,!1)},onClose:function(e){return connect.publish("/dojox/mobile/tabClose",[this]),this.getParent().onCloseButtonClick(this)},_onCloseButtonClick:function(e){if(e&&e.type==="keydown"&&e.keyCode!==13)return;if(this.onCloseButtonClick(e)===!1)return;this.onClose()&&this.destroy()},onCloseButtonClick:function(){},_onClick:function(e){if(e&&e.type==="keydown"&&e.keyCode!==13)return;if(this.onClick(e)===!1)return;this.defaultClickAction(e)},onClick:function(){},_setIcon:function(icon,n){if(!this.getParent())return;this._set("icon"+n,icon),this.iconDivNode||(this.iconDivNode=domConstruct.create("div",{className:"mblTabBarButtonIconArea"},this.domNode,"first")),this["iconParentNode"+n]||(this["iconParentNode"+n]=domConstruct.create("div",{className:"mblTabBarButtonIconParent mblTabBarButtonIconParent"+n},this.iconDivNode)),this["iconNode"+n]=iconUtils.setIcon(icon,this["iconPos"+n],this["iconNode"+n],this.alt,this["iconParentNode"+n]),this["icon"+n]=icon,domClass.toggle(this.domNode,"mblTabBarButtonHasIcon",icon&&icon!=="none")},_setIcon1Attr:function(icon){this._setIcon(icon,1)},_setIcon2Attr:function(icon){this._setIcon(icon,2)},_getBadgeAttr:function(){return this.badgeObj&&this.badgeObj.domNode.parentNode&&this.badgeObj.domNode.parentNode.nodeType==1?this.badgeObj.getValue():null},_setBadgeAttr:function(value){this.badgeObj||(this.badgeObj=new Badge({fontSize:11}),domStyle.set(this.badgeObj.domNode,{position:"absolute",top:"0px",right:"0px"})),this.badgeObj.setValue(value),value?this.domNode.appendChild(this.badgeObj.domNode):this.domNode===this.badgeObj.domNode.parentNode&&this.domNode.removeChild(this.badgeObj.domNode)},_setSelectedAttr:function(selected){this.inherited(arguments),domClass.toggle(this.domNode,"mblTabBarButtonSelected",selected)}});return has("dojo-bidi")?declare("dojox.mobile.TabBarButton",[TabBarButton,BidiTabBarButton]):TabBarButton})