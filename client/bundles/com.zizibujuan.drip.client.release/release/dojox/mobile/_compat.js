//>>built
define("dojox/mobile/_compat",["dojo/_base/array","dojo/_base/config","dojo/_base/connect","dojo/_base/fx","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/fx","dojo/fx/easing","dojo/ready","dojo/uacss","dijit/registry","dojox/fx","dojox/fx/flip","./EdgeToEdgeList","./IconContainer","./ProgressIndicator","./RoundRect","./RoundRectList","./ScrollableView","./Switch","./View","require"],function(array,config,connect,bfx,lang,has,win,domClass,domConstruct,domGeometry,domStyle,fx,easing,ready,uacss,registry,xfx,flip,EdgeToEdgeList,IconContainer,ProgressIndicator,RoundRect,RoundRectList,ScrollableView,Switch,View,require){var dm=lang.getObject("dojox.mobile",!0);return has("webkit")||(lang.extend(View,{_doTransition:function(fromNode,toNode,transition,dir){var anim;this.wakeUp(toNode);var s1,s2;if(!transition||transition=="none")toNode.style.display="",fromNode.style.display="none",toNode.style.left="0px",this.invokeCallback();else if(transition=="slide"||transition=="cover"||transition=="reveal"){var w=fromNode.offsetWidth;s1=fx.slideTo({node:fromNode,duration:400,left:-w*dir,top:domStyle.get(fromNode,"top")}),s2=fx.slideTo({node:toNode,duration:400,left:0,top:domStyle.get(toNode,"top")}),toNode.style.position="absolute",toNode.style.left=w*dir+"px",toNode.style.display="",anim=fx.combine([s1,s2]),connect.connect(anim,"onEnd",this,function(){if(!this._inProgress)return;fromNode.style.display="none",fromNode.style.left="0px",toNode.style.position="relative";var toWidget=registry.byNode(toNode);toWidget&&!domClass.contains(toWidget.domNode,"out")&&(toWidget.containerNode.style.paddingTop=""),this.invokeCallback()}),anim.play()}else if(transition=="slidev"||transition=="coverv"||transition=="reavealv"){var h=fromNode.offsetHeight;s1=fx.slideTo({node:fromNode,duration:400,left:0,top:-h*dir}),s2=fx.slideTo({node:toNode,duration:400,left:0,top:0}),toNode.style.position="absolute",toNode.style.top=h*dir+"px",toNode.style.left="0px",toNode.style.display="",anim=fx.combine([s1,s2]),connect.connect(anim,"onEnd",this,function(){if(!this._inProgress)return;fromNode.style.display="none",toNode.style.position="relative",this.invokeCallback()}),anim.play()}else transition=="flip"?(anim=xfx.flip({node:fromNode,dir:"right",depth:.5,duration:400}),toNode.style.position="absolute",toNode.style.left="0px",connect.connect(anim,"onEnd",this,function(){if(!this._inProgress)return;fromNode.style.display="none",toNode.style.position="relative",toNode.style.display="",this.invokeCallback()}),anim.play()):(anim=fx.chain([bfx.fadeOut({node:fromNode,duration:600}),bfx.fadeIn({node:toNode,duration:600})]),toNode.style.position="absolute",toNode.style.left="0px",toNode.style.display="",domStyle.set(toNode,"opacity",0),connect.connect(anim,"onEnd",this,function(){if(!this._inProgress)return;fromNode.style.display="none",toNode.style.position="relative",domStyle.set(fromNode,"opacity",1),this.invokeCallback()}),anim.play())},wakeUp:function(node){if(has("ie")&&!node._wokeup){node._wokeup=!0;var disp=node.style.display;node.style.display="";var nodes=node.getElementsByTagName("*");for(var i=0,len=nodes.length;i<len;i++){var val=nodes[i].style.display;nodes[i].style.display="none",nodes[i].style.display="",nodes[i].style.display=val}node.style.display=disp}}}),lang.extend(Switch,{_changeState:function(state,anim){var on=state==="on",pos;on?pos=0:pos=-this.inner.firstChild.firstChild.offsetWidth,this.left.style.display="",this.right.style.display="";var _this=this,f=function(){domClass.remove(_this.domNode,on?"mblSwitchOff":"mblSwitchOn"),domClass.add(_this.domNode,on?"mblSwitchOn":"mblSwitchOff"),_this.left.style.display=on?"":"none",_this.right.style.display=on?"none":""};if(anim){var a=fx.slideTo({node:this.inner,duration:300,left:pos,onEnd:f});a.play()}else{if(on||pos)this.inner.style.left=pos+"px";f()}}}),lang.extend(ProgressIndicator,{scale:function(size){if(has("ie")){var dim={w:size,h:size};domGeometry.setMarginBox(this.domNode,dim),domGeometry.setMarginBox(this.containerNode,dim)}else if(has("ff")){var scale=size/40;domStyle.set(this.containerNode,{MozTransform:"scale("+scale+")",MozTransformOrigin:"0 0"}),domGeometry.setMarginBox(this.domNode,{w:size,h:size}),domGeometry.setMarginBox(this.containerNode,{w:size/scale,h:size/scale})}}}),has("ie")&&(lang.extend(RoundRect,{buildRendering:function(){dm.createRoundRect(this),this.domNode.className="mblRoundRect"}}),RoundRectList._addChild=RoundRectList.prototype.addChild,RoundRectList._postCreate=RoundRectList.prototype.postCreate,lang.extend(RoundRectList,{buildRendering:function(){dm.createRoundRect(this,!0),this.domNode.className="mblRoundRectList"},postCreate:function(){RoundRectList._postCreate.apply(this,arguments),this.redrawBorders()},addChild:function(widget,insertIndex){RoundRectList._addChild.apply(this,arguments),this.redrawBorders(),dm.applyPngFilter&&dm.applyPngFilter(widget.domNode)},redrawBorders:function(){if(this instanceof EdgeToEdgeList)return;var lastChildFound=!1;for(var i=this.containerNode.childNodes.length-1;i>=0;i--){var c=this.containerNode.childNodes[i];c.tagName=="LI"&&(c.style.borderBottomStyle=lastChildFound?"solid":"none",lastChildFound=!0)}}}),lang.extend(EdgeToEdgeList,{buildRendering:function(){this.domNode=this.containerNode=this.srcNodeRef||win.doc.createElement("ul"),this.domNode.className="mblEdgeToEdgeList"}}),IconContainer._addChild=IconContainer.prototype.addChild,lang.extend(IconContainer,{addChild:function(widget,insertIndex){IconContainer._addChild.apply(this,arguments),dm.applyPngFilter&&dm.applyPngFilter(widget.domNode)}}),lang.mixin(dm,{createRoundRect:function(_this,isList){var i,len;_this.domNode=win.doc.createElement("div"),_this.domNode.style.padding="0px",_this.domNode.style.backgroundColor="transparent",_this.domNode.style.border="none",_this.containerNode=win.doc.createElement(isList?"ul":"div"),_this.containerNode.className="mblRoundRectContainer";if(_this.srcNodeRef){_this.srcNodeRef.parentNode.replaceChild(_this.domNode,_this.srcNodeRef);for(i=0,len=_this.srcNodeRef.childNodes.length;i<len;i++)_this.containerNode.appendChild(_this.srcNodeRef.removeChild(_this.srcNodeRef.firstChild));_this.srcNodeRef=null}_this.domNode.appendChild(_this.containerNode);for(i=0;i<=5;i++){var top=domConstruct.create("div");top.className="mblRoundCorner mblRoundCorner"+i+"T",_this.domNode.insertBefore(top,_this.containerNode);var bottom=domConstruct.create("div");bottom.className="mblRoundCorner mblRoundCorner"+i+"B",_this.domNode.appendChild(bottom)}}}),lang.extend(ScrollableView,{postCreate:function(){var dummy=domConstruct.create("div",{className:"mblDummyForIE",innerHTML:"&nbsp;"},this.containerNode,"first");domStyle.set(dummy,{position:"relative",marginBottom:"-2px",fontSize:"1px"})}})),has("ie")<=6&&(dm.applyPngFilter=function(root){root=root||win.body();var nodes=root.getElementsByTagName("IMG"),blank=require.toUrl("dojo/resources/blank.gif");for(var i=0,len=nodes.length;i<len;i++){var img=nodes[i],w=img.offsetWidth,h=img.offsetHeight;if(w===0||h===0){if(domStyle.get(img,"display")!="none")continue;img.style.display="",w=img.offsetWidth,h=img.offsetHeight,img.style.display="none";if(w===0||h===0)continue}var src=img.src;if(src.indexOf("resources/blank.gif")!=-1)continue;img.src=blank,img.runtimeStyle.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+src+"')",img.style.width=w+"px",img.style.height=h+"px"}},!dm._disableBgFilter&&dm.createDomButton&&(dm._createDomButton_orig=dm.createDomButton,dm.createDomButton=function(refNode,style,toNode){var node=dm._createDomButton_orig.apply(this,arguments);if(node&&node.className&&node.className.indexOf("mblDomButton")!==-1){var f=function(){if(node.currentStyle&&node.currentStyle.backgroundImage.match(/url.*(mblDomButton.*\.png)/)){var img=RegExp.$1,src=require.toUrl("dojox/mobile/themes/common/domButtons/compat/")+img;node.runtimeStyle.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+src+"',sizingMethod='crop')",node.style.background="none"}};setTimeout(f,1e3),setTimeout(f,5e3)}return node})),dm.loadCssFile=function(file){dm.loadedCssFiles||(dm.loadedCssFiles=[]),win.doc.createStyleSheet?setTimeout(function(file){return function(){var ss=win.doc.createStyleSheet(file);ss&&dm.loadedCssFiles.push(ss.owningElement)}}(file),0):dm.loadedCssFiles.push(domConstruct.create("link",{href:file,type:"text/css",rel:"stylesheet"},win.doc.getElementsByTagName("head")[0]))},dm.loadCss=function(files){if(!dm._loadedCss){var obj={};array.forEach(dm.getCssPaths(),function(path){obj[path]=!0}),dm._loadedCss=obj}lang.isArray(files)||(files=[files]);for(var i=0;i<files.length;i++){var file=files[i];dm._loadedCss[file]||(dm._loadedCss[file]=!0,dm.loadCssFile(file))}},dm.getCssPaths=function(){var paths=[],i,j,len,s=win.doc.styleSheets;for(i=0;i<s.length;i++){if(s[i].href)continue;var r=s[i].cssRules||s[i].imports;if(!r)continue;for(j=0;j<r.length;j++)r[j].href&&paths.push(r[j].href)}var elems=win.doc.getElementsByTagName("link");for(i=0,len=elems.length;i<len;i++)elems[i].href&&paths.push(elems[i].href);return paths},dm.loadCompatPattern=/\/mobile\/themes\/.*\.css$/,dm.loadCompatCssFiles=function(force){if(has("ie")&&!force){setTimeout(function(){dm.loadCompatCssFiles(!0)},0);return}dm._loadedCss=undefined;var paths=dm.getCssPaths();for(var i=0;i<paths.length;i++){var href=paths[i];if((href.match(config.mblLoadCompatPattern||dm.loadCompatPattern)||location.href.indexOf("mobile/tests/")!==-1)&&href.indexOf("-compat.css")===-1){var compatCss=href.substring(0,href.length-4)+"-compat.css";dm.loadCss(compatCss)}}},dm.hideAddressBar=function(evt,doResize){doResize!==!1&&dm.resizeAll()},ready(function(){config.mblLoadCompatCssFiles!==!1&&dm.loadCompatCssFiles(),dm.applyPngFilter&&dm.applyPngFilter()})),dm})