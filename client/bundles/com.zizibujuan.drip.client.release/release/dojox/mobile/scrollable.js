//>>built
define("dojox/mobile/scrollable",["dojo/_base/kernel","dojo/_base/connect","dojo/_base/event","dojo/_base/lang","dojo/_base/window","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dojo/touch","./sniff","./_css3","./_maskUtils"],function(dojo,connect,event,lang,win,domClass,domConstruct,domStyle,touch,has,css3,maskUtils){var dm=lang.getObject("dojox.mobile",!0);has.add("translate3d",function(){if(has("css3-animations")){var elem=win.doc.createElement("div");elem.style[css3.name("transform")]="translate3d(0px,1px,0px)",win.doc.documentElement.appendChild(elem);var v=win.doc.defaultView.getComputedStyle(elem,"")[css3.name("transform",!0)],hasTranslate3d=v&&v.indexOf("matrix")===0;return win.doc.documentElement.removeChild(elem),hasTranslate3d}});var Scrollable=function(){};return lang.extend(Scrollable,{fixedHeaderHeight:0,fixedFooterHeight:0,isLocalFooter:!1,scrollBar:!0,scrollDir:"v",weight:.6,fadeScrollBar:!0,disableFlashScrollBar:!1,threshold:4,constraint:!0,touchNode:null,propagatable:!0,dirLock:!1,height:"",scrollType:0,init:function(params){if(params)for(var p in params)params.hasOwnProperty(p)&&(this[p]=p!="domNode"&&p!="containerNode"||typeof params[p]!="string"?params[p]:win.doc.getElementById(params[p]));typeof this.domNode.style.msTouchAction!="undefined"&&(this.domNode.style.msTouchAction="none"),this.touchNode=this.touchNode||this.containerNode,this._v=this.scrollDir.indexOf("v")!=-1,this._h=this.scrollDir.indexOf("h")!=-1,this._f=this.scrollDir=="f",this._ch=[],this._ch.push(connect.connect(this.touchNode,touch.press,this,"onTouchStart"));if(has("css3-animations")){this._useTopLeft=this.scrollType?this.scrollType===2:has("android")<3,this._useTopLeft||(this._useTransformTransition=this.scrollType?this.scrollType===3:has("iphone")>=6);if(!this._useTopLeft){if(this._useTransformTransition)this._ch.push(connect.connect(this.domNode,css3.name("transitionEnd"),this,"onFlickAnimationEnd")),this._ch.push(connect.connect(this.domNode,css3.name("transitionStart"),this,"onFlickAnimationStart"));else{this._ch.push(connect.connect(this.domNode,css3.name("animationEnd"),this,"onFlickAnimationEnd")),this._ch.push(connect.connect(this.domNode,css3.name("animationStart"),this,"onFlickAnimationStart"));for(var i=0;i<3;i++)this.setKeyframes(null,null,i)}has("translate3d")&&domStyle.set(this.containerNode,css3.name("transform"),"translate3d(0,0,0)")}else this._ch.push(connect.connect(this.domNode,css3.name("transitionEnd"),this,"onFlickAnimationEnd")),this._ch.push(connect.connect(this.domNode,css3.name("transitionStart"),this,"onFlickAnimationStart"))}this._speed={x:0,y:0},this._appFooterHeight=0,this.isTopLevel()&&!this.noResize&&this.resize();var _this=this;setTimeout(function(){_this.flashScrollBar()},600)},isTopLevel:function(){return!0},cleanup:function(){if(this._ch){for(var i=0;i<this._ch.length;i++)connect.disconnect(this._ch[i]);this._ch=null}},findDisp:function(node){if(!node.parentNode)return null;if(node.nodeType===1&&domClass.contains(node,"mblSwapView")&&node.style.display!=="none")return node;var nodes=node.parentNode.childNodes;for(var i=0;i<nodes.length;i++){var n=nodes[i];if(n.nodeType===1&&domClass.contains(n,"mblView")&&n.style.display!=="none")return n}return node},getScreenSize:function(){return{h:win.global.innerHeight||win.doc.documentElement.clientHeight||win.doc.documentElement.offsetHeight,w:win.global.innerWidth||win.doc.documentElement.clientWidth||win.doc.documentElement.offsetWidth}},resize:function(e){this._appFooterHeight=this.fixedFooterHeight&&!this.isLocalFooter?this.fixedFooterHeight:0,this.isLocalHeader&&(this.containerNode.style.marginTop=this.fixedHeaderHeight+"px");var top=0;for(var n=this.domNode;n&&n.tagName!="BODY";n=n.offsetParent){n=this.findDisp(n);if(!n)break;top+=n.offsetTop}var h,screenHeight=this.getScreenSize().h,dh=screenHeight-top-this._appFooterHeight;if(this.height==="inherit")this.domNode.offsetParent&&(h=this.domNode.offsetParent.offsetHeight+"px");else if(this.height==="auto"){var parent=this.domNode.offsetParent;if(parent){this.domNode.style.height="0px";var parentRect=parent.getBoundingClientRect(),scrollableRect=this.domNode.getBoundingClientRect(),contentBottom=parentRect.bottom-this._appFooterHeight;scrollableRect.bottom>=contentBottom?dh=screenHeight-(scrollableRect.top-parentRect.top)-this._appFooterHeight:dh=contentBottom-scrollableRect.bottom}var contentHeight=Math.max(this.domNode.scrollHeight,this.containerNode.scrollHeight);h=(contentHeight?Math.min(contentHeight,dh):dh)+"px"}else this.height&&(h=this.height);h||(h=dh+"px"),h.charAt(0)!=="-"&&h!=="default"&&(this.domNode.style.height=h),this.onTouchEnd()},onFlickAnimationStart:function(e){event.stop(e)},onFlickAnimationEnd:function(e){var an=e&&e.animationName;if(an&&an.indexOf("scrollableViewScroll2")===-1){an.indexOf("scrollableViewScroll0")!==-1?this._scrollBarNodeV&&domClass.remove(this._scrollBarNodeV,"mblScrollableScrollTo0"):an.indexOf("scrollableViewScroll1")!==-1?this._scrollBarNodeH&&domClass.remove(this._scrollBarNodeH,"mblScrollableScrollTo1"):(this._scrollBarNodeV&&(this._scrollBarNodeV.className=""),this._scrollBarNodeH&&(this._scrollBarNodeH.className=""));return}if(this._useTransformTransition||this._useTopLeft){var n=e.target;if(n===this._scrollBarV||n===this._scrollBarH){var cls="mblScrollableScrollTo"+(n===this._scrollBarV?"0":"1");domClass.contains(n,cls)?domClass.remove(n,cls):n.className="";return}}e&&e.srcElement&&event.stop(e),this.stopAnimation();if(this._bounce){var _this=this,bounce=_this._bounce;setTimeout(function(){_this.slideTo(bounce,.3,"ease-out")},0),_this._bounce=undefined}else this.hideScrollBar(),this.removeCover()},isFormElement:function(node){node&&node.nodeType!==1&&(node=node.parentNode);if(!node||node.nodeType!==1)return!1;var t=node.tagName;return t==="SELECT"||t==="INPUT"||t==="TEXTAREA"||t==="BUTTON"},onTouchStart:function(e){if(this.disableTouchScroll)return;if(this._conn&&(new Date).getTime()-this.startTime<500)return;this._conn||(this._conn=[],this._conn.push(connect.connect(win.doc,touch.move,this,"onTouchMove")),this._conn.push(connect.connect(win.doc,touch.release,this,"onTouchEnd"))),this._aborted=!1,domClass.contains(this.containerNode,"mblScrollableScrollTo2")?this.abort():(this._scrollBarNodeV&&(this._scrollBarNodeV.className=""),this._scrollBarNodeH&&(this._scrollBarNodeH.className="")),this.touchStartX=e.touches?e.touches[0].pageX:e.clientX,this.touchStartY=e.touches?e.touches[0].pageY:e.clientY,this.startTime=(new Date).getTime(),this.startPos=this.getPos(),this._dim=this.getDim(),this._time=[0],this._posX=[this.touchStartX],this._posY=[this.touchStartY],this._locked=!1,this.isFormElement(e.target)||(this.propagatable?e.preventDefault():event.stop(e))},onTouchMove:function(e){if(this._locked)return;var x=e.touches?e.touches[0].pageX:e.clientX,y=e.touches?e.touches[0].pageY:e.clientY,dx=x-this.touchStartX,dy=y-this.touchStartY,to={x:this.startPos.x+dx,y:this.startPos.y+dy},dim=this._dim;dx=Math.abs(dx),dy=Math.abs(dy);if(this._time.length==1){if(this.dirLock)if(this._v&&!this._h&&dx>=this.threshold&&dx>=dy||(this._h||this._f)&&!this._v&&dy>=this.threshold&&dy>=dx){this._locked=!0;return}if(this._v&&this._h){if(dy<this.threshold&&dx<this.threshold)return}else if(this._v&&dy<this.threshold||(this._h||this._f)&&dx<this.threshold)return;this.addCover(),this.showScrollBar()}var weight=this.weight;this._v&&this.constraint&&(to.y>0?to.y=Math.round(to.y*weight):to.y<-dim.o.h&&(dim.c.h<dim.d.h?to.y=Math.round(to.y*weight):to.y=-dim.o.h-Math.round((-dim.o.h-to.y)*weight))),(this._h||this._f)&&this.constraint&&(to.x>0?to.x=Math.round(to.x*weight):to.x<-dim.o.w&&(dim.c.w<dim.d.w?to.x=Math.round(to.x*weight):to.x=-dim.o.w-Math.round((-dim.o.w-to.x)*weight))),this.scrollTo(to);var max=10,n=this._time.length;if(n>=2){var d0,d1;this._v&&!this._h?(d0=this._posY[n-1]-this._posY[n-2],d1=y-this._posY[n-1]):!this._v&&this._h&&(d0=this._posX[n-1]-this._posX[n-2],d1=x-this._posX[n-1]),d0*d1<0&&(this._time=[this._time[n-1]],this._posX=[this._posX[n-1]],this._posY=[this._posY[n-1]],n=1)}n==max&&(this._time.shift(),this._posX.shift(),this._posY.shift()),this._time.push((new Date).getTime()-this.startTime),this._posX.push(x),this._posY.push(y)},onTouchEnd:function(e){if(this._locked)return;var speed=this._speed={x:0,y:0},dim=this._dim,pos=this.getPos(),to={};if(e){if(!this._conn)return;for(var i=0;i<this._conn.length;i++)connect.disconnect(this._conn[i]);this._conn=null;var n=this._time.length,clicked=!1;this._aborted||(n<=1?clicked=!0:n==2&&Math.abs(this._posY[1]-this._posY[0])<4&&has("touch")&&(clicked=!0));if(clicked){this.hideScrollBar(),this.removeCover();if(has("touch")&&!this.isFormElement(e.target)&&!(has("android")>=4.1)){var elem=e.target;elem.nodeType!=1&&(elem=elem.parentNode);var ev=win.doc.createEvent("MouseEvents");ev.initMouseEvent("click",!0,!0,win.global,1,e.screenX,e.screenY,e.clientX,e.clientY),setTimeout(function(){elem.dispatchEvent(ev)},0)}return}speed=this._speed=this.getSpeed()}else{if(pos.x==0&&pos.y==0)return;dim=this.getDim()}this._v&&(to.y=pos.y+speed.y);if(this._h||this._f)to.x=pos.x+speed.x;if(this.adjustDestination(to,pos,dim)===!1)return;if(this.scrollDir=="v"&&dim.c.h<dim.d.h){this.slideTo({y:0},.3,"ease-out");return}if(this.scrollDir=="h"&&dim.c.w<dim.d.w){this.slideTo({x:0},.3,"ease-out");return}if(this._v&&this._h&&dim.c.h<dim.d.h&&dim.c.w<dim.d.w){this.slideTo({x:0,y:0},.3,"ease-out");return}var duration,easing="ease-out",bounce={};this._v&&this.constraint&&(to.y>0?pos.y>0?(duration=.3,to.y=0):(to.y=Math.min(to.y,20),easing="linear",bounce.y=0):-speed.y>dim.o.h- -pos.y&&(pos.y<-dim.o.h?(duration=.3,to.y=dim.c.h<=dim.d.h?0:-dim.o.h):(to.y=Math.max(to.y,-dim.o.h-20),easing="linear",bounce.y=-dim.o.h))),(this._h||this._f)&&this.constraint&&(to.x>0?pos.x>0?(duration=.3,to.x=0):(to.x=Math.min(to.x,20),easing="linear",bounce.x=0):-speed.x>dim.o.w- -pos.x&&(pos.x<-dim.o.w?(duration=.3,to.x=dim.c.w<=dim.d.w?0:-dim.o.w):(to.x=Math.max(to.x,-dim.o.w-20),easing="linear",bounce.x=-dim.o.w))),this._bounce=bounce.x!==undefined||bounce.y!==undefined?bounce:undefined;if(duration===undefined){var distance,velocity;this._v&&this._h?(velocity=Math.sqrt(speed.x*speed.x+speed.y*speed.y),distance=Math.sqrt(Math.pow(to.y-pos.y,2)+Math.pow(to.x-pos.x,2))):this._v?(velocity=speed.y,distance=to.y-pos.y):this._h&&(velocity=speed.x,distance=to.x-pos.x);if(distance===0&&!e)return;duration=velocity!==0?Math.abs(distance/velocity):.01}this.slideTo(to,duration,easing)},adjustDestination:function(to,pos,dim){return!0},abort:function(){this.scrollTo(this.getPos()),this.stopAnimation(),this._aborted=!0},stopAnimation:function(){domClass.remove(this.containerNode,"mblScrollableScrollTo2"),this._scrollBarV&&(this._scrollBarV.className=""),this._scrollBarH&&(this._scrollBarH.className="");if(this._useTransformTransition||this._useTopLeft)this.containerNode.style[css3.name("transition")]="",this._scrollBarV&&(this._scrollBarV.style[css3.name("transition")]=""),this._scrollBarH&&(this._scrollBarH.style[css3.name("transition")]="")},scrollIntoView:function(node,alignWithTop,duration){if(!this._v)return;var c=this.containerNode,h=this.getDim().d.h,top=0;for(var n=node;n!==c;n=n.offsetParent){if(!n||n.tagName==="BODY")return;top+=n.offsetTop}var y=alignWithTop?Math.max(h-c.offsetHeight,-top):Math.min(0,h-top-node.offsetHeight);duration&&typeof duration=="number"?this.slideTo({y:y},duration,"ease-out"):this.scrollTo({y:y})},getSpeed:function(){var x=0,y=0,n=this._time.length;if(n>=2&&(new Date).getTime()-this.startTime-this._time[n-1]<500){var dy=this._posY[n-(n>3?2:1)]-this._posY[n-6>=0?n-6:0],dx=this._posX[n-(n>3?2:1)]-this._posX[n-6>=0?n-6:0],dt=this._time[n-(n>3?2:1)]-this._time[n-6>=0?n-6:0];y=this.calcSpeed(dy,dt),x=this.calcSpeed(dx,dt)}return{x:x,y:y}},calcSpeed:function(distance,time){return Math.round(distance/time*100)*4},scrollTo:function(to,doNotMoveScrollBar,node){var s=(node||this.containerNode).style;if(has("css3-animations"))if(!this._useTopLeft)this._useTransformTransition&&(s[css3.name("transition")]=""),s[css3.name("transform")]=this.makeTranslateStr(to);else{s[css3.name("transition")]="",this._v&&(s.top=to.y+"px");if(this._h||this._f)s.left=to.x+"px"}else{this._v&&(s.top=to.y+"px");if(this._h||this._f)s.left=to.x+"px"}doNotMoveScrollBar||this.scrollScrollBarTo(this.calcScrollBarPos(to))},slideTo:function(to,duration,easing){this._runSlideAnimation(this.getPos(),to,duration,easing,this.containerNode,2),this.slideScrollBarTo(to,duration,easing)},makeTranslateStr:function(to){var y=this._v&&typeof to.y=="number"?to.y+"px":"0px",x=(this._h||this._f)&&typeof to.x=="number"?to.x+"px":"0px";return has("translate3d")?"translate3d("+x+","+y+",0px)":"translate("+x+","+y+")"},getPos:function(){if(has("css3-animations")){var s=win.doc.defaultView.getComputedStyle(this.containerNode,"");if(!this._useTopLeft){var m=s[css3.name("transform")];if(m&&m.indexOf("matrix")===0){var arr=m.split(/[,\s\)]+/),i=m.indexOf("matrix3d")===0?12:4;return{y:arr[i+1]-0,x:arr[i]-0}}return{x:0,y:0}}return{x:parseInt(s.left)||0,y:parseInt(s.top)||0}}var y=parseInt(this.containerNode.style.top)||0;return{y:y,x:this.containerNode.offsetLeft}},getDim:function(){var d={};return d.c={h:this.containerNode.offsetHeight,w:this.containerNode.offsetWidth},d.v={h:this.domNode.offsetHeight+this._appFooterHeight,w:this.domNode.offsetWidth},d.d={h:d.v.h-this.fixedHeaderHeight-this.fixedFooterHeight,w:d.v.w},d.o={h:d.c.h-d.v.h+this.fixedHeaderHeight+this.fixedFooterHeight,w:d.c.w-d.v.w},d},showScrollBar:function(){if(!this.scrollBar)return;var dim=this._dim;if(this.scrollDir=="v"&&dim.c.h<=dim.d.h)return;if(this.scrollDir=="h"&&dim.c.w<=dim.d.w)return;if(this._v&&this._h&&dim.c.h<=dim.d.h&&dim.c.w<=dim.d.w)return;var createBar=function(self,dir){var bar=self["_scrollBarNode"+dir];if(!bar){var wrapper=domConstruct.create("div",null,self.domNode),props={position:"absolute",overflow:"hidden"};dir=="V"?(props.right="2px",props.width="5px"):(props.bottom=(self.isLocalFooter?self.fixedFooterHeight:0)+2+"px",props.height="5px"),domStyle.set(wrapper,props),wrapper.className="mblScrollBarWrapper",self["_scrollBarWrapper"+dir]=wrapper,bar=domConstruct.create("div",null,wrapper),domStyle.set(bar,css3.add({opacity:.6,position:"absolute",backgroundColor:"#606060",fontSize:"1px",MozBorderRadius:"2px",zIndex:2147483647},{borderRadius:"2px",transformOrigin:"0 0"})),domStyle.set(bar,dir=="V"?{width:"5px"}:{height:"5px"}),self["_scrollBarNode"+dir]=bar}return bar};this._v&&!this._scrollBarV&&(this._scrollBarV=createBar(this,"V")),this._h&&!this._scrollBarH&&(this._scrollBarH=createBar(this,"H")),this.resetScrollBar()},hideScrollBar:function(){if(this.fadeScrollBar&&has("css3-animations")&&!dm._fadeRule){var node=domConstruct.create("style",null,win.doc.getElementsByTagName("head")[0]);node.textContent=".mblScrollableFadeScrollBar{  "+css3.name("animation-duration",!0)+": 1s;"+"  "+css3.name("animation-name",!0)+": scrollableViewFadeScrollBar;}"+"@"+css3.name("keyframes",!0)+" scrollableViewFadeScrollBar{"+"  from { opacity: 0.6; }"+"  to { opacity: 0; }}",dm._fadeRule=node.sheet.cssRules[1]}if(!this.scrollBar)return;var f=function(bar,self){domStyle.set(bar,css3.add({opacity:0},{animationDuration:""}));if(!self._useTopLeft||!has("android"))bar.className="mblScrollableFadeScrollBar"};this._scrollBarV&&(f(this._scrollBarV,this),this._scrollBarV=null),this._scrollBarH&&(f(this._scrollBarH,this),this._scrollBarH=null)},calcScrollBarPos:function(to){var pos={},dim=this._dim,f=function(wrapperH,barH,t,d,c){var y=Math.round((d-barH-8)/(d-c)*t);return y<-barH+5&&(y=-barH+5),y>wrapperH-5&&(y=wrapperH-5),y};return typeof to.y=="number"&&this._scrollBarV&&(pos.y=f(this._scrollBarWrapperV.offsetHeight,this._scrollBarV.offsetHeight,to.y,dim.d.h,dim.c.h)),typeof to.x=="number"&&this._scrollBarH&&(pos.x=f(this._scrollBarWrapperH.offsetWidth,this._scrollBarH.offsetWidth,to.x,dim.d.w,dim.c.w)),pos},scrollScrollBarTo:function(to){if(!this.scrollBar)return;this._v&&this._scrollBarV&&typeof to.y=="number"&&(has("css3-animations")?this._useTopLeft?domStyle.set(this._scrollBarV,css3.add({top:to.y+"px"},{transition:""})):(this._useTransformTransition&&(this._scrollBarV.style[css3.name("transition")]=""),this._scrollBarV.style[css3.name("transform")]=this.makeTranslateStr({y:to.y})):this._scrollBarV.style.top=to.y+"px"),this._h&&this._scrollBarH&&typeof to.x=="number"&&(has("css3-animations")?this._useTopLeft?domStyle.set(this._scrollBarH,css3.add({left:to.x+"px"},{transition:""})):(this._useTransformTransition&&(this._scrollBarH.style[css3.name("transition")]=""),this._scrollBarH.style[css3.name("transform")]=this.makeTranslateStr({x:to.x})):this._scrollBarH.style.left=to.x+"px")},slideScrollBarTo:function(to,duration,easing){if(!this.scrollBar)return;var fromPos=this.calcScrollBarPos(this.getPos()),toPos=this.calcScrollBarPos(to);this._v&&this._scrollBarV&&this._runSlideAnimation({y:fromPos.y},{y:toPos.y},duration,easing,this._scrollBarV,0),this._h&&this._scrollBarH&&this._runSlideAnimation({x:fromPos.x},{x:toPos.x},duration,easing,this._scrollBarH,1)},_runSlideAnimation:function(from,to,duration,easing,node,idx){if(has("css3-animations"))if(!this._useTopLeft)if(this._useTransformTransition){to.x===undefined&&(to.x=from.x),to.y===undefined&&(to.y=from.y);if(to.x!==from.x||to.y!==from.y){domStyle.set(node,css3.add({},{transitionProperty:css3.name("transform"),transitionDuration:duration+"s",transitionTimingFunction:easing}));var t=this.makeTranslateStr(to);setTimeout(function(){domStyle.set(node,css3.add({},{transform:t}))},0),domClass.add(node,"mblScrollableScrollTo"+idx)}else this.hideScrollBar(),this.removeCover()}else this.setKeyframes(from,to,idx),domStyle.set(node,css3.add({},{animationDuration:duration+"s",animationTimingFunction:easing})),domClass.add(node,"mblScrollableScrollTo"+idx),idx==2?this.scrollTo(to,!0,node):this.scrollScrollBarTo(to);else domStyle.set(node,css3.add({},{transitionProperty:"top, left",transitionDuration:duration+"s",transitionTimingFunction:easing})),setTimeout(function(){domStyle.set(node,{top:(to.y||0)+"px",left:(to.x||0)+"px"})},0),domClass.add(node,"mblScrollableScrollTo"+idx);else if(dojo.fx&&dojo.fx.easing&&duration){var s=dojo.fx.slideTo({node:node,duration:duration*1e3,left:to.x,top:to.y,easing:easing=="ease-out"?dojo.fx.easing.quadOut:dojo.fx.easing.linear}).play();idx==2&&connect.connect(s,"onEnd",this,"onFlickAnimationEnd")}else idx==2?(this.scrollTo(to,!1,node),this.onFlickAnimationEnd()):this.scrollScrollBarTo(to)},resetScrollBar:function(){var f=function(wrapper,bar,d,c,hd,v){if(!bar)return;var props={};props[v?"top":"left"]=hd+4+"px";var t=d-8<=0?1:d-8;props[v?"height":"width"]=t+"px",domStyle.set(wrapper,props);var l=Math.round(d*d/c);l=Math.min(Math.max(l-8,5),t),bar.style[v?"height":"width"]=l+"px",domStyle.set(bar,{opacity:.6})},dim=this.getDim();f(this._scrollBarWrapperV,this._scrollBarV,dim.d.h,dim.c.h,this.fixedHeaderHeight,!0),f(this._scrollBarWrapperH,this._scrollBarH,dim.d.w,dim.c.w,0),this.createMask()},createMask:function(){if(!has("webkit")&&!has("svg"))return;if(this._scrollBarWrapperV){var h=this._scrollBarWrapperV.offsetHeight;maskUtils.createRoundMask(this._scrollBarWrapperV,0,0,0,0,5,h,2,2,.5)}if(this._scrollBarWrapperH){var w=this._scrollBarWrapperH.offsetWidth;maskUtils.createRoundMask(this._scrollBarWrapperH,0,0,0,0,w,5,2,2,.5)}},flashScrollBar:function(){if(this.disableFlashScrollBar||!this.domNode)return;this._dim=this.getDim();if(this._dim.d.h<=0)return;this.showScrollBar();var _this=this;setTimeout(function(){_this.hideScrollBar()},300)},addCover:function(){!has("touch")&&!this.noCover&&(dm._cover?dm._cover.style.display="":(dm._cover=domConstruct.create("div",null,win.doc.body),dm._cover.className="mblScrollableCover",domStyle.set(dm._cover,{backgroundColor:"#ffff00",opacity:0,position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",zIndex:2147483647}),this._ch.push(connect.connect(dm._cover,touch.press,this,"onTouchEnd"))),this.setSelectable(dm._cover,!1),this.setSelectable(this.domNode,!1))},removeCover:function(){!has("touch")&&dm._cover&&(dm._cover.style.display="none",this.setSelectable(dm._cover,!0),this.setSelectable(this.domNode,!0))},setKeyframes:function(from,to,idx){dm._rule||(dm._rule=[]);if(!dm._rule[idx]){var node=domConstruct.create("style",null,win.doc.getElementsByTagName("head")[0]);node.textContent=".mblScrollableScrollTo"+idx+"{"+css3.name("animation-name",!0)+": scrollableViewScroll"+idx+";}"+"@"+css3.name("keyframes",!0)+" scrollableViewScroll"+idx+"{}",dm._rule[idx]=node.sheet.cssRules[1]}var rule=dm._rule[idx];rule&&(from&&(rule.deleteRule(has("webkit")?"from":0),(rule.insertRule||rule.appendRule).call(rule,"from { "+css3.name("transform",!0)+": "+this.makeTranslateStr(from)+"; }")),to&&(to.x===undefined&&(to.x=from.x),to.y===undefined&&(to.y=from.y),rule.deleteRule(has("webkit")?"to":1),(rule.insertRule||rule.appendRule).call(rule,"to { "+css3.name("transform",!0)+": "+this.makeTranslateStr(to)+"; }")))},setSelectable:function(node,selectable){node.style.KhtmlUserSelect=selectable?"auto":"none",node.style.MozUserSelect=selectable?"":"none",node.onselectstart=selectable?null:function(){return!1};if(has("ie")){node.unselectable=selectable?"":"on";var nodes=node.getElementsByTagName("*");for(var i=0;i<nodes.length;i++)nodes[i].unselectable=selectable?"":"on"}}}),lang.setObject("dojox.mobile.scrollable",Scrollable),Scrollable})