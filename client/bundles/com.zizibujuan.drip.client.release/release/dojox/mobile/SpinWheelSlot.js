//>>built
define("dojox/mobile/SpinWheelSlot","dojo/_base/kernel,dojo/_base/array,dojo/_base/declare,dojo/_base/lang,dojo/_base/window,dojo/dom-class,dojo/dom-construct,dijit/_Contained,dijit/_WidgetBase,./scrollable,dojo/has,dojo/has!dojo-bidi?dojox/mobile/bidi/SpinWheelSlot".split(","),function(i,j,k,s,l,m,h,o,p,q,n,r){i=k(n("dojo-bidi")?"dojox.mobile.NonBidiSpinWheelSlot":"dojox.mobile.SpinWheelSlot",[p,o,q],{items:[],labels:[],labelFrom:0,labelTo:0,zeroPad:0,value:"",step:1,tabIndex:"0",_setTabIndexAttr:"",
baseClass:"mblSpinWheelSlot",maxSpeed:500,minItems:15,centerPos:0,scrollBar:!1,constraint:!1,propagatable:!1,androidWorkaroud:!1,buildRendering:function(){this.inherited(arguments);this.initLabels();var a,c;if(0<this.labels.length){this.items=[];for(a=0;a<this.labels.length;a++)this.items.push([a,this.labels[a]])}this.containerNode=h.create("div",{className:"mblSpinWheelSlotContainer"});this.containerNode.style.height=2*(l.global.innerHeight||l.doc.documentElement.clientHeight)+"px";this.panelNodes=
[];for(var b=0;3>b;b++){this.panelNodes[b]=h.create("div",{className:"mblSpinWheelSlotPanel"});var d=this.items.length,e=Math.ceil(this.minItems/d);for(c=0;c<e;c++)for(a=0;a<d;a++)h.create("div",{className:"mblSpinWheelSlotLabel",name:this.items[a][0],val:this.items[a][1],innerHTML:this._cv?this._cv(this.items[a][1]):this.items[a][1]},this.panelNodes[b]);this.containerNode.appendChild(this.panelNodes[b])}this.domNode.appendChild(this.containerNode);this.touchNode=h.create("div",{className:"mblSpinWheelSlotTouch"},
this.domNode);this.setSelectable(this.domNode,!1);if(""===this.value&&0<this.items.length)this.value=this.items[0][1];this._initialValue=this.value},startup:function(){if(!this._started)this.inherited(arguments),this.noResize=!0,this.init(),this.centerPos=this.getParent().centerPos,this._itemHeight=this.panelNodes[1].childNodes[0].offsetHeight,this.adjust(),this._keydownHandle=this.connect(this.domNode,"onkeydown","_onKeyDown")},initLabels:function(){if(this.labelFrom!==this.labelTo)for(var a=this.labels=
[],c=this.zeroPad&&Array(this.zeroPad).join("0"),b=this.labelFrom;b<=this.labelTo;b+=this.step)a.push(this.zeroPad?(c+b).slice(-this.zeroPad):b+"")},adjust:function(){for(var a=this.panelNodes[1].childNodes,c,b=0,d=a.length;b<d;b++){var e=a[b];if(e.offsetTop<=this.centerPos&&this.centerPos<e.offsetTop+e.offsetHeight){c=this.centerPos-(e.offsetTop+Math.round(e.offsetHeight/2));break}}a=this.panelNodes[0].offsetHeight;this.panelNodes[0].style.top=-a+c+"px";this.panelNodes[1].style.top=c+"px";this.panelNodes[2].style.top=
a+c+"px"},setInitialValue:function(){this.set("value",this._initialValue)},_onKeyDown:function(a){a&&"keydown"===a.type&&(40===a.keyCode?this.spin(-1):38===a.keyCode&&this.spin(1))},_getCenterPanel:function(){for(var a=this.getPos(),c=0,b=this.panelNodes.length;c<b;c++){var d=a.y+this.panelNodes[c].offsetTop;if(d<=this.centerPos&&this.centerPos<d+this.panelNodes[c].offsetHeight)return this.panelNodes[c]}return null},setColor:function(a,c){j.forEach(this.panelNodes,function(b){j.forEach(b.childNodes,
function(b){m.toggle(b,c||"mblSpinWheelSlotLabelBlue",b.innerHTML===a)},this)},this)},disableValues:function(a){j.forEach(this.panelNodes,function(c){for(var b=0;b<c.childNodes.length;b++)m.toggle(c.childNodes[b],"mblSpinWheelSlotLabelGray",b>=a)})},getCenterItem:function(){var a=this.getPos(),c=this._getCenterPanel();if(c)for(var a=a.y+c.offsetTop,c=c.childNodes,b=0,d=c.length;b<d;b++)if(a+c[b].offsetTop<=this.centerPos&&this.centerPos<a+c[b].offsetTop+c[b].offsetHeight)return c[b];return null},
_getKeyAttr:function(){var a=this.getCenterItem();return a&&a.getAttribute("name")},_getValueAttr:function(){var a=this.getCenterItem();return a&&a.getAttribute("val")},_setValueAttr:function(a){this._spinToValue(a,!0)},_spinToValue:function(a,c){var b,d,e=this.get("value");if(e){if(e!=a){this._pendingValue=void 0;c&&this._set("value",a);for(var g=this.items.length,f=0;f<g&&!(this.items[f][1]===""+e&&(b=f),this.items[f][1]===""+a&&(d=f),void 0!==b&&void 0!==d);f++);b=d-(b||0);this.spin(0<b?b<g-b?
-b:g-b:-b<g+b?-b:-(g+b))}}else this._pendingValue=a},spin:function(a){if(this._started){var c=this.getPos();c.y%this._itemHeight||(c.y+=a*this._itemHeight,this.slideTo(c,1))}},getSpeed:function(){var a=0,c=this._time.length,b=(new Date).getTime()-this.startTime-this._time[c-1];2<=c&&200>b&&(a=this.calcSpeed(this._posY[c-1]-this._posY[0<=c-6?c-6:0],this._time[c-1]-this._time[0<=c-6?c-6:0]));return{x:0,y:a}},calcSpeed:function(a,c){var b=this.inherited(arguments);if(!b)return 0;var d=Math.abs(b),e=
b;d>this.maxSpeed&&(e=this.maxSpeed*(b/d));return e},adjustDestination:function(a){var c=this._itemHeight,b=a.y+Math.round(c/2);a.y=b-(0<=b?b%c:b%c+c);return!0},resize:function(){this._pendingValue&&this.set("value",this._pendingValue)},slideTo:function(a,c,b){var d=this.getPos(),e=d.y+this.panelNodes[1].offsetTop,g=e+this.panelNodes[1].offsetHeight,f=this.domNode.parentNode.offsetHeight;if(d.y<a.y){if(g>f)d=this.panelNodes[2],d.style.top=this.panelNodes[0].offsetTop-this.panelNodes[0].offsetHeight+
"px",this.panelNodes[2]=this.panelNodes[1],this.panelNodes[1]=this.panelNodes[0],this.panelNodes[0]=d}else if(d.y>a.y&&0>e)d=this.panelNodes[0],d.style.top=this.panelNodes[2].offsetTop+this.panelNodes[2].offsetHeight+"px",this.panelNodes[0]=this.panelNodes[1],this.panelNodes[1]=this.panelNodes[2],this.panelNodes[2]=d;this._initialized?40>Math.abs(this._speed.y)&&(c=0.2):(c=0,this._initialized=!0);this.inherited(arguments,[a,c,b])}});return n("dojo-bidi")?k("dojox.mobile.SpinWheelSlot",[i,r]):i});