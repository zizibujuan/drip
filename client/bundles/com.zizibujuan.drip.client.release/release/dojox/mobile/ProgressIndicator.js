//>>built
define("dojox/mobile/ProgressIndicator",["dojo/_base/config","dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dijit/_Contained","dijit/_WidgetBase","./_css3"],function(config,declare,lang,domClass,domConstruct,domGeometry,domStyle,has,Contained,WidgetBase,css3){var cls=declare("dojox.mobile.ProgressIndicator",[WidgetBase,Contained],{interval:100,size:40,removeOnStop:!0,startSpinning:!1,center:!0,colors:null,baseClass:"mblProgressIndicator",constructor:function(){this.colors=[],this._bars=[]},buildRendering:function(){this.inherited(arguments),this.center&&domClass.add(this.domNode,"mblProgressIndicatorCenter"),this.containerNode=domConstruct.create("div",{className:"mblProgContainer"},this.domNode),this.spinnerNode=domConstruct.create("div",null,this.containerNode);for(var i=0;i<12;i++){var div=domConstruct.create("div",{className:"mblProg mblProg"+i},this.spinnerNode);this._bars.push(div)}this.scale(this.size),this.startSpinning&&this.start()},scale:function(size){var scale=size/40;domStyle.set(this.containerNode,css3.add({},{transform:"scale("+scale+")",transformOrigin:"0 0"})),domGeometry.setMarginBox(this.domNode,{w:size,h:size}),domGeometry.setMarginBox(this.containerNode,{w:size/scale,h:size/scale})},start:function(){if(this.imageNode){var img=this.imageNode,l=Math.round((this.containerNode.offsetWidth-img.offsetWidth)/2),t=Math.round((this.containerNode.offsetHeight-img.offsetHeight)/2);img.style.margin=t+"px "+l+"px";return}var cntr=0,_this=this,n=12;this.timer=setInterval(function(){cntr--,cntr=cntr<0?n-1:cntr;var c=_this.colors;for(var i=0;i<n;i++){var idx=(cntr+i)%n;c[idx]?_this._bars[i].style.backgroundColor=c[idx]:domClass.replace(_this._bars[i],"mblProg"+idx+"Color","mblProg"+(idx===n-1?0:idx+1)+"Color")}},this.interval)},stop:function(){this.timer&&clearInterval(this.timer),this.timer=null,this.removeOnStop&&this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode)},setImage:function(file){file?(this.imageNode=domConstruct.create("img",{src:file},this.containerNode),this.spinnerNode.style.display="none"):(this.imageNode&&(this.containerNode.removeChild(this.imageNode),this.imageNode=null),this.spinnerNode.style.display="")},destroy:function(){this.inherited(arguments),this===cls._instance&&(cls._instance=null)}});return cls._instance=null,cls.getInstance=function(props){return cls._instance||(cls._instance=new cls(props)),cls._instance},cls})