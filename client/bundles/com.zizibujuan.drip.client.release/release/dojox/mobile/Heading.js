//>>built
define("dojox/mobile/Heading",["dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/_base/window","dojo/dom","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dijit/registry","dijit/_Contained","dijit/_Container","dijit/_WidgetBase","./ProgressIndicator","./ToolBarButton","./View","dojo/has","dojo/has!dojo-bidi?dojox/mobile/bidi/Heading"],function(array,connect,declare,lang,win,dom,domClass,domConstruct,domStyle,registry,Contained,Container,WidgetBase,ProgressIndicator,ToolBarButton,View,has,BidiHeading){var dm=lang.getObject("dojox.mobile",!0),Heading=declare(has("dojo-bidi")?"dojox.mobile.NonBidiHeading":"dojox.mobile.Heading",[WidgetBase,Container,Contained],{back:"",href:"",moveTo:"",transition:"slide",label:"",iconBase:"",tag:"h1",busy:!1,progStyle:"mblProgWhite",baseClass:"mblHeading",buildRendering:function(){this.domNode=this.containerNode=this.srcNodeRef||win.doc.createElement(this.tag),this.inherited(arguments),this.label||array.forEach(this.domNode.childNodes,function(n){if(n.nodeType==3){var v=lang.trim(n.nodeValue);v&&(this.label=v,this.labelNode=domConstruct.create("span",{innerHTML:v},n,"replace"))}},this),this.labelNode||(this.labelNode=domConstruct.create("span",null,this.domNode)),this.labelNode.className="mblHeadingSpanTitle",this.labelDivNode=domConstruct.create("div",{className:"mblHeadingDivTitle",innerHTML:this.labelNode.innerHTML},this.domNode),dom.setSelectable(this.domNode,!1)},startup:function(){if(this._started)return;var parent=this.getParent&&this.getParent();if(!parent||!parent.resize){var _this=this;setTimeout(function(){_this.resize()},0)}this.inherited(arguments)},resize:function(){if(this.labelNode){var leftBtn,rightBtn,children=this.containerNode.childNodes;for(var i=children.length-1;i>=0;i--){var c=children[i];c.nodeType===1&&domStyle.get(c,"display")!=="none"&&(!rightBtn&&domStyle.get(c,"float")==="right"&&(rightBtn=c),!leftBtn&&domStyle.get(c,"float")==="left"&&(leftBtn=c))}!this.labelNodeLen&&this.label&&(this.labelNode.style.display="inline",this.labelNodeLen=this.labelNode.offsetWidth,this.labelNode.style.display="");var bw=this.domNode.offsetWidth,rw=rightBtn?bw-rightBtn.offsetLeft+5:0,lw=leftBtn?leftBtn.offsetLeft+leftBtn.offsetWidth+5:0,tw=this.labelNodeLen||0;domClass[bw-Math.max(rw,lw)*2>tw?"add":"remove"](this.domNode,"mblHeadingCenterTitle")}array.forEach(this.getChildren(),function(child){child.resize&&child.resize()})},_setBackAttr:function(back){this._set("back",back),this.backButton?this.backButton.set("label",back):(this.backButton=new ToolBarButton({arrow:"left",label:back,moveTo:this.moveTo,back:!this.moveTo,href:this.href,transition:this.transition,transitionDir:-1}),this.backButton.placeAt(this.domNode,"first")),this.resize()},_setMoveToAttr:function(moveTo){this._set("moveTo",moveTo),this.backButton&&this.backButton.set("moveTo",moveTo)},_setLabelAttr:function(label){this._set("label",label),this.labelNode.innerHTML=this.labelDivNode.innerHTML=this._cv?this._cv(label):label},_setBusyAttr:function(busy){var prog=this._prog;busy?(prog||(prog=this._prog=new ProgressIndicator({size:30,center:!1}),domClass.add(prog.domNode,this.progStyle)),domConstruct.place(prog.domNode,this.domNode,"first"),prog.start()):prog&&prog.stop(),this._set("busy",busy)}});return has("dojo-bidi")?declare("dojox.mobile.Heading",[Heading,BidiHeading]):Heading})