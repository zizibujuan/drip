//>>built
define("dojox/embed/Flash",["dojo"],function(dojo){function prep(kwArgs){return kwArgs=dojo.delegate(_baseKwArgs,kwArgs),"path"in kwArgs?("id"in kwArgs||(kwArgs.id=keyBase+keyCount++),kwArgs):(0,null)}var fMarkup,fVersion,minimumVersion=9,keyBase="dojox-embed-flash-",keyCount=0,_baseKwArgs={expressInstall:!1,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};dojo.isIE?(fMarkup=function(kwArgs){kwArgs=prep(kwArgs);if(!kwArgs)return null;var p,path=kwArgs.path;if(kwArgs.vars){var a=[];for(p in kwArgs.vars)a.push(p+"="+kwArgs.vars[p]);kwArgs.params.FlashVars=a.join("&"),delete kwArgs.vars}var s='<object id="'+kwArgs.id+'" '+'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" '+'width="'+kwArgs.width+'" '+'height="'+kwArgs.height+'"'+(kwArgs.style?' style="'+kwArgs.style+'"':"")+">"+'<param name="movie" value="'+path+'" />';if(kwArgs.params)for(p in kwArgs.params)s+='<param name="'+p+'" value="'+kwArgs.params[p]+'" />';return s+="</object>",{id:kwArgs.id,markup:s}},fVersion=function(){var testVersion=10,testObj=null;while(!testObj&&testVersion>7)try{testObj=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+testVersion--)}catch(e){}if(testObj){var v=testObj.GetVariable("$version").split(" ")[1].split(",");return{major:v[0]!=null?parseInt(v[0]):0,minor:v[1]!=null?parseInt(v[1]):0,rev:v[2]!=null?parseInt(v[2]):0}}return{major:0,minor:0,rev:0}}(),dojo.addOnWindowUnload(function(){0;var dummy=function(){},objs=dojo.query("object").reverse().style("display","none").forEach(function(i){for(var p in i)if(p!="FlashVars"&&dojo.isFunction(i[p]))try{i[p]=dummy}catch(e){}})})):(fMarkup=function(kwArgs){kwArgs=prep(kwArgs);if(!kwArgs)return null;var p,path=kwArgs.path;if(kwArgs.vars){var a=[];for(p in kwArgs.vars)a.push(p+"="+kwArgs.vars[p]);kwArgs.params.flashVars=a.join("&"),delete kwArgs.vars}var s='<embed type="application/x-shockwave-flash" src="'+path+'" '+'id="'+kwArgs.id+'" '+'width="'+kwArgs.width+'" '+'height="'+kwArgs.height+'"'+(kwArgs.style?' style="'+kwArgs.style+'" ':"")+'pluginspage="'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';if(kwArgs.params)for(p in kwArgs.params)s+=" "+p+'="'+kwArgs.params[p]+'"';return s+=" />",{id:kwArgs.id,markup:s}},fVersion=function(){var plugin=navigator.plugins["Shockwave Flash"];if(plugin&&plugin.description){var v=plugin.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".");return{major:v[0]!=null?parseInt(v[0]):0,minor:v[1]!=null?parseInt(v[1]):0,rev:v[2]!=null?parseInt(v[2]):0}}return{major:0,minor:0,rev:0}}());var Flash=function(kwArgs,node){if(location.href.toLowerCase().indexOf("file://")>-1)throw new Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");this.available=dojox.embed.Flash.available,this.minimumVersion=kwArgs.minimumVersion||minimumVersion,this.id=null,this.movie=null,this.domNode=null,node&&(node=dojo.byId(node)),setTimeout(dojo.hitch(this,function(){kwArgs.expressInstall||this.available&&this.available>=this.minimumVersion?kwArgs&&node?this.init(kwArgs,node):this.onError("embed.Flash was not provided with the proper arguments."):this.available?this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion):this.onError("Flash is not installed.")}),100)};return dojo.extend(Flash,{onReady:function(movie){},onLoad:function(movie){},onError:function(msg){},_onload:function(){clearInterval(this._poller),delete this._poller,delete this._pollCount,delete this._pollMax,this.onLoad(this.movie)},init:function(kwArgs,node){this.destroy(),node=dojo.byId(node||this.domNode);if(!node)throw new Error("dojox.embed.Flash: no domNode reference has been passed.");var p=0,testLoaded=!1;this._poller=null,this._pollCount=0,this._pollMax=15,this.pollTime=100,dojox.embed.Flash.initialized&&(this.id=dojox.embed.Flash.place(kwArgs,node),this.domNode=node,setTimeout(dojo.hitch(this,function(){this.movie=this.byId(this.id,kwArgs.doc),this.onReady(this.movie),this._poller=setInterval(dojo.hitch(this,function(){try{p=this.movie.PercentLoaded()}catch(e){0}if(p==100)this._onload();else if(p==0&&this._pollCount++>this._pollMax)throw clearInterval(this._poller),new Error("Building SWF failed.")}),this.pollTime)}),1))},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(e){}this.id=this.movie=this.domNode=null},destroy:function(){if(!this.movie)return;var test=dojo.delegate({id:!0,movie:!0,domNode:!0,onReady:!0,onLoad:!0});for(var p in this)test[p]||delete this[p];this._poller?dojo.connect(this,"onLoad",this,"_destroy"):this._destroy()},byId:function(movieName,doc){return doc=doc||document,doc.embeds[movieName]?doc.embeds[movieName]:doc[movieName]?doc[movieName]:window[movieName]?window[movieName]:document[movieName]?document[movieName]:null}}),dojo.mixin(Flash,{minSupported:8,available:fVersion.major,supported:fVersion.major>=fVersion.required,minimumRequired:fVersion.required,version:fVersion,initialized:!1,onInitialize:function(){Flash.initialized=!0},__ie_markup__:function(kwArgs){return fMarkup(kwArgs)},proxy:function(obj,methods){dojo.forEach(dojo.isArray(methods)?methods:[methods],function(item){this[item]=dojo.hitch(this,function(){return function(){return eval(this.movie.CallFunction('<invoke name="'+item+'" returntype="javascript">'+"<arguments>"+dojo.map(arguments,function(item){return __flash__toXML(item)}).join("")+"</arguments>"+"</invoke>"))}.apply(this,arguments||[])})},obj)}}),Flash.place=function(kwArgs,node){var o=fMarkup(kwArgs);return node=dojo.byId(node),node||(node=dojo.doc.createElement("div"),node.id=o.id+"-container",dojo.body().appendChild(node)),o?(node.innerHTML=o.markup,o.id):null},Flash.onInitialize(),dojo.setObject("dojox.embed.Flash",Flash),Flash})