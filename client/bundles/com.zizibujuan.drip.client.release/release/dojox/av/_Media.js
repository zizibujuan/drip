//>>built
define("dojox/av/_Media",["dojo"],function(dojo){return dojo.experimental("dojox.av.FLVideo"),dojo.declare("dojox.av._Media",null,{mediaUrl:"",initialVolume:1,autoPlay:!1,bufferTime:2e3,minBufferTime:300,updateTime:100,id:"",isDebug:!1,percentDownloaded:0,_flashObject:null,flashMedia:null,allowScriptAccess:"always",allowNetworking:"all",wmode:"transparent",allowFullScreen:!0,_initStatus:function(){this.status="ready",this._positionHandle=dojo.connect(this,"onPosition",this,"_figureStatus")},getTime:function(){return this.flashMedia.getTime()},onLoad:function(mov){},onDownloaded:function(percent){},onClick:function(evt){},onSwfSized:function(data){},onMetaData:function(data,evt){0,this.duration=data.duration},onPosition:function(time){},onStart:function(data){},onPlay:function(data){},onPause:function(data){},onEnd:function(data){},onStop:function(){},onBuffer:function(isBuffering){this.isBuffering=isBuffering},onError:function(data,url){0},onStatus:function(data){},onPlayerStatus:function(data){},onResize:function(){},_figureStatus:function(){var pos=this.getTime();this.status=="stopping"?(this.status="stopped",this.onStop(this._eventFactory())):this.status=="ending"&&pos==this._prevPos?(this.status="ended",this.onEnd(this._eventFactory())):this.duration&&pos>this.duration-.5?this.status="ending":pos===0?this.status!="ready"&&(this.status="stopped",this._prevStatus!="stopped"&&this.onStop(this._eventFactory())):this.status=="ready"?(this.status="started",this.onStart(this._eventFactory()),this.onPlay(this._eventFactory())):this.isBuffering?this.status="buffering":this.status=="started"||this.status=="playing"&&pos!=this._prevPos?this.status="playing":!this.isStopped&&this.status=="playing"&&pos==this._prevPos?(this.status="paused",0,this.status!=this._prevStatus&&this.onPause(this._eventFactory())):(this.status=="paused"||this.status=="stopped")&&pos!=this._prevPos&&(this.status="started",this.onPlay(this._eventFactory())),this._prevPos=pos,this._prevStatus=this.status,this.onStatus(this.status)},_eventFactory:function(){var evt={status:this.status};return evt},_sub:function(topic,method){dojo.subscribe(this.id+"/"+topic,this,method)},_normalizeVolume:function(vol){if(vol>1)while(vol>1)vol*=.1;return vol},_normalizeUrl:function(_url){0;if(_url&&(_url.toLowerCase().indexOf("http")<0||_url.indexOf("/")==0)){var loc=window.location.href.split("/");loc.pop(),loc=loc.join("/")+"/",0,_url=loc+_url}return _url},destroy:function(){if(!this.flashMedia){this._cons.push(dojo.connect(this,"onLoad",this,"destroy"));return}dojo.forEach(this._subs,function(s){dojo.unsubscribe(s)}),dojo.forEach(this._cons,function(c){dojo.disconnect(c)}),this._flashObject.destroy()}})})