//>>built
require({cache:{"url:dojox/image/resources/Lightbox.html":'<div class="dojoxLightbox" dojoAttachPoint="containerNode">\n	<div style="position:relative">\n		<div dojoAttachPoint="imageContainer" class="dojoxLightboxContainer" dojoAttachEvent="onclick: _onImageClick">\n			<img dojoAttachPoint="imgNode" src="${imgUrl}" class="${imageClass}" alt="${title}">\n			<div class="dojoxLightboxFooter" dojoAttachPoint="titleNode">\n				<div class="dijitInline LightboxClose" dojoAttachPoint="closeButtonNode"></div>\n				<div class="dijitInline LightboxNext" dojoAttachPoint="nextButtonNode"></div>	\n				<div class="dijitInline LightboxPrev" dojoAttachPoint="prevButtonNode"></div>\n				<div class="dojoxLightboxText" dojoAttachPoint="titleTextNode"><span dojoAttachPoint="textNode">${title}</span><span dojoAttachPoint="groupCount" class="dojoxLightboxGroupText"></span></div>\n			</div>\n		</div>\n	</div>\n</div>'}}),define("dojox/image/Lightbox",["dojo","dijit","dojox","dojo/text!./resources/Lightbox.html","dijit/Dialog","dojox/fx/_base"],function(dojo,dijit,dojox,template){return dojo.experimental("dojox.image.Lightbox"),dojo.getObject("image",!0,dojox),dojo.declare("dojox.image.Lightbox",dijit._Widget,{group:"",title:"",href:"",duration:500,modal:!1,_allowPassthru:!1,_attachedDialog:null,startup:function(){this.inherited(arguments);var tmp=dijit.byId("dojoxLightboxDialog");tmp?this._attachedDialog=tmp:(this._attachedDialog=new dojox.image.LightboxDialog({id:"dojoxLightboxDialog"}),this._attachedDialog.startup()),this.store||(this._addSelf(),this.connect(this.domNode,"onclick","_handleClick"))},_addSelf:function(){this._attachedDialog.addImage({href:this.href,title:this.title},this.group||null)},_handleClick:function(e){if(!!this._allowPassthru)return;e.preventDefault(),this.show()},show:function(){this._attachedDialog.show(this)},hide:function(){this._attachedDialog.hide()},disable:function(){this._allowPassthru=!0},enable:function(){this._allowPassthru=!1},onClick:function(){},destroy:function(){this._attachedDialog.removeImage(this),this.inherited(arguments)}}),dojo.declare("dojox.image.LightboxDialog",dijit.Dialog,{title:"",inGroup:null,imgUrl:dijit._Widget.prototype._blankGif,errorMessage:"Image not found.",adjust:!0,modal:!1,imageClass:"dojoxLightboxImage",errorImg:dojo.moduleUrl("dojox.image","resources/images/warning.png"),templateString:template,constructor:function(args){this._groups=this._groups||args&&args._groups||{XnoGroupX:[]}},startup:function(){return this.inherited(arguments),this._animConnects=[],this.connect(this.nextButtonNode,"onclick","_nextImage"),this.connect(this.prevButtonNode,"onclick","_prevImage"),this.connect(this.closeButtonNode,"onclick","hide"),this._makeAnims(),this._vp=dojo.window.getBox(),this},show:function(groupData){var _t=this;this._lastGroup=groupData,_t.open||(_t.inherited(arguments),_t._modalconnects.push(dojo.connect(dojo.global,"onscroll",this,"_position"),dojo.connect(dojo.global,"onresize",this,"_position"),dojo.connect(dojo.body(),"onkeypress",this,"_handleKey")),groupData.modal||_t._modalconnects.push(dojo.connect(dijit._underlay.domNode,"onclick",this,"onCancel")));if(this._wasStyled){var tmpImg=dojo.create("img",{className:_t.imageClass},_t.imgNode,"after");dojo.destroy(_t.imgNode),_t.imgNode=tmpImg,_t._makeAnims(),_t._wasStyled=!1}dojo.style(_t.imgNode,"opacity","0"),dojo.style(_t.titleNode,"opacity","0");var src=groupData.href;if(groupData.group&&groupData!=="XnoGroupX"||_t.inGroup){_t.inGroup||(_t.inGroup=_t._groups[groupData.group],dojo.forEach(_t.inGroup,function(g,i){g.href==groupData.href&&(_t._index=i)}));if(!_t._index){_t._index=0;var sr=_t.inGroup[_t._index];src=sr&&sr.href||_t.errorImg}_t.groupCount.innerHTML=" ("+(_t._index+1)+" of "+Math.max(1,_t.inGroup.length)+")",_t.prevButtonNode.style.visibility="visible",_t.nextButtonNode.style.visibility="visible"}else _t.groupCount.innerHTML="",_t.prevButtonNode.style.visibility="hidden",_t.nextButtonNode.style.visibility="hidden";groupData.leaveTitle||(_t.textNode.innerHTML=groupData.title),_t._ready(src)},_ready:function(src){var _t=this;_t._imgError=dojo.connect(_t.imgNode,"error",_t,function(){dojo.disconnect(_t._imgError),_t.imgNode.src=_t.errorImg,_t.textNode.innerHTML=_t.errorMessage}),_t._imgConnect=dojo.connect(_t.imgNode,"load",_t,function(e){_t.resizeTo({w:_t.imgNode.width,h:_t.imgNode.height,duration:_t.duration}),dojo.disconnect(_t._imgConnect),_t._imgError&&dojo.disconnect(_t._imgError)}),_t.imgNode.src=src},_nextImage:function(){if(!this.inGroup)return;this._index+1<this.inGroup.length?this._index++:this._index=0,this._loadImage()},_prevImage:function(){this.inGroup&&(this._index==0?this._index=this.inGroup.length-1:this._index--,this._loadImage())},_loadImage:function(){this._loadingAnim.play(1)},_prepNodes:function(){this._imageReady=!1,this.inGroup&&this.inGroup[this._index]?this.show({href:this.inGroup[this._index].href,title:this.inGroup[this._index].title}):this.show({title:this.errorMessage,href:this.errorImg})},_calcTitleSize:function(){var sizes=dojo.map(dojo.query("> *",this.titleNode).position(),function(s){return s.h});return{h:Math.max.apply(Math,sizes)}},resizeTo:function(size,forceTitle){var adjustSize=dojo.boxModel=="border-box"?dojo._getBorderExtents(this.domNode).w:0,titleSize=forceTitle||this._calcTitleSize();this._lastTitleSize=titleSize,this.adjust&&(size.h+titleSize.h+adjustSize+80>this._vp.h||size.w+adjustSize+60>this._vp.w)&&(this._lastSize=size,size=this._scaleToFit(size)),this._currentSize=size;var _sizeAnim=dojox.fx.sizeTo({node:this.containerNode,duration:size.duration||this.duration,width:size.w+adjustSize,height:size.h+titleSize.h+adjustSize});this.connect(_sizeAnim,"onEnd","_showImage"),_sizeAnim.play(15)},_scaleToFit:function(size){var ns={},nvp={w:this._vp.w-80,h:this._vp.h-60-this._lastTitleSize.h},viewportAspect=nvp.w/nvp.h,imageAspect=size.w/size.h;return imageAspect>=viewportAspect?(ns.h=nvp.w/imageAspect,ns.w=nvp.w):(ns.w=imageAspect*nvp.h,ns.h=nvp.h),this._wasStyled=!0,this._setImageSize(ns),ns.duration=size.duration,ns},_setImageSize:function(size){var s=this.imgNode;s.height=size.h,s.width=size.w},_size:function(){},_position:function(e){this._vp=dojo.window.getBox(),this.inherited(arguments),e&&e.type=="resize"&&(this._wasStyled?(this._setImageSize(this._lastSize),this.resizeTo(this._lastSize)):(this.imgNode.height+80>this._vp.h||this.imgNode.width+60>this._vp.h)&&this.resizeTo({w:this.imgNode.width,h:this.imgNode.height}))},_showImage:function(){this._showImageAnim.play(1)},_showNav:function(){var titleSizeNow=dojo.marginBox(this.titleNode);titleSizeNow.h>this._lastTitleSize.h?this.resizeTo(this._wasStyled?this._lastSize:this._currentSize,titleSizeNow):this._showNavAnim.play(1)},hide:function(){dojo.fadeOut({node:this.titleNode,duration:200,onEnd:dojo.hitch(this,function(){this.imgNode.src=this._blankGif})}).play(5),this.inherited(arguments),this.inGroup=null,this._index=null},addImage:function(child,group){var g=group;if(!child.href)return;g?(this._groups[g]||(this._groups[g]=[]),this._groups[g].push(child)):this._groups.XnoGroupX.push(child)},removeImage:function(child){var g=child.group||"XnoGroupX";dojo.every(this._groups[g],function(item,i,ar){return item.href==child.href?(ar.splice(i,1),!1):!0})},removeGroup:function(group){this._groups[group]&&(this._groups[group]=[])},_handleKey:function(e){if(!this.open)return;var dk=dojo.keys;switch(e.charOrCode){case dk.ESCAPE:this.hide();break;case dk.DOWN_ARROW:case dk.RIGHT_ARROW:case 78:this._nextImage();break;case dk.UP_ARROW:case dk.LEFT_ARROW:case 80:this._prevImage()}},_makeAnims:function(){dojo.forEach(this._animConnects,dojo.disconnect),this._animConnects=[],this._showImageAnim=dojo.fadeIn({node:this.imgNode,duration:this.duration}),this._animConnects.push(dojo.connect(this._showImageAnim,"onEnd",this,"_showNav")),this._loadingAnim=dojo.fx.combine([dojo.fadeOut({node:this.imgNode,duration:175}),dojo.fadeOut({node:this.titleNode,duration:175})]),this._animConnects.push(dojo.connect(this._loadingAnim,"onEnd",this,"_prepNodes")),this._showNavAnim=dojo.fadeIn({node:this.titleNode,duration:225})},onClick:function(groupData){},_onImageClick:function(e){e&&e.target==this.imgNode&&(this.onClick(this._lastGroup),this._lastGroup.declaredClass&&this._lastGroup.onClick(this._lastGroup))}}),dojox.image.Lightbox})