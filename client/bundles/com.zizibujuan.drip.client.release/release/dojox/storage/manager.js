//>>built
define("dojox/storage/manager",["dojo","dijit","dojox"],function(dojo,dijit,dojox){dojo.provide("dojox.storage.manager"),dojox.storage.manager=new function(){this.currentProvider=null,this.available=!1,this.providers=[],this._initialized=!1,this._onLoadListeners=[],this.initialize=function(){this.autodetect()},this.register=function(name,instance){this.providers.push(instance),this.providers[name]=instance},this.setProvider=function(storageClass){},this.autodetect=function(){if(this._initialized)return;var forceProvider=dojo.config.forceStorageProvider||!1,providerToUse;for(var i=0;i<this.providers.length;i++){providerToUse=this.providers[i];if(forceProvider&&forceProvider==providerToUse.declaredClass){providerToUse.isAvailable();break}if(!forceProvider&&providerToUse.isAvailable())break}if(!providerToUse){this._initialized=!0,this.available=!1,this.currentProvider=null,0,this.loaded();return}this.currentProvider=providerToUse,dojo.mixin(dojox.storage,this.currentProvider),dojox.storage.initialize(),this._initialized=!0,this.available=!0},this.isAvailable=function(){return this.available},this.addOnLoad=function(func){this._onLoadListeners.push(func),this.isInitialized()&&this._fireLoaded()},this.removeOnLoad=function(func){for(var i=0;i<this._onLoadListeners.length;i++)if(func==this._onLoadListeners[i]){this._onLoadListeners.splice(i,1);break}},this.isInitialized=function(){return this.currentProvider!=null&&this.currentProvider.declaredClass=="dojox.storage.FlashStorageProvider"&&dojox.flash.ready==0?!1:this._initialized},this.supportsProvider=function(storageClass){try{var provider=eval("new "+storageClass+"()"),results=provider.isAvailable();return results?results:!1}catch(e){return!1}},this.getProvider=function(){return this.currentProvider},this.loaded=function(){this._fireLoaded()},this._fireLoaded=function(){dojo.forEach(this._onLoadListeners,function(i){try{i()}catch(e){0}})},this.getResourceList=function(){var results=[];return dojo.forEach(dojox.storage.manager.providers,function(currentProvider){results=results.concat(currentProvider.getResourceList())}),results}}})