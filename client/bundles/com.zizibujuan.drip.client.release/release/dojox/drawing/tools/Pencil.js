//>>built
define("dojox/drawing/tools/Pencil",["dojo/_base/lang","../util/oo","../manager/_registry","../stencil/Path"],function(lang,oo,registry,StencilPath){var Pencil=oo.declare(StencilPath,function(){this._started=!1},{draws:!0,minDist:15,onDown:function(obj){this._started=!0;var p={x:obj.x,y:obj.y};this.points=[p],this.lastPoint=p,this.revertRenderHit=this.renderHit,this.renderHit=!1,this.closePath=!1},onDrag:function(obj){if(!this._started||this.minDist>this.util.distance(obj.x,obj.y,this.lastPoint.x,this.lastPoint.y))return;var p={x:obj.x,y:obj.y};this.points.push(p),this.render(),this.checkClosePoint(this.points[0],obj),this.lastPoint=p},onUp:function(obj){if(!this._started)return;if(!this.points||this.points.length<2){this._started=!1,this.points=[];return}var box=this.getBounds();if(box.w<this.minimumSize&&box.h<this.minimumSize){this.remove(this.hit,this.shape,this.closeGuide),this._started=!1,this.setPoints([]);return}this.checkClosePoint(this.points[0],obj,!0)&&(this.closePath=!0),this.renderHit=this.revertRenderHit,this.renderedOnce=!0,this.render(),this.onRender(this)}});return lang.setObject("dojox.drawing.tools.Pencil",Pencil),Pencil.setup={name:"dojox.drawing.tools.Pencil",tooltip:"Pencil Tool",iconClass:"iconLine"},registry.register(Pencil.setup,"tool"),Pencil})