//>>built
define("dojox/drawing/tools/Ellipse",["dojo/_base/lang","../util/oo","../manager/_registry","../stencil/Ellipse"],function(lang,oo,registry,StencilEllipse){var Ellipse=oo.declare(StencilEllipse,function(){},{draws:!0,onDrag:function(obj){var s=obj.start,e=obj,x=s.x<e.x?s.x:e.x,y=s.y<e.y?s.y:e.y,w=s.x<e.x?e.x-s.x:s.x-e.x,h=s.y<e.y?e.y-s.y:s.y-e.y;this.keys.shift&&(w=h=Math.max(w,h)),this.keys.alt?(y-h<0&&(h=y),x-w<0&&(w=x)):(x+=w/2,y+=h/2,w/=2,h/=2),this.points=[{x:x-w,y:y-h},{x:x+w,y:y-h},{x:x+w,y:y+h},{x:x-w,y:y+h}],this.render()},onUp:function(obj){if(this.created||!this._downOnCanvas)return;this._downOnCanvas=!1;if(!this.shape){var s=obj.start,e=this.minimumSize*2;this.data={cx:s.x+e,cy:s.y+e,rx:e,ry:e},this.dataToPoints(),this.render()}else{var o=this.pointsToData();0;if(o.rx*2<this.minimumSize&&o.ry*2<this.minimumSize){this.remove(this.shape,this.hit);return}}this.onRender(this)}});return lang.setObject("dojox.drawing.tools.Ellipse",Ellipse),Ellipse.setup={name:"dojox.drawing.tools.Ellipse",tooltip:"Ellipse Tool",iconClass:"iconEllipse"},registry.register(Ellipse.setup,"tool"),Ellipse})