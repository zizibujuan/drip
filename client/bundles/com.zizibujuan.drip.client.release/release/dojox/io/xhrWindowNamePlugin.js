//>>built
define("dojox/io/xhrWindowNamePlugin",["dojo/_base/kernel","dojo/_base/json","dojo/_base/xhr","dojox/io/xhrPlugins","dojox/io/windowName","dojox/io/httpParse","dojox/secure/capability"],function(dojo,json,xhr,xhrPlugins,windowName,httpParse,capability){return dojo.getObject("io.xhrWindowNamePlugin",!0,dojox),dojox.io.xhrWindowNamePlugin=function(url,httpAdapter,trusted){xhrPlugins.register("windowName",function(method,args){return args.sync!==!0&&(method=="GET"||method=="POST"||httpAdapter)&&args.url.substring(0,url.length)==url},function(method,args,hasBody){var send=windowName.send,load=args.load;args.load=undefined;var dfd=(httpAdapter?httpAdapter(send,!0):send)(method,args,hasBody);return dfd.addCallback(function(result){var ioArgs=dfd.ioArgs;return ioArgs.xhr={getResponseHeader:function(name){return dojo.queryToObject(ioArgs.hash.match(/[^#]*$/)[0])[name]}},ioArgs.handleAs=="json"?(trusted||capability.validate(result,["Date"],{}),dojo.fromJson(result)):dojo._contentHandlers[ioArgs.handleAs||"text"]({responseText:result})}),args.load=load,load&&dfd.addCallback(load),dfd})},dojox.io.xhrWindowNamePlugin})