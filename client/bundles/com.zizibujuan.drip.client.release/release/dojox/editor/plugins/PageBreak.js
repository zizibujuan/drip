//>>built
define("dojox/editor/plugins/PageBreak",["dojo","dijit","dojox","dijit/_editor/_Plugin","dijit/form/Button","dojo/_base/connect","dojo/_base/declare","dojo/i18n","dojo/i18n!dojox/editor/plugins/nls/PageBreak"],function(dojo,dijit,dojox,_Plugin){return dojo.declare("dojox.editor.plugins.PageBreak",_Plugin,{useDefaultCommand:!1,iconClassPrefix:"dijitAdditionalEditorIcon",_unbreakableNodes:["li","ul","ol"],_pbContent:"<hr style='page-break-after: always;' class='dijitEditorPageBreak'>",_initButton:function(){var ed=this.editor,strings=dojo.i18n.getLocalization("dojox.editor.plugins","PageBreak");this.button=new dijit.form.Button({label:strings.pageBreak,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"PageBreak",tabIndex:"-1",onClick:dojo.hitch(this,"_insertPageBreak")}),ed.onLoadDeferred.addCallback(dojo.hitch(this,function(){ed.addKeyHandler(dojo.keys.ENTER,!0,!0,dojo.hitch(this,this._insertPageBreak)),(dojo.isWebKit||dojo.isOpera)&&this.connect(this.editor,"onKeyDown",dojo.hitch(this,function(e){e.keyCode===dojo.keys.ENTER&&e.ctrlKey&&e.shiftKey&&this._insertPageBreak()}))}))},updateState:function(){this.button.set("disabled",this.get("disabled"))},setEditor:function(editor){this.editor=editor,this._initButton()},_style:function(){if(!this._styled){this._styled=!0;var doc=this.editor.document,style=".dijitEditorPageBreak {\n	border-top-style: solid;\n	border-top-width: 3px;\n	border-top-color: #585858;\n	border-bottom-style: solid;\n	border-bottom-width: 1px;\n	border-bottom-color: #585858;\n	border-left-style: solid;\n	border-left-width: 1px;\n	border-left-color: #585858;\n	border-right-style: solid;\n	border-right-width: 1px;\n	border-right-color: #585858;\n	color: #A4A4A4;\n	background-color: #A4A4A4;\n	height: 10px;\n	page-break-after: always;\n	padding: 0px 0px 0px 0px;\n}\n\n@media print {\n	.dijitEditorPageBreak { page-break-after: always; background-color: rgba(0,0,0,0); color: rgba(0,0,0,0); border: 0px none rgba(0,0,0,0); display: hidden; width: 0px; height: 0px;}\n}";if(!dojo.isIE){var sNode=doc.createElement("style");sNode.appendChild(doc.createTextNode(style)),doc.getElementsByTagName("head")[0].appendChild(sNode)}else{var ss=doc.createStyleSheet("");ss.cssText=style}}},_insertPageBreak:function(){try{this._styled||this._style(),this._allowBreak()&&this.editor.execCommand("inserthtml",this._pbContent)}catch(e){0}},_allowBreak:function(){var ed=this.editor,doc=ed.document,node=ed._sCall("getSelectedElement",[])||ed._sCall("getParentElement",[]);while(node&&node!==doc.body&&node!==doc.html){if(ed._sCall("isTag",[node,this._unbreakableNodes]))return!1;node=node.parentNode}return!0}}),dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(o){if(o.plugin)return;var name=o.args.name.toLowerCase();name==="pagebreak"&&(o.plugin=new dojox.editor.plugins.PageBreak({}))}),dojox.editor.plugins.PageBreak})