//>>built
define("dojox/editor/plugins/Preview",["dojo","dijit","dojox","dijit/_editor/_Plugin","dijit/form/Button","dojo/_base/connect","dojo/_base/declare","dojo/i18n","dojo/i18n!dojox/editor/plugins/nls/Preview"],function(dojo,dijit,dojox,_Plugin){return dojo.declare("dojox.editor.plugins.Preview",_Plugin,{useDefaultCommand:!1,styles:"",stylesheets:null,iconClassPrefix:"dijitAdditionalEditorIcon",_initButton:function(){this._nlsResources=dojo.i18n.getLocalization("dojox.editor.plugins","Preview"),this.button=new dijit.form.Button({label:this._nlsResources.preview,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Preview",tabIndex:"-1",onClick:dojo.hitch(this,"_preview")})},setEditor:function(editor){this.editor=editor,this._initButton()},updateState:function(){this.button.set("disabled",this.get("disabled"))},_preview:function(){try{var content=this.editor.get("value"),head="		<meta http-equiv='Content-Type' content='text/html; charset=UTF-8'>\n",i;if(this.stylesheets)for(i=0;i<this.stylesheets.length;i++)head+="		<link rel='stylesheet' type='text/css' href='"+this.stylesheets[i]+"'>\n";this.styles&&(head+="		<style>"+this.styles+"</style>\n"),content="<html>\n	<head>\n"+head+"	</head>\n	<body>\n"+content+"\n	</body>\n</html>";var win=window.open("javascript: ''",this._nlsResources.preview,"status=1,menubar=0,location=0,toolbar=0");win.document.open(),win.document.write(content),win.document.close()}catch(e){0}}}),dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(o){if(o.plugin)return;var name=o.args.name.toLowerCase();name==="preview"&&(o.plugin=new dojox.editor.plugins.Preview({styles:"styles"in o.args?o.args.styles:"",stylesheets:"stylesheets"in o.args?o.args.stylesheets:null}))}),dojox.editor.plugins.Preview})