//>>built
define("dojox/editor/plugins/EntityPalette",["dojo","dijit","dojox","dijit/_Widget","dijit/_TemplatedMixin","dijit/_PaletteMixin","dojo/_base/connect","dojo/_base/declare","dojo/i18n","dojo/i18n!dojox/editor/plugins/nls/latinEntities"],function(dojo,dijit,dojox,_Widget,_TemplatedMixin,_PaletteMixin){return dojo.experimental("dojox.editor.plugins.EntityPalette"),dojo.declare("dojox.editor.plugins.EntityPalette",[_Widget,_TemplatedMixin,_PaletteMixin],{templateString:'<div class="dojoxEntityPalette">\n	<table>\n		<tbody>\n			<tr>\n				<td>\n					<table class="dijitPaletteTable">\n						<tbody dojoAttachPoint="gridNode"></tbody>\n				   </table>\n				</td>\n			</tr>\n			<tr>\n				<td>\n					<table dojoAttachPoint="previewPane" class="dojoxEntityPalettePreviewTable">\n						<tbody>\n							<tr>\n								<th class="dojoxEntityPalettePreviewHeader">Preview</th>\n								<th class="dojoxEntityPalettePreviewHeader" dojoAttachPoint="codeHeader">Code</th>\n								<th class="dojoxEntityPalettePreviewHeader" dojoAttachPoint="entityHeader">Name</th>\n								<th class="dojoxEntityPalettePreviewHeader">Description</th>\n							</tr>\n							<tr>\n								<td class="dojoxEntityPalettePreviewDetailEntity" dojoAttachPoint="previewNode"></td>\n								<td class="dojoxEntityPalettePreviewDetail" dojoAttachPoint="codeNode"></td>\n								<td class="dojoxEntityPalettePreviewDetail" dojoAttachPoint="entityNode"></td>\n								<td class="dojoxEntityPalettePreviewDetail" dojoAttachPoint="descNode"></td>\n							</tr>\n						</tbody>\n					</table>\n				</td>\n			</tr>\n		</tbody>\n	</table>\n</div>',baseClass:"dojoxEntityPalette",showPreview:!0,showCode:!1,showEntityName:!1,palette:"latin",dyeClass:"dojox.editor.plugins.LatinEntity",paletteClass:"editorLatinEntityPalette",cellClass:"dojoxEntityPaletteCell",postMixInProperties:function(){var choices=dojo.i18n.getLocalization("dojox.editor.plugins","latinEntities"),numChoices=0,entityKey;for(entityKey in choices)numChoices++;var choicesPerRow=Math.floor(Math.sqrt(numChoices)),numRows=choicesPerRow,currChoiceIdx=0,rows=[],row=[];for(entityKey in choices)currChoiceIdx++,row.push(entityKey),currChoiceIdx%numRows===0&&(rows.push(row),row=[]);row.length>0&&rows.push(row),this._palette=rows},buildRendering:function(){this.inherited(arguments);var i18n=dojo.i18n.getLocalization("dojox.editor.plugins","latinEntities");this._preparePalette(this._palette,i18n);var cells=dojo.query(".dojoxEntityPaletteCell",this.gridNode);dojo.forEach(cells,function(cellNode){this.connect(cellNode,"onmouseenter","_onCellMouseEnter")},this)},_onCellMouseEnter:function(e){this._displayDetails(e.target)},postCreate:function(){this.inherited(arguments),dojo.style(this.codeHeader,"display",this.showCode?"":"none"),dojo.style(this.codeNode,"display",this.showCode?"":"none"),dojo.style(this.entityHeader,"display",this.showEntityName?"":"none"),dojo.style(this.entityNode,"display",this.showEntityName?"":"none"),this.showPreview||dojo.style(this.previewNode,"display","none")},_setCurrent:function(node){this.inherited(arguments),this.showPreview&&this._displayDetails(node)},_displayDetails:function(cell){var dye=this._getDye(cell);if(dye){var ehtml=dye.getValue(),ename=dye._alias;this.previewNode.innerHTML=ehtml,this.codeNode.innerHTML="&amp;#"+parseInt(ehtml.charCodeAt(0),10)+";",this.entityNode.innerHTML="&amp;"+ename+";";var i18n=dojo.i18n.getLocalization("dojox.editor.plugins","latinEntities");this.descNode.innerHTML=i18n[ename].replace("\n","<br>")}else this.previewNode.innerHTML="",this.codeNode.innerHTML="",this.entityNode.innerHTML="",this.descNode.innerHTML=""}}),dojo.declare("dojox.editor.plugins.LatinEntity",null,{constructor:function(alias){this._alias=alias},getValue:function(){return"&"+this._alias+";"},fillCell:function(cell){cell.innerHTML=this.getValue()}}),dojox.editor.plugins.EntityPalette})