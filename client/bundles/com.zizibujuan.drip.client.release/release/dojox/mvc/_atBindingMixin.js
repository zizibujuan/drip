//>>built
define("dojox/mvc/_atBindingMixin","dojo/_base/array,dojo/_base/lang,dojo/_base/declare,dojo/has,dojo/Stateful,./resolve,./sync".split(","),function(o,l,f,j,q,p,r){function s(a){var b;try{b=require("dijit/registry")}catch(c){return}for(a=a.domNode&&a.domNode.parentNode;a;){if(a=b.getEnclosingWidget(a)){var d=a._relTargetProp||"target";if((l.isFunction(a.get)?a.get(d):a[d])||d in a.constructor.prototype)return a}a=a&&a.domNode.parentNode}}function k(a,b,c,d,f){function k(){g.Two&&g.Two.unwatch();delete g.Two;
var h=e&&(l.isFunction(e.get)?e.get(m):e[m]),i=p(a,h),h=p(c,h);j("mvc-bindings-log-api")&&(!i||/^rel:/.test(a));j("mvc-bindings-log-api")&&(!h||/^rel:/.test(c));if(i&&h&&(!/^rel:/.test(a)&&!/^rel:/.test(c)||e))(!i.set||!i.watch)&&"*"==b?j("mvc-bindings-log-api"):null==b?(l.isFunction(h.set)?h.set(d,i):h[d]=i,j("mvc-bindings-log-api")):g.Two=r(i,b,h,d,f)}var g={},e=s(c),m=e&&e._relTargetProp||"target";k();if(e&&/^rel:/.test(a)||/^rel:/.test(c)&&l.isFunction(e.set)&&l.isFunction(e.watch))g.rel=e.watch(m,
function(a,b,c){b!==c&&(j("mvc-bindings-log-api"),k())});var n={};n.unwatch=n.remove=function(){for(var a in g)g[a]&&g[a].unwatch(),delete g[a]};return n}j("mvc-bindings-log-api");f=f("dojox/mvc/_atBindingMixin",null,{dataBindAttr:"data-mvc-bindings",_dbpostscript:function(a){var b=this._refs=(a||{}).refs||{},c;for(c in a)if("dojox.mvc.at"==(a[c]||{}).atsignature){var d=a[c];delete a[c];b[c]=d}var d=new q,f=this;d.toString=function(){return"[Mixin value of widget "+f.declaredClass+", "+(f.id||"NO ID")+
"]"};d.canConvertToLoggable=!0;this._startAtWatchHandles(d);for(c in b)void 0!==d[c]&&((a=a||{})[c]=d[c]);this._stopAtWatchHandles()},_startAtWatchHandles:function(a){this.canConvertToLoggable=!0;var b=this._refs;if(b){var c=this._atWatchHandles=this._atWatchHandles||{};this._excludes=null;for(var d in b)b[d]&&"*"!=d&&(c[d]=k(b[d].target,b[d].targetProp,a||this,d,{bindDirection:b[d].bindDirection,converter:b[d].converter}));if("dojox.mvc.at"==(b["*"]||{}).atsignature)c["*"]=k(b["*"].target,b["*"].targetProp,
a||this,"*",{bindDirection:b["*"].bindDirection,converter:b["*"].converter})}},_stopAtWatchHandles:function(){for(var a in this._atWatchHandles)this._atWatchHandles[a].unwatch(),delete this._atWatchHandles[a]},_setAtWatchHandle:function(a,b){if("ref"==a)throw Error(this+": 1.7 ref syntax used in conjuction with 1.8 dojox/mvc/at syntax, which is not supported.");var c=this._atWatchHandles=this._atWatchHandles||{};c[a]&&(c[a].unwatch(),delete c[a]);this._excludes=this[a]=null;this._started?c[a]=k(b.target,
b.targetProp,this,a,{bindDirection:b.bindDirection,converter:b.converter}):this._refs[a]=b},_setBind:function(a){var a=eval("({"+a+"})"),b;for(b in a){var c=a[b];"dojox.mvc.at"==(c||{}).atsignature&&this._setAtWatchHandle(b,c)}},_getExcludesAttr:function(){if(this._excludes)return this._excludes;var a=[],b;for(b in this._atWatchHandles)"*"!=b&&a.push(b);return a},_getPropertiesAttr:function(){if(this.constructor._attribs)return this.constructor._attribs;var a=["onClick"].concat(this.constructor._setterAttrs);
o.forEach(["id","excludes","properties","ref","binding"],function(b){b=o.indexOf(a,b);0<=b&&a.splice(b,1)});return this.constructor._attribs=a}});f.prototype[f.prototype.dataBindAttr]="";return f});