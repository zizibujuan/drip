//>>built
define("dojox/timing/Sequence",["dojo/_base/kernel","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","./_base"],function(dojo){return dojo.experimental("dojox.timing.Sequence"),dojo.declare("dojox.timing.Sequence",null,{_goOnPause:0,_running:!1,constructor:function(){this._defsResolved=[]},go:function(defs,doneFunction){this._running=!0,dojo.forEach(defs,function(cur){if(cur.repeat>1){var repeat=cur.repeat;for(var j=0;j<repeat;j++)cur.repeat=1,this._defsResolved.push(cur)}else this._defsResolved.push(cur)},this);var last=defs[defs.length-1];doneFunction&&this._defsResolved.push({func:doneFunction}),this._defsResolved.push({func:[this.stop,this]}),this._curId=0,this._go()},_go:function(){function resolveAndCallFunc(func){var ret=null;return dojo.isArray(func)?func.length>2?ret=func[0].apply(func[1],func.slice(2)):ret=func[0].apply(func[1]):ret=func(),ret}if(!this._running)return;var cur=this._defsResolved[this._curId];this._curId+=1;if(this._curId>=this._defsResolved.length){resolveAndCallFunc(cur.func);return}if(cur.pauseAfter)resolveAndCallFunc(cur.func)!==!1?setTimeout(dojo.hitch(this,"_go"),cur.pauseAfter):this._goOnPause=cur.pauseAfter;else if(cur.pauseBefore){var x=dojo.hitch(this,function(){resolveAndCallFunc(cur.func)!==!1&&this._go()});setTimeout(x,cur.pauseBefore)}else resolveAndCallFunc(cur.func)!==!1&&this._go()},goOn:function(){this._goOnPause?(setTimeout(dojo.hitch(this,"_go"),this._goOnPause),this._goOnPause=0):this._go()},stop:function(){this._running=!1}}),dojox.timing.Sequence})