//>>built
define("dojox/socket/Reconnect",["dojo","dijit","dojox"],function(dojo,dijit,dojox){dojo.provide("dojox.socket.Reconnect"),dojox.socket.Reconnect=function(socket,options){options=options||{};var reconnectTime=options.reconnectTime||1e4,connectHandle=dojo.connect(socket,"onclose",function(event){clearTimeout(checkForOpen),event.wasClean||socket.disconnected(function(){dojox.socket.replace(socket,newSocket=socket.reconnect())})}),checkForOpen,newSocket;return socket.disconnected||(socket.disconnected=function(reconnect){setTimeout(function(){reconnect(),checkForOpen=setTimeout(function(){newSocket.readyState<2&&(reconnectTime=options.reconnectTime||1e4)},1e4)},reconnectTime),reconnectTime*=options.backoffRate||2}),socket.reconnect||(socket.reconnect=function(){return socket.args?dojox.socket.LongPoll(socket.args):dojox.socket.WebSocket({url:socket.URL||socket.url})}),socket}})