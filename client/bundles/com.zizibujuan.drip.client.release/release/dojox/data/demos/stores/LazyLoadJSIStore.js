//>>built
define("dojox/data/demos/stores/LazyLoadJSIStore",["dojo","dijit","dojox","dojo/require!dojo/data/ItemFileReadStore"],function(dojo,dijit,dojox){dojo.provide("dojox.data.demos.stores.LazyLoadJSIStore"),dojo.require("dojo.data.ItemFileReadStore"),dojo.declare("dojox.data.demos.stores.LazyLoadJSIStore",dojo.data.ItemFileReadStore,{constructor:function(keywordParameters){},isItemLoaded:function(item){return this.getValue(item,"type")==="stub"?!1:!0},loadItem:function(keywordArgs){var item=keywordArgs.item;this._assertIsItem(item);var itemName=this.getValue(item,"name"),parent=this.getValue(item,"parent"),dataUrl="";parent&&(dataUrl+=parent+"/"),dataUrl+=itemName+"/data.json";var self=this,gotData=function(data){delete item.type,delete item.parent;for(var i in data)dojo.isArray(data[i])?item[i]=data[i]:item[i]=[data[i]];self._arrayOfAllItems[item[self._itemNumPropName]]=item;var attributes=self.getAttributes(item);for(i in attributes){var values=item[attributes[i]];for(var j=0;j<values.length;j++){var value=values[j];if(typeof value=="object"&&value.stub){var stub={type:["stub"],name:[value.stub],parent:[itemName]};parent&&(stub.parent[0]=parent+"/"+stub.parent[0]),self._arrayOfAllItems.push(stub),stub[self._storeRefPropName]=self,stub[self._itemNumPropName]=self._arrayOfAllItems.length-1,values[j]=stub}}}if(keywordArgs.onItem){var scope=keywordArgs.scope?keywordArgs.scope:dojo.global;keywordArgs.onItem.call(scope,item)}},gotError=function(error){if(keywordArgs.onError){var scope=keywordArgs.scope?keywordArgs.scope:dojo.global;keywordArgs.onError.call(scope,error)}},xhrArgs={url:dataUrl,handleAs:"json-comment-optional"},d=dojo.xhrGet(xhrArgs);d.addCallback(gotData),d.addErrback(gotError)}})})