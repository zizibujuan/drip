//>>built
define("dojox/data/restListener",["dojo","dijit","dojox"],function(dojo,dijit,dojox){dojo.provide("dojox.data.restListener"),dojox.data.restListener=function(message){var channel=message.channel,jr=dojox.rpc.JsonRest,service=jr.getServiceAndId(channel).service,result=dojox.json.ref.resolveJson(message.result,{defaultId:message.event=="put"&&channel,index:dojox.rpc.Rest._index,idPrefix:service.servicePath.replace(/[^\/]*$/,""),idAttribute:jr.getIdAttribute(service),schemas:jr.schemas,loader:jr._loader,assignAbsoluteIds:!0}),target=dojox.rpc.Rest._index&&dojox.rpc.Rest._index[channel],onEvent="on"+message.event.toLowerCase(),store=service&&service._store;if(target&&target[onEvent]){target[onEvent](result);return}if(store)switch(onEvent){case"onpost":store.onNew(result);break;case"ondelete":store.onDelete(target)}}})