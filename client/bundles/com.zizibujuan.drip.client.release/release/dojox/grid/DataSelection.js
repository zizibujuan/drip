//>>built
define("dojox/grid/DataSelection",["dojo/_base/declare","./_SelectionPreserver","./Selection"],function(declare,_SelectionPreserver,Selection){return declare("dojox.grid.DataSelection",Selection,{constructor:function(grid){grid.keepSelection&&(this.preserver=new _SelectionPreserver(this))},destroy:function(){this.preserver&&this.preserver.destroy()},getFirstSelected:function(){var idx=Selection.prototype.getFirstSelected.call(this);return idx==-1?null:this.grid.getItem(idx)},getNextSelected:function(inPrev){var old_idx=this.grid.getItemIndex(inPrev),idx=Selection.prototype.getNextSelected.call(this,old_idx);return idx==-1?null:this.grid.getItem(idx)},getSelected:function(){var result=[];for(var i=0,l=this.selected.length;i<l;i++)this.selected[i]&&result.push(this.grid.getItem(i));return result},addToSelection:function(inItemOrIndex){if(this.mode=="none")return;var idx=null;typeof inItemOrIndex=="number"||typeof inItemOrIndex=="string"?idx=inItemOrIndex:idx=this.grid.getItemIndex(inItemOrIndex),Selection.prototype.addToSelection.call(this,idx)},deselect:function(inItemOrIndex){if(this.mode=="none")return;var idx=null;typeof inItemOrIndex=="number"||typeof inItemOrIndex=="string"?idx=inItemOrIndex:idx=this.grid.getItemIndex(inItemOrIndex),Selection.prototype.deselect.call(this,idx)},deselectAll:function(inItemOrIndex){var idx=null;inItemOrIndex||typeof inItemOrIndex=="number"?(typeof inItemOrIndex=="number"||typeof inItemOrIndex=="string"?idx=inItemOrIndex:idx=this.grid.getItemIndex(inItemOrIndex),Selection.prototype.deselectAll.call(this,idx)):this.inherited(arguments)}})})