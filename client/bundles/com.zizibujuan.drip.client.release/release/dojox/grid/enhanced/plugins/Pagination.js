//>>built
require({cache:{"url:dojox/grid/enhanced/templates/Pagination.html":'<div dojoAttachPoint="paginatorBar"\n	><table cellpadding="0" cellspacing="0"  class="dojoxGridPaginator"\n		><tr\n			><td dojoAttachPoint="descriptionTd" class="dojoxGridDescriptionTd"\n				><div dojoAttachPoint="descriptionDiv" class="dojoxGridDescription"></div\n			></div></td\n			><td dojoAttachPoint="sizeSwitchTd"></td\n			><td dojoAttachPoint="pageStepperTd" class="dojoxGridPaginatorFastStep"\n				><div dojoAttachPoint="pageStepperDiv" class="dojoxGridPaginatorStep"></div\n			></td\n			><td dojoAttachPoint="gotoPageTd" class="dojoxGridPaginatorGotoTd"\n				><div dojoAttachPoint="gotoPageDiv" class="dojoxGridPaginatorGotoDiv" dojoAttachEvent="onclick:_openGotopageDialog, onkeydown:_openGotopageDialog"\n					><span class="dojoxGridWardButtonInner">&#8869;</span\n				></div\n			></td\n		></tr\n	></table\n></div>\n'}}),define("dojox/grid/enhanced/plugins/Pagination",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/array","dojo/_base/connect","dojo/_base/lang","dojo/_base/html","dojo/_base/event","dojo/query","dojo/string","dojo/keys","dojo/text!../templates/Pagination.html","./Dialog","./_StoreLayer","../_Plugin","../../EnhancedGrid","dijit/form/Button","dijit/form/NumberTextBox","dijit/focus","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojox/html/metrics","dojo/i18n!../nls/Pagination"],function(kernel,declare,array,connect,lang,html,event,query,string,keys,template,Dialog,layers,_Plugin,EnhancedGrid,Button,NumberTextBox,dijitFocus,_Widget,_TemplatedMixin,_WidgetsInTemplateMixin,metrics,nls){var _GotoPagePane=declare("dojox.grid.enhanced.plugins.pagination._GotoPagePane",[_Widget,_TemplatedMixin,_WidgetsInTemplateMixin],{templateString:"<div><div class='dojoxGridDialogMargin' dojoAttachPoint='_mainMsgNode'></div><div class='dojoxGridDialogMargin'><input dojoType='dijit.form.NumberTextBox' style='width: 50px;' dojoAttachPoint='_pageInputBox' dojoAttachEvent='onKeyUp: _onKey'></input><label dojoAttachPoint='_pageLabelNode'></label></div><div class='dojoxGridDialogButton'><button dojoType='dijit.form.Button' dojoAttachPoint='_confirmBtn' dojoAttachEvent='onClick: _onConfirm'></button><button dojoType='dijit.form.Button' dojoAttachPoint='_cancelBtn' dojoAttachEvent='onClick: _onCancel'></button></div></div>",widgetsInTemplate:!0,dlg:null,postMixInProperties:function(){this.plugin=this.dlg.plugin},postCreate:function(){this.inherited(arguments),this._mainMsgNode.innerHTML=this.plugin._nls[12],this._confirmBtn.set("label",this.plugin._nls[14]),this._confirmBtn.set("disabled",!0),this._cancelBtn.set("label",this.plugin._nls[15])},_onConfirm:function(evt){this._pageInputBox.isValid()&&this._pageInputBox.getDisplayedValue()!==""&&(this.plugin.currentPage(this._pageInputBox.parse(this._pageInputBox.getDisplayedValue())),this.dlg._gotoPageDialog.hide(),this._pageInputBox.reset()),stopEvent(evt)},_onCancel:function(evt){this._pageInputBox.reset(),this.dlg._gotoPageDialog.hide(),stopEvent(evt)},_onKey:function(evt){this._confirmBtn.set("disabled",!this._pageInputBox.isValid()||this._pageInputBox.getDisplayedValue()==""),!evt.altKey&&!evt.metaKey&&evt.keyCode===keys.ENTER&&this._onConfirm(evt)}}),_GotoPageDialog=declare("dojox.grid.enhanced.plugins.pagination._GotoPageDialog",null,{pageCount:0,dlgPane:null,constructor:function(plugin){this.plugin=plugin,this.dlgPane=new _GotoPagePane({dlg:this}),this.dlgPane.startup(),this._gotoPageDialog=new Dialog({refNode:plugin.grid.domNode,title:this.plugin._nls[11],content:this.dlgPane}),this._gotoPageDialog.startup()},_updatePageCount:function(){this.pageCount=this.plugin.getTotalPageNum(),this.dlgPane._pageInputBox.constraints={fractional:!1,min:1,max:this.pageCount},this.dlgPane._pageLabelNode.innerHTML=string.substitute(this.plugin._nls[13],[this.pageCount])},showDialog:function(){this._updatePageCount(),this._gotoPageDialog.show()},destroy:function(){this._gotoPageDialog.destroy()}}),_ForcedPageStoreLayer=declare("dojox.grid.enhanced.plugins._ForcedPageStoreLayer",layers._StoreLayer,{tags:["presentation"],constructor:function(plugin){this._plugin=plugin},_fetch:function(request){var _this=this,plugin=_this._plugin,grid=plugin.grid,scope=request.scope||kernel.global,onBegin=request.onBegin;request.start=(plugin._currentPage-1)*plugin._currentPageSize+request.start,_this.startIdx=request.start,_this.endIdx=request.start+plugin._currentPageSize-1;var p=plugin._paginator;return plugin._showAll||(plugin._showAll=!p.sizeSwitch&&!p.pageStepper&&!p.gotoButton),onBegin&&plugin._showAll?request.onBegin=function(size,req){plugin._maxSize=plugin._currentPageSize=size,_this.startIdx=0,_this.endIdx=size-1,plugin._paginator._update(),req.onBegin=onBegin,req.onBegin.call(scope,size,req)}:onBegin&&(request.onBegin=function(size,req){req.start=0,req.count=plugin._currentPageSize,plugin._maxSize=size,_this.endIdx=_this.endIdx>=size?size-1:_this.endIdx,_this.startIdx>size&&size!==0&&(grid._pending_requests[req.start]=!1,plugin.firstPage()),plugin._paginator._update(),req.onBegin=onBegin,req.onBegin.call(scope,Math.min(plugin._currentPageSize,size-_this.startIdx),req)}),lang.hitch(this._store,this._originFetch)(request)}}),stopEvent=function(evt){try{evt&&event.stop(evt)}catch(e){}},_Focus=declare("dojox.grid.enhanced.plugins.pagination._Focus",null,{_focusedNode:null,_isFocused:!1,constructor:function(paginator){this._pager=paginator;var focusMgr=paginator.plugin.grid.focus;paginator.plugin.connect(paginator,"onSwitchPageSize",lang.hitch(this,"_onActive")),paginator.plugin.connect(paginator,"onPageStep",lang.hitch(this,"_onActive")),paginator.plugin.connect(paginator,"onShowGotoPageDialog",lang.hitch(this,"_onActive")),paginator.plugin.connect(paginator,"_update",lang.hitch(this,"_moveFocus"))},_onFocus:function(evt,step){var node,nodes;if(!this._isFocused)node=this._focusedNode||query("[tabindex]",this._pager.domNode)[0];else if(step&&this._focusedNode){var dir=step>0?-1:1,tabindex=parseInt(this._focusedNode.getAttribute("tabindex"),10)+dir;while(tabindex>=-3&&tabindex<0){node=query("[tabindex="+tabindex+"]",this._pager.domNode)[0];if(node)break;tabindex+=dir}}return this._focus(node,evt)},_onBlur:function(evt,step){if(!step||!this._focusedNode)return this._isFocused=!1,this._focusedNode&&html.hasClass(this._focusedNode,"dojoxGridButtonFocus")&&html.removeClass(this._focusedNode,"dojoxGridButtonFocus"),!0;var node,dir=step>0?-1:1,tabindex=parseInt(this._focusedNode.getAttribute("tabindex"),10)+dir;while(tabindex>=-3&&tabindex<0){node=query("[tabindex="+tabindex+"]",this._pager.domNode)[0];if(node)break;tabindex+=dir}return node||(this._isFocused=!1,html.hasClass(this._focusedNode,"dojoxGridButtonFocus")&&html.removeClass(this._focusedNode,"dojoxGridButtonFocus")),node?!1:!0},_onMove:function(rowDelta,colDelta,evt){if(this._focusedNode){var tabindex=this._focusedNode.getAttribute("tabindex"),delta=colDelta==1?"nextSibling":"previousSibling",node=this._focusedNode[delta];while(node){if(node.getAttribute("tabindex")==tabindex){this._focus(node);break}node=node[delta]}}},_focus:function(node,evt){return node?(this._isFocused=!0,kernel.isIE&&this._focusedNode&&html.removeClass(this._focusedNode,"dojoxGridButtonFocus"),this._focusedNode=node,node.focus(),kernel.isIE&&html.addClass(node,"dojoxGridButtonFocus"),stopEvent(evt),!0):!1},_onActive:function(e){this._focusedNode=e.target,this._isFocused||this._pager.plugin.grid.focus.focusArea("pagination"+this._pager.position)},_moveFocus:function(){if(this._focusedNode&&!this._focusedNode.getAttribute("tabindex")){var next=this._focusedNode.nextSibling;while(next){if(next.getAttribute("tabindex")){this._focus(next);return}next=next.nextSibling}var prev=this._focusedNode.previousSibling;while(prev){if(prev.getAttribute("tabindex")){this._focus(prev);return}prev=prev.previousSibling}this._focusedNode=null,this._onBlur()}else kernel.isIE&&this._focusedNode&&html.addClass(this._focusedNode,"dojoxGridButtonFocus")}}),_Paginator=declare("dojox.grid.enhanced.plugins._Paginator",[_Widget,_TemplatedMixin],{templateString:template,constructor:function(params){lang.mixin(this,params),this.grid=this.plugin.grid},postCreate:function(){this.inherited(arguments);var _this=this,g=this.grid;this.plugin.connect(g,"_resize",lang.hitch(this,"_resetGridHeight")),this._originalResize=g.resize,g.resize=function(changeSize,resultSize){_this._changeSize=changeSize,_this._resultSize=resultSize,_this._originalResize.apply(g,arguments)},this.focus=_Focus(this),this._placeSelf()},destroy:function(){this.inherited(arguments),this.grid.focus.removeArea("pagination"+this.position),this._gotoPageDialog&&this._gotoPageDialog.destroy(),this.grid.resize=this._originalResize},onSwitchPageSize:function(evt){},onPageStep:function(evt){},onShowGotoPageDialog:function(evt){},_update:function(){this._updateDescription(),this._updatePageStepper(),this._updateSizeSwitch(),this._updateGotoButton()},_registerFocus:function(isTop){var focusMgr=this.grid.focus,name="pagination"+this.position,f=this.focus;focusMgr.addArea({name:name,onFocus:lang.hitch(this.focus,"_onFocus"),onBlur:lang.hitch(this.focus,"_onBlur"),onMove:lang.hitch(this.focus,"_onMove")}),focusMgr.placeArea(name,isTop?"before":"after",isTop?"header":"content")},_placeSelf:function(){var g=this.grid,isTop=this.position=="top";this.placeAt(isTop?g.viewsHeaderNode:g.viewsNode,isTop?"before":"after"),this._registerFocus(isTop)},_resetGridHeight:function(changeSize,resultSize){var g=this.grid;changeSize=changeSize||this._changeSize,resultSize=resultSize||this._resultSize,delete this._changeSize,delete this._resultSize;if(g._autoHeight)return;var padBorder=g._getPadBorder().h;this.plugin.gh||(this.plugin.gh=(g.domNode.clientHeight||html.style(g.domNode,"height"))+2*padBorder),resultSize&&(changeSize=resultSize),changeSize&&(this.plugin.gh=html.contentBox(g.domNode).h+2*padBorder);var gh=this.plugin.gh,hh=g._getHeaderHeight(),ph=html.marginBox(this.domNode).h;if(typeof g.autoHeight=="number"){var cgh=gh+ph-padBorder;html.style(g.domNode,"height",cgh+"px"),html.style(g.viewsNode,"height",cgh-ph-hh+"px"),this._styleMsgNode(hh,html.marginBox(g.viewsNode).w,cgh-ph-hh)}else{var h=gh-ph-hh-padBorder;html.style(g.viewsNode,"height",h+"px");var hasHScroller=array.some(g.views.views,function(v){return v.hasHScrollbar()});array.forEach(g.viewsNode.childNodes,function(c){html.style(c,"height",h+"px")}),array.forEach(g.views.views,function(v){v.scrollboxNode&&(!v.hasHScrollbar()&&hasHScroller?html.style(v.scrollboxNode,"height",h-metrics.getScrollbar().h+"px"):html.style(v.scrollboxNode,"height",h+"px"))}),this._styleMsgNode(hh,html.marginBox(g.viewsNode).w,h)}},_styleMsgNode:function(top,width,height){var messagesNode=this.grid.messagesNode;html.style(messagesNode,{position:"absolute",top:top+"px",width:width+"px",height:height+"px","z-Index":"100"})},_updateDescription:function(){var s=this.plugin.forcePageStoreLayer,maxSize=this.plugin._maxSize,nls=this.plugin._nls,getItemTitle=function(){return maxSize<=0||maxSize==1?nls[5]:nls[4]};this.description&&this.descriptionDiv&&(this.descriptionDiv.innerHTML=maxSize>0?string.substitute(nls[0],[getItemTitle(),maxSize,s.startIdx+1,s.endIdx+1]):"0 "+getItemTitle())},_updateSizeSwitch:function(){html.style(this.sizeSwitchTd,"display",this.sizeSwitch?"":"none");if(!this.sizeSwitch)return;this.sizeSwitchTd.childNodes.length<1&&this._createSizeSwitchNodes(),this._updateSwitchNodesStyle()},_createSizeSwitchNodes:function(){var node=null,nls=this.plugin._nls,connect=lang.hitch(this.plugin,"connect");array.forEach(this.pageSizes,function(size){var labelValue=isFinite(size)?string.substitute(nls[2],[size]):nls[1],value=isFinite(size)?size:nls[16];node=html.create("span",{innerHTML:value,title:labelValue,value:size,tabindex:"-1"},this.sizeSwitchTd,"last"),node.setAttribute("aria-label",labelValue),connect(node,"onclick",lang.hitch(this,"_onSwitchPageSize")),connect(node,"onkeydown",lang.hitch(this,"_onSwitchPageSize")),connect(node,"onmouseover",function(e){html.addClass(e.target,"dojoxGridPageTextHover")}),connect(node,"onmouseout",function(e){html.removeClass(e.target,"dojoxGridPageTextHover")}),node=html.create("span",{innerHTML:"|"},this.sizeSwitchTd,"last"),html.addClass(node,"dojoxGridSeparator")},this),html.destroy(node)},_updateSwitchNodesStyle:function(){var size=null,styleNode=function(node,status){status?(html.addClass(node,"dojoxGridActivedSwitch"),html.removeAttr(node,"tabindex")):(html.addClass(node,"dojoxGridInactiveSwitch"),node.setAttribute("tabindex","-1"))};array.forEach(this.sizeSwitchTd.childNodes,function(node){node.value&&(html.removeClass(node),size=node.value,this.plugin._showAll?styleNode(node,isNaN(parseInt(size,10))):styleNode(node,this.plugin._currentPageSize==size))},this)},_updatePageStepper:function(){html.style(this.pageStepperTd,"display",this.pageStepper?"":"none");if(!this.pageStepper)return;this.pageStepperDiv.childNodes.length<1?(this._createPageStepNodes(),this._createWardBtns()):this._resetPageStepNodes(),this._updatePageStepNodesStyle()},_createPageStepNodes:function(){var startPage=this._getStartPage(),stepSize=this._getStepPageSize(),label="",node=null,i=startPage,connect=lang.hitch(this.plugin,"connect");for(;i<startPage+this.maxPageStep+1;i++)label=string.substitute(this.plugin._nls[3],[i]),node=html.create("div",{innerHTML:i,value:i,title:label},this.pageStepperDiv,"last"),node.setAttribute("aria-label",label),connect(node,"onclick",lang.hitch(this,"_onPageStep")),connect(node,"onkeydown",lang.hitch(this,"_onPageStep")),connect(node,"onmouseover",function(e){html.addClass(e.target,"dojoxGridPageTextHover")}),connect(node,"onmouseout",function(e){html.removeClass(e.target,"dojoxGridPageTextHover")}),html.style(node,"display",i<startPage+stepSize?"":"none")},_createWardBtns:function(){var _this=this,nls=this.plugin._nls,highContrastLabel={prevPage:"&#60;",firstPage:"&#171;",nextPage:"&#62;",lastPage:"&#187;"},createWardBtn=function(value,label,position){var node=html.create("div",{value:value,title:label,tabindex:"-2"},_this.pageStepperDiv,position);_this.plugin.connect(node,"onclick",lang.hitch(_this,"_onPageStep")),_this.plugin.connect(node,"onkeydown",lang.hitch(_this,"_onPageStep")),node.setAttribute("aria-label",label);var highConrastNode=html.create("span",{value:value,title:label,innerHTML:highContrastLabel[value]},node,position);html.addClass(highConrastNode,"dojoxGridWardButtonInner")};createWardBtn("prevPage",nls[6],"first"),createWardBtn("firstPage",nls[7],"first"),createWardBtn("nextPage",nls[8],"last"),createWardBtn("lastPage",nls[9],"last")},_resetPageStepNodes:function(){var startPage=this._getStartPage(),stepSize=this._getStepPageSize(),stepNodes=this.pageStepperDiv.childNodes,node=null,i=startPage,j=2,tip;for(;j<stepNodes.length-2;j++,i++)node=stepNodes[j],i<startPage+stepSize?(tip=string.substitute(this.plugin._nls[3],[i]),html.attr(node,{innerHTML:i,title:tip,value:i}),html.style(node,"display",""),node.setAttribute("aria-label",tip)):html.style(node,"display","none")},_updatePageStepNodesStyle:function(){var value=null,curPage=this.plugin.currentPage(),pageCount=this.plugin.getTotalPageNum(),updateClass=function(node,isWardBtn,status){var value=node.value,enableClass=isWardBtn?"dojoxGrid"+value+"Btn":"dojoxGridInactived",disableClass=isWardBtn?"dojoxGrid"+value+"BtnDisable":"dojoxGridActived";status?(html.addClass(node,disableClass),html.removeAttr(node,"tabindex")):(html.addClass(node,enableClass),node.setAttribute("tabindex","-2"))};array.forEach(this.pageStepperDiv.childNodes,function(node){html.removeClass(node);if(isNaN(parseInt(node.value,10))){html.addClass(node,"dojoxGridWardButton");var disablePageNum=node.value=="prevPage"||node.value=="firstPage"?1:pageCount;updateClass(node,!0,curPage===disablePageNum)}else value=parseInt(node.value,10),updateClass(node,!1,value===curPage||html.style(node,"display")==="none")},this)},_showGotoButton:function(flag){this.gotoButton=flag,this._updateGotoButton()},_updateGotoButton:function(){if(!this.gotoButton){this._gotoPageDialog&&this._gotoPageDialog.destroy(),html.removeAttr(this.gotoPageDiv,"tabindex"),html.style(this.gotoPageTd,"display","none");return}html.style(this.gotoPageTd,"display")=="none"&&html.style(this.gotoPageTd,"display",""),this.gotoPageDiv.setAttribute("title",this.plugin._nls[10]),html.toggleClass(this.gotoPageDiv,"dojoxGridPaginatorGotoDivDisabled",this.plugin.getTotalPageNum()<=1),this.plugin.getTotalPageNum()<=1?html.removeAttr(this.gotoPageDiv,"tabindex"):this.gotoPageDiv.setAttribute("tabindex","-3")},_openGotopageDialog:function(e){if(this.plugin.getTotalPageNum()<=1)return;if(e.type==="keydown"&&e.keyCode!==keys.ENTER&&e.keyCode!==keys.SPACE)return;this._gotoPageDialog||(this._gotoPageDialog=new _GotoPageDialog(this.plugin)),this._gotoPageDialog.showDialog(),this.onShowGotoPageDialog(e)},_onSwitchPageSize:function(e){if(e.type==="keydown"&&e.keyCode!==keys.ENTER&&e.keyCode!==keys.SPACE)return;this.onSwitchPageSize(e),this.plugin.currentPageSize(e.target.value)},_onPageStep:function(e){if(e.type==="keydown"&&e.keyCode!==keys.ENTER&&e.keyCode!==keys.SPACE)return;var p=this.plugin,value=e.target.value;this.onPageStep(e),isNaN(parseInt(value,10))?p[value]():p.currentPage(parseInt(value,10))},_getStartPage:function(){var cp=this.plugin.currentPage(),ms=this.maxPageStep,hs=parseInt(ms/2,10),tp=this.plugin.getTotalPageNum();return cp<hs||cp-hs<1||tp<=ms?1:tp-cp<hs&&cp-ms>=0?tp-ms+1:cp-hs},_getStepPageSize:function(){var sp=this._getStartPage(),tp=this.plugin.getTotalPageNum(),ms=this.maxPageStep;return sp+ms>tp?tp-sp+1:ms}}),Pagination=declare("dojox.grid.enhanced.plugins.Pagination",_Plugin,{name:"pagination",defaultPageSize:25,defaultPage:1,description:!0,sizeSwitch:!0,pageStepper:!0,gotoButton:!1,pageSizes:[10,25,50,100,Infinity],maxPageStep:7,position:"bottom",init:function(){var g=this.grid;g.usingPagination=!0,this._initOptions(),this._currentPage=this.defaultPage,this._currentPageSize=this.grid.rowsPerPage=this.defaultPageSize,this._store=g.store,this.forcePageStoreLayer=new _ForcedPageStoreLayer(this),layers.wrap(g,"_storeLayerFetch",this.forcePageStoreLayer),this._paginator=this.option.position!="top"?new _Paginator(lang.mixin(this.option,{position:"bottom",plugin:this})):new _Paginator(lang.mixin(this.option,{position:"top",plugin:this})),this._regApis()},destroy:function(){this.inherited(arguments),this._paginator.destroy();var g=this.grid;g.unwrap(this.forcePageStoreLayer.name()),g.scrollToRow=this._gridOriginalfuncs[0],g._onNew=this._gridOriginalfuncs[1],g.removeSelectedRows=this._gridOriginalfuncs[2],this._paginator=null,this._nls=null},currentPage:function(page){return page<=this.getTotalPageNum()&&page>0&&this._currentPage!==page&&(this._currentPage=page,this.grid._refresh(!0),this.grid.resize()),this._currentPage},nextPage:function(){this.currentPage(this._currentPage+1)},prevPage:function(){this.currentPage(this._currentPage-1)},firstPage:function(){this.currentPage(1)},lastPage:function(){this.currentPage(this.getTotalPageNum())},currentPageSize:function(size){if(!isNaN(size)){var g=this.grid,startIndex=this._currentPageSize*(this._currentPage-1),endIndex;this._showAll=!isFinite(size),this.grid.usingPagination=!this._showAll,this._currentPageSize=this._showAll?this._maxSize:size,g.rowsPerPage=this._showAll?this._defaultRowsPerPage:size,endIndex=startIndex+Math.min(this._currentPageSize,this._maxSize);if(endIndex>this._maxSize)this.lastPage();else{var cp=Math.ceil(startIndex/this._currentPageSize)+1;cp!==this._currentPage?this.currentPage(cp):this.grid._refresh(!0)}this.grid.resize()}return this._currentPageSize},getTotalPageNum:function(){return Math.ceil(this._maxSize/this._currentPageSize)},getTotalRowCount:function(){return this._maxSize},scrollToRow:function(inRowIndex){var page=parseInt(inRowIndex/this._currentPageSize,10)+1;if(page>this.getTotalPageNum())return;this.currentPage(page);var rowIdx=inRowIndex%this._currentPageSize;return this._gridOriginalfuncs[0](rowIdx)},removeSelectedRows:function(){this._multiRemoving=!0,this._gridOriginalfuncs[2].apply(),this._multiRemoving=!1,this.grid.store.save&&this.grid.store.save(),this.grid.resize(),this.grid._refresh()},showGotoPageButton:function(flag){this._paginator.gotoButton=flag,this._paginator._updateGotoButton()},gotoPage:function(page){kernel.deprecated("dojox.grid.enhanced.EnhancedGrid.gotoPage(page)","use dojox.grid.enhanced.EnhancedGrid.currentPage(page) instead","1.8"),this.currentPage(page)},gotoFirstPage:function(){kernel.deprecated("dojox.grid.enhanced.EnhancedGrid.gotoFirstPage()","use dojox.grid.enhanced.EnhancedGrid.firstPage() instead","1.8"),this.firstPage()},gotoLastPage:function(){kernel.deprecated("dojox.grid.enhanced.EnhancedGrid.gotoLastPage()","use dojox.grid.enhanced.EnhancedGrid.lastPage() instead","1.8"),this.lastPage()},changePageSize:function(size){kernel.deprecated("dojox.grid.enhanced.EnhancedGrid.changePageSize(size)","use dojox.grid.enhanced.EnhancedGrid.currentPageSize(size) instead","1.8"),this.currentPageSize(size)},_nls:null,_showAll:!1,_maxSize:0,_defaultRowsPerPage:25,_currentPage:1,_currentPageSize:25,_initOptions:function(){this._defaultRowsPerPage=this.grid.rowsPerPage||25,this.defaultPage=this.option.defaultPage>=1?parseInt(this.option.defaultPage,10):1,this.option.description=this.option.description!==undefined?!!this.option.description:this.description,this.option.sizeSwitch=this.option.sizeSwitch!==undefined?!!this.option.sizeSwitch:this.sizeSwitch,this.option.pageStepper=this.option.pageStepper!==undefined?!!this.option.pageStepper:this.pageStepper,this.option.gotoButton=this.option.gotoButton!==undefined?!!this.option.gotoButton:this.gotoButton;if(lang.isArray(this.option.pageSizes)){var pageSizes=[];array.forEach(this.option.pageSizes,function(size){size=typeof size=="number"?size:parseInt(size,10),!isNaN(size)&&size>0?pageSizes.push(size):array.indexOf(pageSizes,Infinity)<0&&pageSizes.push(Infinity)},this),this.option.pageSizes=pageSizes.sort(function(a,b){return a-b})}else this.option.pageSizes=this.pageSizes;this.defaultPageSize=this.option.defaultPageSize>=1?parseInt(this.option.defaultPageSize,10):this.pageSizes[0],this.option.maxPageStep=this.option.maxPageStep>0?this.option.maxPageStep:this.maxPageStep,this.option.position=lang.isString(this.option.position)?this.option.position.toLowerCase():this.position,this._nls=[nls.descTemplate,nls.allItemsLabelTemplate,nls.pageSizeLabelTemplate,nls.pageStepLabelTemplate,nls.itemTitle,nls.singularItemTitle,nls.prevTip,nls.firstTip,nls.nextTip,nls.lastTip,nls.gotoButtonTitle,nls.dialogTitle,nls.dialogIndication,nls.pageCountIndication,nls.dialogConfirm,nls.dialogCancel,nls.all]},_regApis:function(){var g=this.grid;g.currentPage=lang.hitch(this,this.currentPage),g.nextPage=lang.hitch(this,this.nextPage),g.prevPage=lang.hitch(this,this.prevPage),g.firstPage=lang.hitch(this,this.firstPage),g.lastPage=lang.hitch(this,this.lastPage),g.currentPageSize=lang.hitch(this,this.currentPageSize),g.showGotoPageButton=lang.hitch(this,this.showGotoPageButton),g.getTotalRowCount=lang.hitch(this,this.getTotalRowCount),g.getTotalPageNum=lang.hitch(this,this.getTotalPageNum),g.gotoPage=lang.hitch(this,this.gotoPage),g.gotoFirstPage=lang.hitch(this,this.gotoFirstPage),g.gotoLastPage=lang.hitch(this,this.gotoLastPage),g.changePageSize=lang.hitch(this,this.changePageSize),this._gridOriginalfuncs=[lang.hitch(g,g.scrollToRow),lang.hitch(g,g._onNew),lang.hitch(g,g.removeSelectedRows)],g.scrollToRow=lang.hitch(this,this.scrollToRow),g.removeSelectedRows=lang.hitch(this,this.removeSelectedRows),g._onNew=lang.hitch(this,this._onNew),this.connect(g,"_onDelete",lang.hitch(this,this._onDelete))},_onNew:function(item,parentInfo){var totalPages=this.getTotalPageNum();if((this._currentPage===totalPages||totalPages===0)&&this.grid.get("rowCount")<this._currentPageSize||this._showAll)lang.hitch(this.grid,this._gridOriginalfuncs[1])(item,parentInfo),this.forcePageStoreLayer.endIdx++;this._maxSize++,this._showAll&&this._currentPageSize++,this._showAll&&this.grid.autoHeight?this.grid._refresh():this._paginator._update()},_onDelete:function(){this._multiRemoving||(this.grid.resize(),this._showAll&&this.grid._refresh()),this.grid.get("rowCount")===0&&this.prevPage()}});return EnhancedGrid.registerPlugin(Pagination),Pagination})