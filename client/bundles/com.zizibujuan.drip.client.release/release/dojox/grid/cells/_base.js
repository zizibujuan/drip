//>>built
define("dojox/grid/cells/_base","dojo/_base/kernel,dojo/_base/declare,dojo/_base/lang,dojo/_base/event,dojo/_base/connect,dojo/_base/array,dojo/_base/sniff,dojo/dom,dojo/dom-attr,dojo/dom-construct,dijit/_Widget,../util".split(","),function(o,g,e,p,q,r,l,m,h,s,t,j){var u=g("dojox.grid._DeferredTextWidget",t,{deferred:null,_destroyOnRemove:!0,postCreate:function(){this.deferred&&this.deferred.addBoth(e.hitch(this,function(a){if(this.domNode)this.domNode.innerHTML=a}))}}),n=function(){setTimeout(e.hitch.apply(o,
arguments),0)},f=g("dojox.grid.cells._Base",null,{styles:"",classes:"",editable:!1,alwaysEditing:!1,formatter:null,defaultValue:"...",value:null,hidden:!1,noresize:!1,draggable:!0,_valueProp:"value",_formatPending:!1,constructor:function(a){this._props=a||{};e.mixin(this,a);if(void 0===this.draggable)this.draggable=!0},_defaultFormat:function(a,c){var v;var b=this.grid.formatterScope||this,d=this.formatter;if(d&&b&&"string"==typeof d)v=this.formatter=b[d],d=v;b=a!=this.defaultValue&&d?d.apply(b,c):
a;if("undefined"==typeof b)return this.defaultValue;b&&b.addBoth&&(b=new u({deferred:b},s.create("span",{innerHTML:this.defaultValue})));return b&&b.declaredClass&&b.startup?"<div class='dojoxGridStubNode' linkWidget='"+b.id+"' cellIdx='"+this.index+"'>"+this.defaultValue+"</div>":b},format:function(a,c){var b=this.grid.edit.info,d=this.get?this.get(a,c):this.value||this.defaultValue,d=d&&d.replace&&this.grid.escapeHTMLInData?d.replace(/&/g,"&amp;").replace(/</g,"&lt;"):d;return this.editable&&(this.alwaysEditing||
b.rowIndex==a&&b.cell==this)?this.formatEditing(b.value?b.value:d,a):this._defaultFormat(d,[d,a,this])},formatEditing:function(){},getNode:function(a){return this.view.getCellNode(a,this.index)},getHeaderNode:function(){return this.view.getHeaderCellNode(this.index)},getEditNode:function(a){return(this.getNode(a)||0).firstChild||0},canResize:function(){var a=this.unitWidth;return a&&"auto"!==a},isFlex:function(){var a=this.unitWidth;return a&&e.isString(a)&&("auto"==a||"%"==a.slice(-1))},applyEdit:function(a,
c){this.getNode(c)&&this.grid.edit.applyCellEdit(a,this,c)},cancelEdit:function(a){this.grid.doCancelEdit(a)},_onEditBlur:function(a){this.grid.edit.isEditCell(a,this.index)&&this.grid.edit.apply()},registerOnBlur:function(a,c){this.commitOnBlur&&q.connect(a,"onblur",function(){setTimeout(e.hitch(this,"_onEditBlur",c),250)})},needFormatNode:function(a,c){this._formatPending=!0;n(this,"_formatNode",a,c)},cancelFormatNode:function(){this._formatPending=!1},_formatNode:function(a,c){if(this._formatPending)this._formatPending=
!1,l("ie")||m.setSelectable(this.grid.domNode,!0),this.formatNode(this.getEditNode(c),a,c)},formatNode:function(a,c,b){l("ie")?n(this,"focus",b,a):this.focus(b,a)},dispatchEvent:function(a,c){if(a in this)return this[a](c)},getValue:function(a){return this.getEditNode(a)[this._valueProp]},setValue:function(a,c){var b=this.getEditNode(a);b&&(b[this._valueProp]=c)},focus:function(a,c){var b=c||this.getEditNode(a);try{j.fire(b,"focus"),j.fire(b,"select")}catch(d){}},save:function(a){this.value=this.value||
this.getValue(a)},restore:function(a){this.setValue(a,this.value)},_finish:function(){m.setSelectable(this.grid.domNode,!1);this.cancelFormatNode()},apply:function(a){this.applyEdit(this.getValue(a),a);this._finish(a)},cancel:function(a){this.cancelEdit(a);this._finish(a)}});f.markupFactory=function(a,c){var b=e.trim(h.get(a,"formatter")||"");if(b)c.formatter=e.getObject(b)||b;if(b=e.trim(h.get(a,"get")||""))c.get=e.getObject(b);b=function(b,c,v){var f=e.trim(h.get(a,b)||"");f&&(c[v||b]="false"!=
f.toLowerCase())};b("sortDesc",c);b("editable",c);b("alwaysEditing",c);b("noresize",c);b("draggable",c);if(b=e.trim(h.get(a,"loadingText")||h.get(a,"defaultValue")||""))c.defaultValue=b;b=function(b,c,f){var g=e.trim(h.get(a,b)||"")||void 0;g&&(c[f||b]=g)};b("styles",c);b("headerStyles",c);b("cellStyles",c);b("classes",c);b("headerClasses",c);b("cellClasses",c)};var i=f.Cell=g("dojox.grid.cells.Cell",f,{constructor:function(){this.keyFilter=this.keyFilter},keyFilter:null,formatEditing:function(a,
c){this.needFormatNode(a,c);return'<input class="dojoxGridInput" type="text" value="'+a+'">'},formatNode:function(a,c,b){this.inherited(arguments);this.registerOnBlur(a,b)},doKey:function(a){this.keyFilter&&-1==String.fromCharCode(a.charCode).search(this.keyFilter)&&p.stop(a)},_finish:function(a){this.inherited(arguments);var c=this.getEditNode(a);try{j.fire(c,"blur")}catch(b){}}});i.markupFactory=function(a,c){f.markupFactory(a,c);var b=e.trim(h.get(a,"keyFilter")||"");if(b)c.keyFilter=RegExp(b)};
(f.RowIndex=g("dojox.grid.cells.RowIndex",i,{name:"Row",postscript:function(){this.editable=!1},get:function(a){return a+1}})).markupFactory=function(a,c){i.markupFactory(a,c)};(f.Select=g("dojox.grid.cells.Select",i,{options:null,values:null,returnIndex:-1,constructor:function(){this.values=this.values||this.options},formatEditing:function(a,c){this.needFormatNode(a,c);for(var b=['<select class="dojoxGridSelect">'],d=0,e,f;void 0!==(e=this.options[d])&&void 0!==(f=this.values[d]);d++)f=f.replace?
f.replace(/&/g,"&amp;").replace(/</g,"&lt;"):f,e=e.replace?e.replace(/&/g,"&amp;").replace(/</g,"&lt;"):e,b.push("<option",a==f?" selected":"",' value="'+f+'"',">",e,"</option>");b.push("</select>");return b.join("")},_defaultFormat:function(a,c){var b=this.inherited(arguments);if(!this.formatter&&this.values&&this.options){var d=r.indexOf(this.values,b);0<=d&&(b=this.options[d])}return b},getValue:function(a){var c=this.getEditNode(a);if(c)return a=c.selectedIndex,c=c.options[a],-1<this.returnIndex?
a:c.value||c.innerHTML}})).markupFactory=function(a,c){i.markupFactory(a,c);var b=e.trim(h.get(a,"options")||"");if(b){var d=b.split(",");if(d[0]!=b)c.options=d}if(b=e.trim(h.get(a,"values")||""))if(d=b.split(","),d[0]!=b)c.values=d};var k=f.AlwaysEdit=g("dojox.grid.cells.AlwaysEdit",i,{alwaysEditing:!0,_formatNode:function(a,c){this.formatNode(this.getEditNode(c),a,c)},applyStaticValue:function(a){var c=this.grid.edit;c.applyCellEdit(this.getValue(a),this,a);c.start(this,a,!0)}});k.markupFactory=
function(a,c){i.markupFactory(a,c)};(f.Bool=g("dojox.grid.cells.Bool",k,{_valueProp:"checked",formatEditing:function(a){return'<input class="dojoxGridInput" type="checkbox"'+(a?' checked="checked"':"")+' style="width: auto" />'},doclick:function(a){"INPUT"==a.target.tagName&&this.applyStaticValue(a.rowIndex)}})).markupFactory=function(a,c){k.markupFactory(a,c)};return f});