//>>built
require({cache:{"url:dojox/grid/resources/View.html":'<div class="dojoxGridView" role="presentation">\n	<div class="dojoxGridHeader" dojoAttachPoint="headerNode" role="presentation">\n		<div dojoAttachPoint="headerNodeContainer" style="width:9000em" role="presentation">\n			<div dojoAttachPoint="headerContentNode" role="row"></div>\n		</div>\n	</div>\n	<input type="checkbox" class="dojoxGridHiddenFocus" dojoAttachPoint="hiddenFocusNode" role="presentation" />\n	<input type="checkbox" class="dojoxGridHiddenFocus" role="presentation" />\n	<div class="dojoxGridScrollbox" dojoAttachPoint="scrollboxNode" role="presentation">\n		<div class="dojoxGridContent" dojoAttachPoint="contentNode" hidefocus="hidefocus" role="presentation"></div>\n	</div>\n</div>\n'}}),define("dojox/grid/_View",["dojo","dijit/registry","../main","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/connect","dojo/_base/sniff","dojo/query","dojo/_base/window","dojo/text!./resources/View.html","dojo/dnd/Source","dijit/_Widget","dijit/_TemplatedMixin","dojox/html/metrics","./util","dojo/_base/html","./_Builder","dojo/dnd/Avatar","dojo/dnd/Manager"],function(dojo,dijit,dojox,declare,array,lang,connect,has,query,win,template,Source,_Widget,_TemplatedMixin,metrics,util,html,_Builder,Avatar,Manager){var getStyleText=function(inNode,inStyleText){return inNode.style.cssText==undefined?inNode.getAttribute("style"):inNode.style.cssText},_View=declare("dojox.grid._View",[_Widget,_TemplatedMixin],{defaultWidth:"18em",viewWidth:"",templateString:template,classTag:"dojoxGrid",marginBottom:0,rowPad:2,_togglingColumn:-1,_headerBuilderClass:_Builder._HeaderBuilder,_contentBuilderClass:_Builder._ContentBuilder,postMixInProperties:function(){this.rowNodes={}},postCreate:function(){this.connect(this.scrollboxNode,"onscroll","doscroll"),util.funnelEvents(this.contentNode,this,"doContentEvent",["mouseover","mouseout","click","dblclick","contextmenu","mousedown"]),util.funnelEvents(this.headerNode,this,"doHeaderEvent",["dblclick","mouseover","mouseout","mousemove","mousedown","click","contextmenu"]),this.content=new this._contentBuilderClass(this),this.header=new this._headerBuilderClass(this),this.grid.isLeftToRight()||(this.headerNodeContainer.style.width="")},destroy:function(){html.destroy(this.headerNode),delete this.headerNode;for(var i in this.rowNodes)this._cleanupRowWidgets(this.rowNodes[i]),html.destroy(this.rowNodes[i]);this.rowNodes={},this.source&&this.source.destroy(),this.inherited(arguments)},focus:function(){has("ie")||has("webkit")||has("opera")?this.hiddenFocusNode.focus():this.scrollboxNode.focus()},setStructure:function(inStructure){var vs=this.structure=inStructure;vs.width&&!isNaN(vs.width)?this.viewWidth=vs.width+"em":this.viewWidth=vs.width||(vs.noscroll?"auto":this.viewWidth),this._onBeforeRow=vs.onBeforeRow||function(){},this._onAfterRow=vs.onAfterRow||function(){},this.noscroll=vs.noscroll,this.noscroll&&(this.scrollboxNode.style.overflow="hidden"),this.simpleStructure=Boolean(vs.cells.length==1),this.testFlexCells(),this.updateStructure()},_cleanupRowWidgets:function(inRowNode){inRowNode&&array.forEach(query("[widgetId]",inRowNode).map(dijit.byNode),function(w){w._destroyOnRemove?(w.destroy(),delete w):w.domNode&&w.domNode.parentNode&&w.domNode.parentNode.removeChild(w.domNode)})},onBeforeRow:function(inRowIndex,cells){this._onBeforeRow(inRowIndex,cells),inRowIndex>=0&&this._cleanupRowWidgets(this.getRowNode(inRowIndex))},onAfterRow:function(inRowIndex,cells,inRowNode){this._onAfterRow(inRowIndex,cells,inRowNode);var g=this.grid;array.forEach(query(".dojoxGridStubNode",inRowNode),function(n){if(n&&n.parentNode){var lw=n.getAttribute("linkWidget"),cellIdx=window.parseInt(html.attr(n,"cellIdx"),10),cellDef=g.getCell(cellIdx),w=dijit.byId(lw);w?(n.parentNode.replaceChild(w.domNode,n),w._started||w.startup(),dojo.destroy(n)):n.innerHTML=""}},this)},testFlexCells:function(){this.flexCells=!1;for(var j=0,row;row=this.structure.cells[j];j++)for(var i=0,cell;cell=row[i];i++)cell.view=this,this.flexCells=this.flexCells||cell.isFlex();return this.flexCells},updateStructure:function(){this.header.update(),this.content.update()},getScrollbarWidth:function(){var hasScrollSpace=this.hasVScrollbar(),overflow=html.style(this.scrollboxNode,"overflow");return this.noscroll||!overflow||overflow=="hidden"?hasScrollSpace=!1:overflow=="scroll"&&(hasScrollSpace=!0),hasScrollSpace?metrics.getScrollbar().w:0},getColumnsWidth:function(){var h=this.headerContentNode;return h&&h.firstChild?h.firstChild.offsetWidth||html.style(h.firstChild,"width"):0},setColumnsWidth:function(width){this.headerContentNode.firstChild.style.width=width+"px",this.viewWidth&&(this.viewWidth=width+"px")},getWidth:function(){return this.viewWidth||this.getColumnsWidth()+this.getScrollbarWidth()+"px"},getContentWidth:function(){return Math.max(0,html._getContentBox(this.domNode).w-this.getScrollbarWidth())+"px"},render:function(){this.scrollboxNode.style.height="",this.renderHeader(),this._togglingColumn>=0&&(this.setColumnsWidth(this.getColumnsWidth()-this._togglingColumn),this._togglingColumn=-1);var cells=this.grid.layout.cells,getSibling=lang.hitch(this,function(node,before){!this.grid.isLeftToRight()&&(before=!before);var inc=before?-1:1,idx=this.header.getCellNodeIndex(node)+inc,cell=cells[idx];while(cell&&cell.getHeaderNode()&&cell.getHeaderNode().style.display=="none")idx+=inc,cell=cells[idx];return cell?cell.getHeaderNode():null});if(this.grid.columnReordering&&this.simpleStructure){this.source&&this.source.destroy();var bottomMarkerId="dojoxGrid_bottomMarker",topMarkerId="dojoxGrid_topMarker";this.bottomMarker&&html.destroy(this.bottomMarker),this.bottomMarker=html.byId(bottomMarkerId),this.topMarker&&html.destroy(this.topMarker),this.topMarker=html.byId(topMarkerId),this.bottomMarker||(this.bottomMarker=html.create("div",{id:bottomMarkerId,"class":"dojoxGridColPlaceBottom"},win.body()),this._hide(this.bottomMarker),this.topMarker=html.create("div",{id:topMarkerId,"class":"dojoxGridColPlaceTop"},win.body()),this._hide(this.topMarker)),this.arrowDim=html.contentBox(this.bottomMarker);var headerHeight=html.contentBox(this.headerContentNode.firstChild.rows[0]).h;this.source=new Source(this.headerContentNode.firstChild.rows[0],{horizontal:!0,accept:["gridColumn_"+this.grid.id],viewIndex:this.index,generateText:!1,onMouseDown:lang.hitch(this,function(e){this.header.decorateEvent(e),(this.header.overRightResizeArea(e)||this.header.overLeftResizeArea(e))&&this.header.canResize(e)&&!this.header.moveable?this.header.beginColumnResize(e):(this.grid.headerMenu&&this.grid.headerMenu.onCancel(!0),e.button===(has("ie")<9?1:0)&&Source.prototype.onMouseDown.call(this.source,e))}),onMouseOver:lang.hitch(this,function(e){var src=this.source;src._getChildByEvent(e)&&Source.prototype.onMouseOver.apply(src,arguments)}),_markTargetAnchor:lang.hitch(this,function(before){var src=this.source;if(src.current==src.targetAnchor&&src.before==before)return;src.targetAnchor&&getSibling(src.targetAnchor,src.before)&&src._removeItemClass(getSibling(src.targetAnchor,src.before),src.before?"After":"Before"),Source.prototype._markTargetAnchor.call(src,before);var target=before?src.targetAnchor:getSibling(src.targetAnchor,src.before),endAdd=0;target||(target=src.targetAnchor,endAdd=html.contentBox(target).w+this.arrowDim.w/2+2);var pos=html.position(target,!0),left=Math.floor(pos.x-this.arrowDim.w/2+endAdd);html.style(this.bottomMarker,"visibility","visible"),html.style(this.topMarker,"visibility","visible"),html.style(this.bottomMarker,{left:left+"px",top:headerHeight+pos.y+"px"}),html.style(this.topMarker,{left:left+"px",top:pos.y-this.arrowDim.h+"px"}),src.targetAnchor&&getSibling(src.targetAnchor,src.before)&&src._addItemClass(getSibling(src.targetAnchor,src.before),src.before?"After":"Before")}),_unmarkTargetAnchor:lang.hitch(this,function(){var src=this.source;if(!src.targetAnchor)return;src.targetAnchor&&getSibling(src.targetAnchor,src.before)&&src._removeItemClass(getSibling(src.targetAnchor,src.before),src.before?"After":"Before"),this._hide(this.bottomMarker),this._hide(this.topMarker),Source.prototype._unmarkTargetAnchor.call(src)}),destroy:lang.hitch(this,function(){connect.disconnect(this._source_conn),connect.unsubscribe(this._source_sub),Source.prototype.destroy.call(this.source),this.bottomMarker&&(html.destroy(this.bottomMarker),delete this.bottomMarker),this.topMarker&&(html.destroy(this.topMarker),delete this.topMarker)}),onDndCancel:lang.hitch(this,function(){Source.prototype.onDndCancel.call(this.source),this._hide(this.bottomMarker),this._hide(this.topMarker)})}),this._source_conn=connect.connect(this.source,"onDndDrop",this,"_onDndDrop"),this._source_sub=connect.subscribe("/dnd/drop/before",this,"_onDndDropBefore"),this.source.startup()}},_hide:function(node){html.style(node,{top:"-10000px",visibility:"hidden"})},_onDndDropBefore:function(source,nodes,copy){if(Manager.manager().target!==this.source)return;this.source._targetNode=this.source.targetAnchor,this.source._beforeTarget=this.source.before;var views=this.grid.views.views,srcView=views[source.viewIndex],tgtView=views[this.index];tgtView!=srcView&&(srcView.convertColPctToFixed(),tgtView.convertColPctToFixed())},_onDndDrop:function(source,nodes,copy){if(Manager.manager().target!==this.source){Manager.manager().source===this.source&&(this._removingColumn=!0);return}this._hide(this.bottomMarker),this._hide(this.topMarker);var getIdx=function(n){return n?html.attr(n,"idx"):null},w=html.marginBox(nodes[0]).w;if(source.viewIndex!==this.index){var views=this.grid.views.views,srcView=views[source.viewIndex],tgtView=views[this.index];srcView.viewWidth&&srcView.viewWidth!="auto"&&srcView.setColumnsWidth(srcView.getColumnsWidth()-w),tgtView.viewWidth&&tgtView.viewWidth!="auto"&&tgtView.setColumnsWidth(tgtView.getColumnsWidth())}var stn=this.source._targetNode,stb=this.source._beforeTarget;!this.grid.isLeftToRight()&&(stb=!stb);var layout=this.grid.layout,idx=this.index;delete this.source._targetNode,delete this.source._beforeTarget,layout.moveColumn(source.viewIndex,idx,getIdx(nodes[0]),getIdx(stn),stb)},renderHeader:function(){this.headerContentNode.innerHTML=this.header.generateHtml(this._getHeaderContent),this.flexCells&&(this.contentWidth=this.getContentWidth(),this.headerContentNode.firstChild.style.width=this.contentWidth),util.fire(this,"onAfterRow",[-1,this.structure.cells,this.headerContentNode])},_getHeaderContent:function(inCell){var n=inCell.name||inCell.grid.getCellName(inCell);/^\s+$/.test(n)&&(n="&nbsp;");var ret=['<div class="dojoxGridSortNode'];return inCell.index!=inCell.grid.getSortIndex()?ret.push('">'):ret=ret.concat([" ",inCell.grid.sortInfo>0?"dojoxGridSortUp":"dojoxGridSortDown",'"><div class="dojoxGridArrowButtonChar">',inCell.grid.sortInfo>0?"&#9650;":"&#9660;",'</div><div class="dojoxGridArrowButtonNode" role="presentation"></div>','<div class="dojoxGridColCaption">']),ret=ret.concat([n,"</div></div>"]),ret.join("")},resize:function(){this.adaptHeight(),this.adaptWidth()},hasHScrollbar:function(reset){var hadScroll=this._hasHScroll||!1;if(this._hasHScroll==undefined||reset)if(this.noscroll)this._hasHScroll=!1;else{var style=html.style(this.scrollboxNode,"overflow");style=="hidden"?this._hasHScroll=!1:style=="scroll"?this._hasHScroll=!0:this._hasHScroll=this.scrollboxNode.offsetWidth-this.getScrollbarWidth()<this.contentNode.offsetWidth}return hadScroll!==this._hasHScroll&&this.grid.update(),this._hasHScroll},hasVScrollbar:function(reset){var hadScroll=this._hasVScroll||!1;if(this._hasVScroll==undefined||reset)if(this.noscroll)this._hasVScroll=!1;else{var style=html.style(this.scrollboxNode,"overflow");style=="hidden"?this._hasVScroll=!1:style=="scroll"?this._hasVScroll=!0:this._hasVScroll=this.scrollboxNode.scrollHeight>this.scrollboxNode.clientHeight}return hadScroll!==this._hasVScroll&&this.grid.update(),this._hasVScroll},convertColPctToFixed:function(){var hasPct=!1;this.grid.initialWidth="";var cellNodes=query("th",this.headerContentNode),fixedWidths=array.map(cellNodes,function(c,vIdx){var w=c.style.width;html.attr(c,"vIdx",vIdx);if(w&&w.slice(-1)=="%")hasPct=!0;else if(w&&w.slice(-2)=="px")return window.parseInt(w,10);return html.contentBox(c).w});return hasPct?(array.forEach(this.grid.layout.cells,function(cell,idx){if(cell.view==this){var cellNode=cell.view.getHeaderCellNode(cell.index);if(cellNode&&html.hasAttr(cellNode,"vIdx")){var vIdx=window.parseInt(html.attr(cellNode,"vIdx"));this.setColWidth(idx,fixedWidths[vIdx]),html.removeAttr(cellNode,"vIdx")}}},this),!0):!1},adaptHeight:function(minusScroll){if(!this.grid._autoHeight){var h=this.domNode.style.height&&parseInt(this.domNode.style.height.replace(/px/,""),10)||this.domNode.clientHeight,self=this,checkOtherViewScrollers=function(){var v;for(var i in self.grid.views.views){v=self.grid.views.views[i];if(v!==self&&v.hasHScrollbar())return!0}return!1};if(minusScroll||this.noscroll&&checkOtherViewScrollers())h-=metrics.getScrollbar().h;util.setStyleHeightPx(this.scrollboxNode,h)}this.hasVScrollbar(!0)},adaptWidth:function(){this.flexCells&&(this.contentWidth=this.getContentWidth(),this.headerContentNode.firstChild.style.width=this.contentWidth);var w=this.scrollboxNode.offsetWidth-this.getScrollbarWidth();this._removingColumn?(w=Math.min(w,this.getColumnsWidth())+"px",this._removingColumn=!1):w=Math.max(w,this.getColumnsWidth())+"px";var cn=this.contentNode;cn.style.width=w,this.hasHScrollbar(!0)},setSize:function(w,h){var ds=this.domNode.style,hs=this.headerNode.style;w&&(ds.width=w,hs.width=w),ds.height=h>=0?h+"px":""},renderRow:function(inRowIndex){var rowNode=this.createRowNode(inRowIndex);return this.buildRow(inRowIndex,rowNode),rowNode},createRowNode:function(inRowIndex){var node=document.createElement("div");return node.className=this.classTag+"Row",this instanceof dojox.grid._RowSelector?html.attr(node,"role","presentation"):(html.attr(node,"role","row"),this.grid.selectionMode!="none"&&node.setAttribute("aria-selected","false")),node[util.gridViewTag]=this.id,node[util.rowIndexTag]=inRowIndex,this.rowNodes[inRowIndex]=node,node},buildRow:function(inRowIndex,inRowNode){this.buildRowContent(inRowIndex,inRowNode),this.styleRow(inRowIndex,inRowNode)},buildRowContent:function(inRowIndex,inRowNode){inRowNode.innerHTML=this.content.generateHtml(inRowIndex,inRowIndex),this.flexCells&&this.contentWidth&&(inRowNode.firstChild.style.width=this.contentWidth),util.fire(this,"onAfterRow",[inRowIndex,this.structure.cells,inRowNode])},rowRemoved:function(inRowIndex){inRowIndex>=0&&this._cleanupRowWidgets(this.getRowNode(inRowIndex)),this.grid.edit.save(this,inRowIndex),delete this.rowNodes[inRowIndex]},getRowNode:function(inRowIndex){return this.rowNodes[inRowIndex]},getCellNode:function(inRowIndex,inCellIndex){var row=this.getRowNode(inRowIndex);if(row)return this.content.getCellNode(row,inCellIndex)},getHeaderCellNode:function(inCellIndex){if(this.headerContentNode)return this.header.getCellNode(this.headerContentNode,inCellIndex)},styleRow:function(inRowIndex,inRowNode){inRowNode._style=getStyleText(inRowNode),this.styleRowNode(inRowIndex,inRowNode)},styleRowNode:function(inRowIndex,inRowNode){inRowNode&&this.doStyleRowNode(inRowIndex,inRowNode)},doStyleRowNode:function(inRowIndex,inRowNode){this.grid.styleRowNode(inRowIndex,inRowNode)},updateRow:function(inRowIndex){var rowNode=this.getRowNode(inRowIndex);return rowNode&&(rowNode.style.height="",this.buildRow(inRowIndex,rowNode)),rowNode},updateRowStyles:function(inRowIndex){this.styleRowNode(inRowIndex,this.getRowNode(inRowIndex))},lastTop:0,firstScroll:0,_nativeScroll:!1,doscroll:function(inEvent){has("ff")>=13&&(this._nativeScroll=!0);var isLtr=this.grid.isLeftToRight();if(this.firstScroll<2){if(!isLtr&&this.firstScroll==1||isLtr&&this.firstScroll===0){var s=html.marginBox(this.headerNodeContainer);has("ie")?this.headerNodeContainer.style.width=s.w+this.getScrollbarWidth()+"px":has("mozilla")&&(this.headerNodeContainer.style.width=s.w-this.getScrollbarWidth()+"px",this.scrollboxNode.scrollLeft=isLtr?this.scrollboxNode.clientWidth-this.scrollboxNode.scrollWidth:this.scrollboxNode.scrollWidth-this.scrollboxNode.clientWidth)}this.firstScroll++}this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;var top=this.scrollboxNode.scrollTop;top!==this.lastTop&&this.grid.scrollTo(top),this._nativeScroll=!1},setScrollTop:function(inTop){return this.lastTop=inTop,this._nativeScroll||(this.scrollboxNode.scrollTop=inTop),this.scrollboxNode.scrollTop},doContentEvent:function(e){this.content.decorateEvent(e)&&this.grid.onContentEvent(e)},doHeaderEvent:function(e){this.header.decorateEvent(e)&&this.grid.onHeaderEvent(e)},dispatchContentEvent:function(e){return this.content.dispatchEvent(e)},dispatchHeaderEvent:function(e){return this.header.dispatchEvent(e)},setColWidth:function(inIndex,inWidth){this.grid.setCellWidth(inIndex,inWidth+"px")},update:function(){if(!this.domNode)return;this.content.update(),this.grid.update();var left=this.scrollboxNode.scrollLeft;this.scrollboxNode.scrollLeft=left,this.headerNode.scrollLeft=left}}),_GridAvatar=declare("dojox.grid._GridAvatar",Avatar,{construct:function(){var dd=win.doc,a=dd.createElement("table");a.cellPadding=a.cellSpacing="0",a.className="dojoxGridDndAvatar",a.style.position="absolute",a.style.zIndex=1999,a.style.margin="0px";var b=dd.createElement("tbody"),tr=dd.createElement("tr"),td=dd.createElement("td"),img=dd.createElement("td");tr.className="dojoxGridDndAvatarItem",img.className="dojoxGridDndAvatarItemImage",img.style.width="16px";var source=this.manager.source,node;if(source.creator)node=source._normalizedCreator(source.getItem(this.manager.nodes[0].id).data,"avatar").node;else{node=this.manager.nodes[0].cloneNode(!0);var table,tbody;if(node.tagName.toLowerCase()=="tr")table=dd.createElement("table"),tbody=dd.createElement("tbody"),tbody.appendChild(node),table.appendChild(tbody),node=table;else if(node.tagName.toLowerCase()=="th"){table=dd.createElement("table"),tbody=dd.createElement("tbody");var r=dd.createElement("tr");table.cellPadding=table.cellSpacing="0",r.appendChild(node),tbody.appendChild(r),table.appendChild(tbody),node=table}}node.id="",td.appendChild(node),tr.appendChild(img),tr.appendChild(td),html.style(tr,"opacity",.9),b.appendChild(tr),a.appendChild(b),this.node=a;var m=Manager.manager();this.oldOffsetY=m.OFFSET_Y,m.OFFSET_Y=1},destroy:function(){Manager.manager().OFFSET_Y=this.oldOffsetY,this.inherited(arguments)}}),oldMakeAvatar=Manager.manager().makeAvatar;return Manager.manager().makeAvatar=function(){var src=this.source;return src.viewIndex!==undefined&&!html.hasClass(win.body(),"dijit_a11y")?new _GridAvatar(this):oldMakeAvatar.call(Manager.manager())},_View})