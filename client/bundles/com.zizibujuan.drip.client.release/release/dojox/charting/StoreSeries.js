//>>built
define("dojox/charting/StoreSeries",["dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred"],function(arr,declare,Deferred){return declare("dojox.charting.StoreSeries",null,{constructor:function(store,kwArgs,value){this.store=store,this.kwArgs=kwArgs,value?typeof value=="function"?this.value=value:typeof value=="object"?this.value=function(object){var o={};for(var key in value)o[key]=object[value[key]];return o}:this.value=function(object){return object[value]}:this.value=function(object){return object.value},this.data=[],this._initialRendering=!1,this.fetch()},destroy:function(){this.observeHandle&&this.observeHandle.remove()},setSeriesObject:function(series){this.series=series},fetch:function(){function update(){self.data=arr.map(self.objects,function(object){return self.value(object,self.store)}),self._pushDataChanges()}var self=this;this.observeHandle&&this.observeHandle.remove();var results=this.store.query(this.kwArgs.query,this.kwArgs);Deferred.when(results,function(objects){self.objects=objects,update()}),results.observe&&(this.observeHandle=results.observe(update,!0))},_pushDataChanges:function(){this.series&&(this.series.chart.updateSeries(this.series.name,this,this._initialRendering),this._initialRendering=!1,this.series.chart.delayedRender())}})})