//>>built
define("dojox/charting/plot2d/Default","dojo/_base/lang,dojo/_base/declare,dojo/_base/array,./CartesianBase,./_PlotEvents,./common,dojox/lang/functional,dojox/lang/functional/reversed,dojox/lang/utils,dojox/gfx/fx".split(","),function(o,z,l,G,H,t,I,J,u,K){var L=J.lambda("item.purgeGroup()");return z("dojox.charting.plot2d.Default",[G,H],{defaultParams:{lines:!0,areas:!1,markers:!1,tension:"",animate:!1,enableCache:!1,interpolate:!1},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},styleFunc:null,
font:"",fontColor:"",marker:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:""},constructor:function(g,a){this.opt=o.clone(o.mixin(this.opt,this.defaultParams));u.updateWithObject(this.opt,a);u.updateWithPattern(this.opt,a,this.optionalParams);this.animate=this.opt.animate},createPath:function(g,a,c){var f;this.opt.enableCache&&0<g._pathFreePool.length?(f=g._pathFreePool.pop(),f.setShape(c),a.add(f)):f=a.createPath(c);this.opt.enableCache&&g._pathUsePool.push(f);
return f},buildSegments:function(g,a){for(var c=this.series[g],f=a?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0,l=a?Math.min(c.data.length,Math.ceil(this._hScaler.bounds.to)):c.data.length,h=null,o=[];f<l;f++)if(null!=c.data[f]&&(a||null!=c.data[f].y))h||(h=[],o.push({index:f,rseg:h})),h.push(a&&c.data[f].hasOwnProperty("y")?c.data[f].y:c.data[f]);else if(!this.opt.interpolate||a)h=null;return o},render:function(g,a){if(this.zoom&&!this.isDataDirty())return this.performZoom(g,a);this.resetEvents();
this.dirty=this.isDirty();var c;if(this.dirty)l.forEach(this.series,L),this._eventSeries={},this.cleanGroup(),this.getGroup().setTransform(null),c=this.getGroup(),I.forEachRev(this.series,function(e){e.cleanGroup(c)});for(var f=this.chart.theme,p,h,u=this.events(),v=this.series.length-1;0<=v;--v){var b=this.series[v];if(!this.dirty&&!b.dirty)f.skip(),this._reconnectEvents(b.name);else{b.cleanGroup();if(this.opt.enableCache)b._pathFreePool=(b._pathFreePool?b._pathFreePool:[]).concat(b._pathUsePool?
b._pathUsePool:[]),b._pathUsePool=[];if(b.data.length){var i=f.next(this.opt.areas?"area":"line",[this.opt,b],!0),d,A=this._hScaler.scaler.getTransformerFromModel(this._hScaler),B=this._vScaler.scaler.getTransformerFromModel(this._vScaler),z=this._eventSeries[b.name]=Array(b.data.length);c=b.group;for(var w=l.some(b.data,function(e){return"number"==typeof e||e&&!e.hasOwnProperty("x")}),x=this.buildSegments(v,w),r=0;r<x.length;r++){var k=x[r];d=w?l.map(k.rseg,function(e,b){return{x:A(b+k.index+1)+
a.l,y:g.height-a.b-B(e),data:e}},this):l.map(k.rseg,function(e){return{x:A(e.x)+a.l,y:g.height-a.b-B(e.y),data:e}},this);if(w&&this.opt.interpolate)for(;r<x.length;)r++,(k=x[r])&&(d=d.concat(l.map(k.rseg,function(e,b){return{x:A(b+k.index+1)+a.l,y:g.height-a.b-B(e),data:e}},this)));var m=this.opt.tension?t.curve(d,this.opt.tension):"";if(this.opt.areas&&1<d.length){var s=this._plotFill(i.series.fill,g,a),n=o.clone(d);this.opt.tension?b.dyn.fill=c.createPath(m+" "+("L"+n[n.length-1].x+","+(g.height-
a.b)+" L"+n[0].x+","+(g.height-a.b)+" L"+n[0].x+","+n[0].y)).setFill(s).getFill():(n.push({x:d[d.length-1].x,y:g.height-a.b}),n.push({x:d[0].x,y:g.height-a.b}),n.push(d[0]),b.dyn.fill=c.createPolyline(n).setFill(s).getFill())}if(this.opt.lines||this.opt.markers)if(p=i.series.stroke,i.series.outline)h=b.dyn.outline=t.makeStroke(i.series.outline),h.width=2*h.width+p.width;if(this.opt.markers)b.dyn.marker=i.symbol;var y=null,C=null,D=null;if(p&&i.series.shadow&&1<d.length){var q=i.series.shadow,s=l.map(d,
function(b){return{x:b.x+q.dx,y:b.y+q.dy}});if(this.opt.lines)b.dyn.shadow=this.opt.tension?c.createPath(t.curve(s,this.opt.tension)).setStroke(q).getStroke():c.createPolyline(s).setStroke(q).getStroke();if(this.opt.markers&&i.marker.shadow)q=i.marker.shadow,D=l.map(s,function(e){return this.createPath(b,c,"M"+e.x+" "+e.y+" "+i.symbol).setStroke(q).setFill(q.color)},this)}if(this.opt.lines&&1<d.length){if(h)b.dyn.outline=this.opt.tension?c.createPath(m).setStroke(h).getStroke():c.createPolyline(d).setStroke(h).getStroke();
b.dyn.stroke=this.opt.tension?c.createPath(m).setStroke(p).getStroke():c.createPolyline(d).setStroke(p).getStroke()}m=null;if(this.opt.markers){var j=i,y=Array(d.length),C=Array(d.length);h=null;if(j.marker.outline)h=t.makeStroke(j.marker.outline),h.width=2*h.width+(j.marker.stroke?j.marker.stroke.width:0);l.forEach(d,function(e,a){if(this.opt.styleFunc||"number"!=typeof e.data){var d="number"!=typeof e.data?[e.data]:[];this.opt.styleFunc&&d.push(this.opt.styleFunc(e.data));j=f.addMixin(i,"marker",
d,!0)}else j=f.post(i,"marker");d="M"+e.x+" "+e.y+" "+j.symbol;h&&(C[a]=this.createPath(b,c,d).setStroke(h));y[a]=this.createPath(b,c,d).setStroke(j.marker.stroke).setFill(j.marker.fill)},this);b.dyn.markerFill=j.marker.fill;b.dyn.markerStroke=j.marker.stroke;!m&&this.opt.labels&&(m=y[0].getBoundingBox());u?l.forEach(y,function(e,a){var c={element:"marker",index:a+k.index,run:b,shape:e,outline:C[a]||null,shadow:D&&D[a]||null,cx:d[a].x,cy:d[a].y};w?(c.x=a+k.index+1,c.y=b.data[a+k.index]):(c.x=k.rseg[a].x,
c.y=b.data[a+k.index].y);this._connectEvents(c);z[a+k.index]=c},this):delete this._eventSeries[b.name]}if(this.opt.labels){var E=m?m.width:2,F=m?m.height:2;l.forEach(d,function(a,b){if(this.opt.styleFunc||"number"!=typeof a.data){var d="number"!=typeof a.data?[a.data]:[];this.opt.styleFunc&&d.push(this.opt.styleFunc(a.data));j=f.addMixin(i,"marker",d,!0)}else j=f.post(i,"marker");this.createLabel(c,k.rseg[b],{x:a.x-E/2,y:a.y-F/2,width:E,height:F},j)},this)}}b.dirty=!1}else b.dirty=!1,f.skip()}}this.chart.isRightToLeft&&
this.chart.isRightToLeft()&&this.chart.applyMirroring(this.group,g,a);this.animate&&(p=this.getGroup(),K.animateTransform(o.delegate({shape:p,duration:1200,transform:[{name:"translate",start:[0,g.height-a.b],end:[0,0]},{name:"scale",start:[1,0],end:[1,1]},{name:"original"}]},this.animate)).play());this.dirty=!1;return this}})});