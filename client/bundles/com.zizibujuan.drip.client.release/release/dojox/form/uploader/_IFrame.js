//>>built
define("dojox/form/uploader/_IFrame","dojo/query,dojo/dom-construct,dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/dom-form,dojo/request/iframe".split(","),function(j,d,e,k,h,l,i){return e("dojox.form.uploader._IFrame",[],{postMixInProperties:function(){this.inherited(arguments);if("iframe"===this.uploadType)this.uploadType="iframe",this.upload=this.uploadIFrame},uploadIFrame:function(b){var g={},c;this.getForm();var e=this.getUrl(),f=this;b.uploadType=this.uploadType;c=d.place('<form enctype="multipart/form-data" method="post"></form>',
this.domNode);h.forEach(this._inputs,function(a){if(""!==a.value)c.appendChild(a),g[a.name]=a.value},this);if(b)for(nm in b)void 0===g[nm]&&d.create("input",{name:nm,value:b[nm],type:"hidden"},c);i.post(e,{form:c,handleAs:"json",content:b}).then(function(a){d.destroy(c);if(b.ERROR||b.error)f.onError(a);else f.onComplete(a)},function(a){d.destroy(c);f.onError(a)})}})});