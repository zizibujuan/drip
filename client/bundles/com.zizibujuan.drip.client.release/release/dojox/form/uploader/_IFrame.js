//>>built
define("dojox/form/uploader/_IFrame",["dojo/dom-construct","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/request/iframe"],function(domConstruct,declare,lang,arrayUtil,request){return declare("dojox.form.uploader._IFrame",[],{postMixInProperties:function(){this.inherited(arguments),this.uploadType==="iframe"&&(this.uploadType="iframe",this.upload=this.uploadIFrame)},uploadIFrame:function(data){var form,destroyAfter=!1;data.uploadType=this.uploadType,this.getForm()?form=this.form:(form=domConstruct.place('<form enctype="multipart/form-data" method="post"></form>',this.domNode),arrayUtil.forEach(this._inputs,function(n,i){n.value&&form.appendChild(n)},this),destroyAfter=!0);var url=this.getUrl(),self=this;request.post(url,{form:form,handleAs:"json",content:data}).then(function(result){destroyAfter&&domConstruct.destroy(form),data.ERROR||data.error?self.onError(result):self.onComplete(result)},function(err){0,destroyAfter&&domConstruct.destroy(form),self.onError(err)})}})})