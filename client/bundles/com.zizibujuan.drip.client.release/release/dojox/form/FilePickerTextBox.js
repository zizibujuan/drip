//>>built
require({cache:{"url:dojox/form/resources/FilePickerTextBox.html":'<div class="dijit dijitReset dijitInlineTable dijitLeft"\n	id="widget_${id}"\n	role="combobox" tabIndex="-1"\n	><div style="overflow:hidden;"\n		><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton\'\n			dojoAttachPoint="downArrowNode,_buttonNode,_popupStateNode" role="presentation"\n			><div class="dijitArrowButtonInner">&thinsp;</div\n			><div class="dijitArrowButtonChar">&#9660;</div\n		></div\n		><div class="dijitReset dijitValidationIcon"><br></div\n		><div class="dijitReset dijitValidationIconText">&Chi;</div\n		><div class="dijitReset dijitInputField"\n			><input type="text" autocomplete="off" ${!nameAttrSetting} class=\'dijitReset\'\n				dojoAttachEvent=\'onkeypress:_onKey\' \n				dojoAttachPoint=\'textbox,focusNode\' role="textbox" aria-haspopup="true" aria-autocomplete="list"\n		/></div\n	></div\n></div>\n'}}),define("dojox/form/FilePickerTextBox",["dojo/_base/lang","dojo/_base/array","dojo/_base/event","dojo/window","dijit/focus","dijit/registry","dijit/form/_TextBoxMixin","dijit/form/ValidationTextBox","dijit/_HasDropDown","dojox/widget/FilePicker","dojo/text!./resources/FilePickerTextBox.html","dojo/_base/declare","dojo/keys"],function(lang,array,event,windowUtils,focus,registry,_TextBoxMixin,ValidationTextBox,_HasDropDown,FilePicker,template,declare,keys){return declare("dojox.form.FilePickerTextBox",[ValidationTextBox,_HasDropDown],{baseClass:"dojoxFilePickerTextBox",templateString:template,searchDelay:500,valueItem:null,numPanes:2.25,postMixInProperties:function(){this.inherited(arguments),this.dropDown=new FilePicker(this.constraints)},postCreate:function(){this.inherited(arguments),this.connect(this.dropDown,"onChange",this._onWidgetChange),this.connect(this.focusNode,"onblur","_focusBlur"),this.connect(this.focusNode,"onfocus","_focusFocus"),this.connect(this.focusNode,"ondblclick",function(){_TextBoxMixin.selectInputText(this.focusNode)})},_setValueAttr:function(value,priorityChange,fromWidget){if(!this._searchInProgress){this.inherited(arguments),value=value||"";var tVal=this.dropDown.get("pathValue")||"";if(value!==tVal){this._skip=!0;var fx=lang.hitch(this,"_setBlurValue");this.dropDown._setPathValueAttr(value,!fromWidget,this._settingBlurValue?fx:null)}}},_onWidgetChange:function(item){if(!item&&this.focusNode.value)this._hasValidPath=!1,this.focusNode.value="";else{this.valueItem=item;var value=this.dropDown._getPathValueAttr(item);value&&(this._hasValidPath=!0),this._skip||this._setValueAttr(value,undefined,!0),delete this._skip}this.validate()},startup:function(){this.dropDown._started||this.dropDown.startup(),this.inherited(arguments)},openDropDown:function(){this.dropDown.domNode.style.width="0px","minPaneWidth"in(this.constraints||{})||this.dropDown.set("minPaneWidth",this.domNode.offsetWidth/this.numPanes),this.inherited(arguments)},toggleDropDown:function(){this.inherited(arguments),this._opened&&this.dropDown.set("pathValue",this.get("value"))},_focusBlur:function(e){e.explicitOriginalTarget==this.focusNode&&!this._allowBlur?window.setTimeout(lang.hitch(this,function(){this._allowBlur||this.focus()}),1):this._menuFocus&&(this.dropDown._updateClass(this._menuFocus,"Item",{Hover:!1}),delete this._menuFocus)},_focusFocus:function(e){this._menuFocus&&this.dropDown._updateClass(this._menuFocus,"Item",{Hover:!1}),delete this._menuFocus;var focusNode=focus.curNode;focusNode&&(focusNode=registry.byNode(focusNode),focusNode&&(this._menuFocus=focusNode.domNode)),this._menuFocus&&this.dropDown._updateClass(this._menuFocus,"Item",{Hover:!0}),delete this._allowBlur},_onBlur:function(){this._allowBlur=!0,delete this.dropDown._savedFocus,this.inherited(arguments)},_setBlurValue:function(){this.dropDown&&!this._settingBlurValue?(this._settingBlurValue=!0,this.set("value",this.focusNode.value)):(delete this._settingBlurValue,this.inherited(arguments))},parse:function(value,constraints){if(this._hasValidPath||this._hasSelection)return value;var dd=this.dropDown,topDir=dd.topDir,sep=dd.pathSeparator,ddVal=dd.get("pathValue"),norm=function(v){return topDir.length&&v.indexOf(topDir)===0&&(v=v.substring(topDir.length)),sep&&v[v.length-1]==sep&&(v=v.substring(0,v.length-1)),v};ddVal=norm(ddVal);var val=norm(value);return val==ddVal?value:undefined},_startSearchFromInput:function(){var dd=this.dropDown,fn=this.focusNode,val=fn.value,oVal=val,topDir=dd.topDir;this._hasSelection&&_TextBoxMixin.selectInputText(fn,oVal.length),this._hasSelection=!1,topDir.length&&val.indexOf(topDir)===0&&(val=val.substring(topDir.length));var dirs=val.split(dd.pathSeparator),setFromChain=lang.hitch(this,function(idx){var dir=dirs[idx],child=dd.getChildren()[idx],conn;this._searchInProgress=!0;var _cleanup=lang.hitch(this,function(){delete this._searchInProgress});(dir||child)&&!this._opened&&this.toggleDropDown();if(dir&&child){var fx=lang.hitch(this,function(){conn&&this.disconnect(conn),delete conn;var children=child._menu.getChildren(),exact=array.filter(children,function(i){return i.label==dir})[0],first=array.filter(children,function(i){return i.label.indexOf(dir)===0})[0];if(exact&&(dirs.length>idx+1&&exact.children||!exact.children))idx++,child._menu.onItemClick(exact,{type:"internal",stopPropagation:function(){},preventDefault:function(){}}),dirs[idx]?setFromChain(idx):_cleanup();else{child._setSelected(null);if(first&&dirs.length===idx+1){dd._setInProgress=!0,dd._removeAfter(child),delete dd._setInProgress;var targetString=first.label;first.children&&(targetString+=dd.pathSeparator),targetString=targetString.substring(dir.length),window.setTimeout(function(){windowUtils.scrollIntoView(first.domNode)},1),fn.value=oVal+targetString,_TextBoxMixin.selectInputText(fn,oVal.length),this._hasSelection=!0;try{first.focusNode.focus()}catch(e){}}else this._menuFocus&&this.dropDown._updateClass(this._menuFocus,"Item",{Hover:!1,Focus:!1}),delete this._menuFocus;_cleanup()}});child.isLoaded?fx():conn=this.connect(child,"onLoad",fx)}else child&&(child._setSelected(null),dd._setInProgress=!0,dd._removeAfter(child),delete dd._setInProgress),_cleanup()});setFromChain(0)},_onKey:function(e){if(this.disabled||this.readOnly)return;var c=e.charOrCode;c==keys.DOWN_ARROW&&(this._allowBlur=!0);if(c==keys.ENTER&&this._opened){this.dropDown.onExecute(),_TextBoxMixin.selectInputText(this.focusNode,this.focusNode.value.length),this._hasSelection=!1,event.stop(e);return}if(!(c!=keys.RIGHT_ARROW&&c!=keys.LEFT_ARROW&&c!=keys.TAB||!this._hasSelection)){this._startSearchFromInput(),event.stop(e);return}this.inherited(arguments);var doSearch=!1;c!=keys.BACKSPACE&&c!=keys.DELETE||!this._hasSelection?c==keys.BACKSPACE||c==keys.DELETE||c==" "?doSearch=!0:doSearch=e.keyChar!=="":this._hasSelection=!1,this._searchTimer&&window.clearTimeout(this._searchTimer),delete this._searchTimer,doSearch&&(this._hasValidPath=!1,this._hasSelection=!1,this._searchTimer=window.setTimeout(lang.hitch(this,"_startSearchFromInput"),this.searchDelay+1))}})})