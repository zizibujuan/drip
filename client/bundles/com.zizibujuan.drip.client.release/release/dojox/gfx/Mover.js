//>>built
define("dojox/gfx/Mover",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/on","dojo/has","dojo/_base/event"],function(lang,arr,declare,on,has,event){return declare("dojox.gfx.Mover",null,{constructor:function(shape,e,host){this.shape=shape,this.lastX=has("touch")?(e.changedTouches?e.changedTouches[0]:e).clientX:e.clientX,this.lastY=has("touch")?(e.changedTouches?e.changedTouches[0]:e).clientY:e.clientY;var h=this.host=host,d=document,firstEvent=on(d,has("touch")?"touchmove":"mousemove",lang.hitch(this,"onFirstMove"));this.events=[on(d,has("touch")?"touchmove":"mousemove",lang.hitch(this,"onMouseMove")),on(d,has("touch")?"touchend":"mouseup",lang.hitch(this,"destroy")),on(d,"dragstart",lang.hitch(event,"stop")),on(d,"selectstart",lang.hitch(event,"stop")),firstEvent],h&&h.onMoveStart&&h.onMoveStart(this)},onMouseMove:function(e){var x=has("touch")?(e.changedTouches?e.changedTouches[0]:e).clientX:e.clientX,y=has("touch")?(e.changedTouches?e.changedTouches[0]:e).clientY:e.clientY;this.host.onMove(this,{dx:x-this.lastX,dy:y-this.lastY}),this.lastX=x,this.lastY=y,event.stop(e)},onFirstMove:function(){this.host.onFirstMove(this),this.events.pop().remove()},destroy:function(){arr.forEach(this.events,function(h){h.remove()});var h=this.host;h&&h.onMoveStop&&h.onMoveStop(this),this.events=this.shape=null}})})