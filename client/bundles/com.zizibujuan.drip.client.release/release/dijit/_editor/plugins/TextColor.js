//>>built
define("dijit/_editor/plugins/TextColor",["require","dojo/colors","dojo/_base/declare","dojo/_base/lang","../_Plugin","../../form/DropDownButton"],function(require,colors,declare,lang,_Plugin,DropDownButton){var TextColor=declare("dijit._editor.plugins.TextColor",_Plugin,{buttonClass:DropDownButton,useDefaultCommand:!1,_initButton:function(){this.inherited(arguments);var self=this;this.button.loadDropDown=function(callback){require(["../../ColorPalette"],lang.hitch(this,function(ColorPalette){this.dropDown=new ColorPalette({dir:self.editor.dir,ownerDocument:self.editor.ownerDocument,value:self.value,onChange:function(color){self.editor.execCommand(self.command,color)}}),callback()}))}},updateState:function(){var _e=this.editor,_c=this.command;if(!_e||!_e.isLoaded||!_c.length)return;if(this.button){var disabled=this.get("disabled");this.button.set("disabled",disabled);if(disabled)return;var value;try{value=_e.queryCommandValue(_c)||""}catch(e){value=""}}value==""&&(value="#000000"),value=="transparent"&&(value="#ffffff"),typeof value=="string"?value.indexOf("rgb")>-1&&(value=colors.fromRgb(value).toHex()):(value=(value&255)<<16|value&65280|(value&16711680)>>>16,value=value.toString(16),value="#000000".slice(0,7-value.length)+value),this.value=value;var dropDown=this.button.dropDown;dropDown&&value!==dropDown.get("value")&&dropDown.set("value",value,!1)}});return _Plugin.registry.foreColor=function(){return new TextColor({command:"foreColor"})},_Plugin.registry.hiliteColor=function(){return new TextColor({command:"hiliteColor"})},TextColor})