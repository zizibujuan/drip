//>>built
define("dijit/a11yclick",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","dojo/_base/unload","dojo/_base/window"],function(on,array,keys,declare,has,unload,win){function clickKey(e){return(e.keyCode===keys.ENTER||e.keyCode===keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey}var lastKeyDownNode=null;return has("dom-addeventlistener")?win.doc.addEventListener("keydown",function(evt){lastKeyDownNode=evt.target},!0):function(){var keydownCallback=function(evt){lastKeyDownNode=evt.srcElement};win.doc.attachEvent("onkeydown",keydownCallback),unload.addOnWindowUnload(function(){win.doc.detachEvent("onkeydown",keydownCallback)})}(),function(node,listener){if(/input|button/i.test(node.nodeName))return on(node,"click",listener);var handles=[on(node,"keydown",function(e){clickKey(e)&&(lastKeyDownNode=e.target,e.preventDefault())}),on(node,"keyup",function(e){clickKey(e)&&e.target==lastKeyDownNode&&(lastKeyDownNode=null,on.emit(e.target,"click",{cancelable:!0,bubbles:!0}))}),on(node,"click",function(e){listener.call(this,e)})];if(has("touch")){var clickTimer;handles.push(on(node,"touchend",function(e){var target=e.target;clickTimer=setTimeout(function(){clickTimer=null,on.emit(target,"click",{cancelable:!0,bubbles:!0})},600)}),on(node,"click",function(e){clickTimer&&clearTimeout(clickTimer)}))}return{remove:function(){array.forEach(handles,function(h){h.remove()}),clickTimer&&(clearTimeout(clickTimer),clickTimer=null)}}}})