//>>built
define("dijit/form/_FormWidgetMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","dojo/window","../a11y"],function(array,declare,domAttr,domStyle,lang,mouse,on,has,winUtils,a11y){return declare("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(value){this._set("disabled",value),domAttr.set(this.focusNode,"disabled",value),this.valueNode&&domAttr.set(this.valueNode,"disabled",value),this.focusNode.setAttribute("aria-disabled",value?"true":"false");if(value){this._set("hovering",!1),this._set("active",!1);var attachPointNames="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode";array.forEach(lang.isArray(attachPointNames)?attachPointNames:[attachPointNames],function(attachPointName){var node=this[attachPointName];has("webkit")||a11y.hasDefaultTabStop(node)?node.setAttribute("tabIndex","-1"):node.removeAttribute("tabIndex")},this)}else this.tabIndex!=""&&this.set("tabIndex",this.tabIndex)},_onFocus:function(by){if(by=="mouse"&&this.isFocusable())var focusHandle=this.own(on(this.focusNode,"focus",function(){mouseUpHandle.remove(),focusHandle.remove()}))[0],mouseUpHandle=this.own(on(this.ownerDocumentBody,"mouseup, touchend",lang.hitch(this,function(){mouseUpHandle.remove(),focusHandle.remove(),this.focused&&this.focus()})))[0];this.scrollOnFocus&&this.defer(function(){winUtils.scrollIntoView(this.domNode)}),this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&domStyle.get(this.domNode,"display")!="none"},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(e){}},compare:function(val1,val2){return typeof val1=="number"&&typeof val2=="number"?isNaN(val1)&&isNaN(val2)?0:val1-val2:val1>val2?1:val1<val2?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(newValue,priorityChange){this._lastValueReported==undefined&&(priorityChange===null||!this._onChangeActive)&&(this._resetValue=this._lastValueReported=newValue),this._pendingOnChange=this._pendingOnChange||typeof newValue!=typeof this._lastValueReported||this.compare(newValue,this._lastValueReported)!=0,(this.intermediateChanges||priorityChange||priorityChange===undefined)&&this._pendingOnChange&&(this._lastValueReported=newValue,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null,this.onChange(newValue)})))},create:function(){this.inherited(arguments),this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported)),this.inherited(arguments)}})})