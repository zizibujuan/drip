//>>built
define("dijit/_WidgetBase",["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./Destroyable","dojo/has!dojo-bidi?./_BidiMixin","./registry"],function(require,array,aspect,config,connect,declare,dom,domAttr,domClass,domConstruct,domGeometry,domStyle,has,kernel,lang,on,ready,Stateful,topic,win,Destroyable,_BidiMixin,registry){function getAttrs(obj){var ret={};for(var attr in obj)ret[attr.toLowerCase()]=!0;return ret}function nonEmptyAttrToDom(attr){return function(val){domAttr[val?"set":"remove"](this.domNode,attr,val),this._set(attr,val)}}has.add("dijit-legacy-requires",!kernel.isAsync),has.add("dojo-bidi",!1),has("dijit-legacy-requires")&&ready(0,function(){var requires=["dijit/_base/manager"];require(requires)});var tagAttrs={},_WidgetBase=declare("dijit._WidgetBase",[Stateful,Destroyable],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:nonEmptyAttrToDom("lang"),dir:"",_setDirAttr:nonEmptyAttrToDom("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(val){this._set("ownerDocument",val)},attributeMap:{},_blankGif:config.blankGif||require.toUrl("dojo/resources/blank.gif"),postscript:function(params,srcNodeRef){this.create(params,srcNodeRef)},create:function(params,srcNodeRef){this.srcNodeRef=dom.byId(srcNodeRef),this._connects=[],this._supportingWidgets=[],this.srcNodeRef&&typeof this.srcNodeRef.id=="string"&&(this.id=this.srcNodeRef.id),params&&(this.params=params,lang.mixin(this,params)),this.postMixInProperties(),this.id||(this.id=registry.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id),this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:win.doc),this.ownerDocumentBody=win.body(this.ownerDocument),registry.add(this),this.buildRendering();var deleteSrcNodeRef;if(this.domNode){this._applyAttributes();var source=this.srcNodeRef;source&&source.parentNode&&this.domNode!==source&&(source.parentNode.replaceChild(this.domNode,source),deleteSrcNodeRef=!0),this.domNode.setAttribute("widgetId",this.id)}this.postCreate(),deleteSrcNodeRef&&delete this.srcNodeRef,this._created=!0},_applyAttributes:function(){var ctor=this.constructor,list=ctor._setterAttrs;if(!list){list=ctor._setterAttrs=[];for(var attr in this.attributeMap)list.push(attr);var proto=ctor.prototype;for(var fxName in proto){if(fxName in this.attributeMap)continue;var setterName="_set"+fxName.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase()})+"Attr";setterName in proto&&list.push(fxName)}}var params={};for(var key in this.params||{})params[key]=this[key];array.forEach(list,function(attr){attr in params||this[attr]&&this.set(attr,this[attr])},this);for(key in params)this.set(key,params[key])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var classes=this.baseClass.split(" ");this.isLeftToRight()||(classes=classes.concat(array.map(classes,function(name){return name+"Rtl"}))),domClass.add(this.domNode,classes)}},postCreate:function(){},startup:function(){if(this._started)return;this._started=!0,array.forEach(this.getChildren(),function(obj){!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)&&(obj.startup(),obj._started=!0)})},destroyRecursive:function(preserveDom){this._beingDestroyed=!0,this.destroyDescendants(preserveDom),this.destroy(preserveDom)},destroy:function(preserveDom){function destroy(w){w.destroyRecursive?w.destroyRecursive(preserveDom):w.destroy&&w.destroy(preserveDom)}this._beingDestroyed=!0,this.uninitialize(),array.forEach(this._connects,lang.hitch(this,"disconnect")),array.forEach(this._supportingWidgets,destroy),this.domNode&&array.forEach(registry.findWidgets(this.domNode,this.containerNode),destroy),this.destroyRendering(preserveDom),registry.remove(this.id),this._destroyed=!0},destroyRendering:function(preserveDom){this.bgIframe&&(this.bgIframe.destroy(preserveDom),delete this.bgIframe),this.domNode&&(preserveDom?domAttr.remove(this.domNode,"widgetId"):domConstruct.destroy(this.domNode),delete this.domNode),this.srcNodeRef&&(preserveDom||domConstruct.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(preserveDom){array.forEach(this.getChildren(),function(widget){widget.destroyRecursive&&widget.destroyRecursive(preserveDom)})},uninitialize:function(){return!1},_setStyleAttr:function(value){var mapNode=this.domNode;lang.isObject(value)?domStyle.set(mapNode,value):mapNode.style.cssText?mapNode.style.cssText+="; "+value:mapNode.style.cssText=value,this._set("style",value)},_attrToDom:function(attr,value,commands){commands=arguments.length>=3?commands:this.attributeMap[attr],array.forEach(lang.isArray(commands)?commands:[commands],function(command){var mapNode=this[command.node||command||"domNode"],type=command.type||"attribute";switch(type){case"attribute":lang.isFunction(value)&&(value=lang.hitch(this,value));var attrName=command.attribute?command.attribute:/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr;mapNode.tagName?domAttr.set(mapNode,attrName,value):mapNode.set(attrName,value);break;case"innerText":mapNode.innerHTML="",mapNode.appendChild(this.ownerDocument.createTextNode(value));break;case"innerHTML":mapNode.innerHTML=value;break;case"class":domClass.replace(mapNode,value,this[attr])}},this)},get:function(name){var names=this._getAttrNames(name);return this[names.g]?this[names.g]():this[name]},set:function(name,value){if(typeof name=="object"){for(var x in name)this.set(x,name[x]);return this}var names=this._getAttrNames(name),setter=this[names.s];if(lang.isFunction(setter))var result=setter.apply(this,Array.prototype.slice.call(arguments,1));else{var defaultNode=this.focusNode&&!lang.isFunction(this.focusNode)?"focusNode":"domNode",tag=this[defaultNode]&&this[defaultNode].tagName,attrsForTag=tag&&(tagAttrs[tag]||(tagAttrs[tag]=getAttrs(this[defaultNode]))),map=name in this.attributeMap?this.attributeMap[name]:names.s in this?this[names.s]:attrsForTag&&names.l in attrsForTag&&typeof value!="function"||/^aria-|^data-|^role$/.test(name)?defaultNode:null;map!=null&&this._attrToDom(name,value,map),this._set(name,value)}return result||this},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name])return apn[name];var uc=name.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase()});return apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr",l:uc.toLowerCase()}},_set:function(name,value){var oldValue=this[name];this[name]=value,this._created&&value!==oldValue&&(this._watchCallbacks&&this._watchCallbacks(name,oldValue,value),this.emit("attrmodified-"+name,{detail:{prevValue:oldValue,newValue:value}}))},emit:function(type,eventObj,callbackArgs){eventObj=eventObj||{},eventObj.bubbles===undefined&&(eventObj.bubbles=!0),eventObj.cancelable===undefined&&(eventObj.cancelable=!0),eventObj.detail||(eventObj.detail={}),eventObj.detail.widget=this;var ret,callback=this["on"+type];return callback&&(ret=callback.apply(this,callbackArgs?callbackArgs:[eventObj])),this._started&&!this._beingDestroyed&&on.emit(this.domNode,type.toLowerCase(),eventObj),ret},on:function(type,func){var widgetMethod=this._onMap(type);return widgetMethod?aspect.after(this,widgetMethod,func,!0):this.own(on(this.domNode,type,func))[0]},_onMap:function(type){var ctor=this.constructor,map=ctor._onMap;if(!map){map=ctor._onMap={};for(var attr in ctor.prototype)/^on/.test(attr)&&(map[attr.replace(/^on/,"").toLowerCase()]=attr)}return map[typeof type=="string"&&type.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?registry.findWidgets(this.containerNode):[]},getParent:function(){return registry.getEnclosingWidget(this.domNode.parentNode)},connect:function(obj,event,method){return this.own(connect.connect(obj,event,this,method))[0]},disconnect:function(handle){handle.remove()},subscribe:function(t,method){return this.own(topic.subscribe(t,lang.hitch(this,method)))[0]},unsubscribe:function(handle){handle.remove()},isLeftToRight:function(){return this.dir?this.dir=="ltr":domGeometry.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&domStyle.get(this.domNode,"display")!="none"},placeAt:function(reference,position){var refWidget=!reference.tagName&&registry.byId(reference);if(refWidget&&refWidget.addChild&&(!position||typeof position=="number"))refWidget.addChild(this,position);else{var ref=refWidget?refWidget.containerNode&&!/after|before|replace/.test(position||"")?refWidget.containerNode:refWidget.domNode:dom.byId(reference,this.ownerDocument);domConstruct.place(this.domNode,ref,position),!this._started&&(this.getParent()||{})._started&&this.startup()}return this},defer:function(fcn,delay){var timer=setTimeout(lang.hitch(this,function(){timer=null,this._destroyed||lang.hitch(this,fcn)()}),delay||0);return{remove:function(){return timer&&(clearTimeout(timer),timer=null),null}}}});return has("dojo-bidi")&&_WidgetBase.extend(_BidiMixin),_WidgetBase})