//>>built
define("dijit/selection",["dojo/dom","dojo/_base/lang","dojo/sniff","dojo/_base/window"],function(h,g,i,j){var g=function(f){var d=f.document;this.getType=function(){if(d.getSelection){var a="text",b;try{b=f.getSelection()}catch(c){}b&&1==b.rangeCount&&(b=b.getRangeAt(0),b.startContainer==b.endContainer&&1==b.endOffset-b.startOffset&&3!=b.startContainer.nodeType&&(a="control"));return a}return d.selection.type.toLowerCase()};this.getSelectedText=function(){if(d.getSelection){var a=f.getSelection();
return a?a.toString():""}return"control"==this.getType()?null:d.selection.createRange().text};this.getSelectedHtml=function(){if(d.getSelection){var a=f.getSelection();if(a&&a.rangeCount){var b,c="";for(b=0;b<a.rangeCount;b++){var e=a.getRangeAt(b).cloneContents(),k=d.createElement("div");k.appendChild(e);c+=k.innerHTML}return c}return null}return"control"==this.getType()?null:d.selection.createRange().htmlText};this.getSelectedElement=function(){if("control"==this.getType()){if(d.getSelection){var a=
f.getSelection();return a.anchorNode.childNodes[a.anchorOffset]}if((a=d.selection.createRange())&&a.item)return d.selection.createRange().item(0)}return null};this.getParentElement=function(){if("control"==this.getType()){var a=this.getSelectedElement();if(a)return a.parentNode}else if(d.getSelection){if(a=d.getSelection()){for(a=a.anchorNode;a&&1!=a.nodeType;)a=a.parentNode;return a}}else return a=d.selection.createRange(),a.collapse(!0),a.parentElement();return null};this.hasAncestorElement=function(a){return null!=
this.getAncestorElement.apply(this,arguments)};this.getAncestorElement=function(a){return this.getParentOfType(this.getSelectedElement()||this.getParentElement(),arguments)};this.getParentOfType=function(a,b){for(;a;){var c;a:{c=b;if(a&&a.tagName)for(var d=a.tagName.toLowerCase(),f=0;f<c.length;f++){var g=(""+c[f]).toLowerCase();if(d==g){c=g;break a}}c=""}if(c.length)return a;a=a.parentNode}return null};this.collapse=function(a){if(d.getSelection){var b=f.getSelection();b.removeAllRanges?a?b.collapseToStart():
b.collapseToEnd():b.collapse(a)}else b=d.selection.createRange(),b.collapse(a),b.select()};this.remove=function(){var a=d.selection;d.getSelection?(a=f.getSelection(),a.deleteFromDocument()):"none"!=a.type.toLowerCase()&&a.clear();return a};this.selectElementChildren=function(a,b){var c,a=h.byId(a);if(d.getSelection){var e=f.getSelection();i("opera")?(c=e.rangeCount?e.getRangeAt(0):d.createRange(),c.setStart(a,0),c.setEnd(a,3==a.nodeType?a.length:a.childNodes.length),e.addRange(c)):e.selectAllChildren(a)}else if(c=
a.ownerDocument.body.createTextRange(),c.moveToElementText(a),!b)try{c.select()}catch(g){}};this.selectElement=function(a,b){var c,a=h.byId(a);if(d.getSelection){var e=d.getSelection();c=d.createRange();e.removeAllRanges&&(i("opera")&&e.getRangeAt(0)&&(c=e.getRangeAt(0)),c.selectNode(a),e.removeAllRanges(),e.addRange(c))}else try{e=a.tagName?a.tagName.toLowerCase():"",c="img"===e||"table"===e?j.body(d).createControlRange():j.body(d).createRange(),c.addElement(a),b||c.select()}catch(f){this.selectElementChildren(a,
b)}};this.inSelection=function(a){if(a){var b,c;if(d.getSelection){var e=f.getSelection();e&&0<e.rangeCount&&(c=e.getRangeAt(0));if(c&&c.compareBoundaryPoints&&d.createRange)try{if(b=d.createRange(),b.setStart(a,0),1===c.compareBoundaryPoints(c.START_TO_END,b))return!0}catch(g){}}else{c=d.selection.createRange();try{(b=a.ownerDocument.body.createControlRange())&&b.addElement(a)}catch(h){try{b=a.ownerDocument.body.createTextRange(),b.moveToElementText(a)}catch(i){}}if(c&&b&&1===c.compareEndPoints("EndToStart",
b))return!0}}return!1}},l=new g(window);l.SelectionManager=g;return l});