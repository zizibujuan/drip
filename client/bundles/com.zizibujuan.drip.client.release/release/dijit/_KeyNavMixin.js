//>>built
define("dijit/_KeyNavMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dijit/registry","dijit/_FocusMixin"],function(array,declare,domAttr,keys,lang,on,registry,_FocusMixin){return declare("dijit._KeyNavMixin",_FocusMixin,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments),domAttr.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var keyCodes=this._keyNavCodes={};keyCodes[keys.HOME]=lang.hitch(this,"focusFirstChild"),keyCodes[keys.END]=lang.hitch(this,"focusLastChild"),keyCodes[this.isLeftToRight()?keys.LEFT_ARROW:keys.RIGHT_ARROW]=lang.hitch(this,"_onLeftArrow"),keyCodes[this.isLeftToRight()?keys.RIGHT_ARROW:keys.LEFT_ARROW]=lang.hitch(this,"_onRightArrow"),keyCodes[keys.UP_ARROW]=lang.hitch(this,"_onUpArrow"),keyCodes[keys.DOWN_ARROW]=lang.hitch(this,"_onDownArrow")}var self=this,childSelector=typeof this.childSelector=="string"?this.childSelector:lang.hitch(this,"childSelector");this.own(on(this.domNode,"keypress",lang.hitch(this,"_onContainerKeypress")),on(this.domNode,"keydown",lang.hitch(this,"_onContainerKeydown")),on(this.domNode,"focus",lang.hitch(this,"_onContainerFocus")),on(this.containerNode,on.selector(childSelector,"focusin"),function(evt){self._onChildFocus(registry.getEnclosingWidget(this),evt)}))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},focusFirstChild:function(){},focusLastChild:function(){},focusChild:function(widget,last){if(!widget)return;this.focusedChild&&widget!==this.focusedChild&&this._onChildBlur(this.focusedChild),widget.set("tabIndex",this.tabIndex),widget.focus(last?"end":"start")},_onContainerFocus:function(evt){if(evt.target!==this.domNode||this.focusedChild)return;this.focusFirstChild()},_onFocus:function(){domAttr.set(this.domNode,"tabIndex","-1"),this.inherited(arguments)},_onBlur:function(evt){domAttr.set(this.domNode,"tabIndex",this.tabIndex),this.focusedChild&&(this.focusedChild.set("tabIndex","-1"),this._set("focusedChild",null)),this.inherited(arguments)},_onChildFocus:function(child){child&&child!=this.focusedChild&&(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),child.set("tabIndex",this.tabIndex),this.lastFocused=child,this._set("focusedChild",child))},_searchString:"",multiCharSearchDuration:1e3,onKeyboardSearch:function(item,evt,searchString,numMatches){item&&this.focusChild(item)},_keyboardSearchCompare:function(item,searchString){var element=item.domNode,text=item.label||(element.focusNode?element.focusNode.label:"")||element.innerText||element.textContent||"",currentString=text.replace(/^\s+/,"").substr(0,searchString.length).toLowerCase();return!searchString.length||currentString!=searchString?0:-1},_onContainerKeydown:function(evt){var func=this._keyNavCodes[evt.keyCode];func&&(func(evt,this.focusedChild),evt.stopPropagation(),evt.preventDefault(),this._searchString="")},_onContainerKeypress:function(evt){if(evt.charCode<=32)return;if(evt.ctrlKey||evt.altKey)return;var matchedItem=null,searchString,numMatches=0,search=lang.hitch(this,function(){this._searchTimer&&this._searchTimer.remove(),this._searchString+=keyChar;var allSameLetter=/^(.)\1*$/.test(this._searchString),searchLen=allSameLetter?1:this._searchString.length;searchString=this._searchString.substr(0,searchLen),this._searchTimer=this.defer(function(){this._searchTimer=null,this._searchString=""},this.multiCharSearchDuration);var currentItem=this.focusedChild||null;if(searchLen==1||!currentItem){currentItem=this._getNextFocusableChild(currentItem,1);if(!currentItem)return}var stop=currentItem;do{var rc=this._keyboardSearchCompare(currentItem,searchString);!!rc&&numMatches++==0&&(matchedItem=currentItem);if(rc==-1){numMatches=-1;break}currentItem=this._getNextFocusableChild(currentItem,1)}while(currentItem!=stop)}),keyChar=String.fromCharCode(evt.charCode).toLowerCase();search(),this.onKeyboardSearch(matchedItem,evt,searchString,numMatches)},_onChildBlur:function(){},_getNextFocusableChild:function(child){return null}})})