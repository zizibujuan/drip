//>>built
define("dijit/_MenuBase","dojo/_base/array,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/_base/lang,dojo/mouse,dojo/on,dojo/window,./a11yclick,./popup,./registry,./_Widget,./_CssStateMixin,./_KeyNavContainer,./_TemplatedMixin".split(","),function(q,k,r,h,i,f,j,d,s,l,g,e,m,n,o,p){return k("dijit._MenuBase",[m,p,o,n],{parentMenu:null,popupDelay:500,autoFocus:!1,childSelector:function(a){var b=e.byNode(a);return a.parentNode==this.containerNode&&b&&b.focus},postCreate:function(){var a=
this,b="string"==typeof this.childSelector?this.childSelector:f.hitch(this,"childSelector");this.own(d(this.containerNode,d.selector(b,j.enter),function(){a.onItemHover(e.byNode(this))}),d(this.containerNode,d.selector(b,j.leave),function(){a.onItemUnhover(e.byNode(this))}),d(this.containerNode,d.selector(b,l),function(b){a.onItemClick(e.byNode(this),b);b.stopPropagation();b.preventDefault()}));this.inherited(arguments)},onKeyboardSearch:function(a,b,c,d){this.inherited(arguments);if(a&&(-1==d||a.popup&&
1==d))this.onItemClick(a,b)},_keyboardSearchCompare:function(a,b){return a.shortcutKey?b==a.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,a);else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){if(this.currentPopup&&this.currentPopup._pendingClose_timer){var a=this.currentPopup.parentMenu;
a.focusedChild&&a.focusedChild._setSelected(!1);a.focusedChild=this.currentPopup.from_item;a.focusedChild._setSelected(!0);this._stopPendingCloseTimer(this.currentPopup)}},onItemHover:function(a){if(this.isActive&&(this.focusChild(a),a.popup&&!a.disabled&&!this.hover_timer))this.hover_timer=this.defer(f.hitch(this,"_openPopup",a),this.popupDelay);this.focusedChild&&this.focusChild(a);this._hoveredChild=a;a._set("hovering",!0)},_onChildBlur:function(a){this._stopPopupTimer();a._setSelected(!1);var b=
a.popup;if(b)this._stopPendingCloseTimer(b),b._pendingClose_timer=this.defer(function(){b._pendingClose_timer=null;if(b.parentMenu)b.parentMenu.currentPopup=null;g.close(b)},this.popupDelay)},onItemUnhover:function(a){this.isActive&&this._stopPopupTimer();if(this._hoveredChild==a)this._hoveredChild=null;a._set("hovering",!1)},_stopPopupTimer:function(){if(this.hover_timer)this.hover_timer=this.hover_timer.remove()},_stopPendingCloseTimer:function(a){if(a._pendingClose_timer)a._pendingClose_timer=
a._pendingClose_timer.remove()},_stopFocusTimer:function(){if(this._focus_timer)this._focus_timer=this._focus_timer.remove()},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){"undefined"==typeof this.isShowingNow&&this._markActive();this.focusChild(a);if(a.disabled)return!1;a.popup?this._openPopup(a,/^key/.test(b.type)):(this.onExecute(),a._onClick?a._onClick(b):a.onClick(b))},_openPopup:function(a,b){this._stopPopupTimer();var c=a.popup;if(!c.isShowingNow){this.currentPopup&&
(this._stopPendingCloseTimer(this.currentPopup),g.close(this.currentPopup));c.parentMenu=this;c.from_item=a;var e=this;g.open({parent:this,popup:c,around:a.domNode,orient:this._orient||["after","before"],onCancel:function(){e.focusChild(a);e._cleanUp();a._setSelected(!0);e.focusedChild=a},onExecute:f.hitch(this,"_cleanUp")});this.currentPopup=c;this.currentPopupParent=a;c.own(d(c.domNode,"mouseenter",f.hitch(e,"_onPopupHover")))}if(b&&c.focus)c._focus_timer=this.defer(f.hitch(c,function(){this._focus_timer=
null;this.focus()}))},_markActive:function(){this.isActive=!0;i.replace(this.domNode,"dijitMenuActive","dijitMenuPassive")},onOpen:function(){this.isShowingNow=!0;this._markActive()},_markInactive:function(){this.isActive=!1;i.replace(this.domNode,"dijitMenuPassive","dijitMenuActive")},onClose:function(){this._stopFocusTimer();this._markInactive();this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();if(this.currentPopup)this.focused&&(h.set(this.currentPopupParent.focusNode,
"tabIndex",this.tabIndex),this.currentPopupParent.focusNode.focus()),g.close(this.currentPopup),this.currentPopup=this.currentPopupParent=null;this.focusedChild&&(this.focusedChild._setSelected(!1),this.onItemUnhover(this.focusedChild));h.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild&&(this.focusedChild.set("tabIndex","-1"),this._set("focusedChild",null))},_onItemFocus:function(a){if(this._hoveredChild&&this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild)},_onBlur:function(){this._cleanUp();
this.inherited(arguments)},_cleanUp:function(){this._closeChild();"undefined"==typeof this.isShowingNow&&this._markInactive()}})});