//>>built
require({cache:{"url:drip/widget/templates/Login.html":'<div style="width: 250px">\n<!-- form的宽度要在初始化时通过style设置, style="width: 250px"-->\n	<div data-dojo-attach-point="errorMsgNode" style="color: red;font-weight: bold;text-align: center;display: none;">\n		无效的用户名或密码\n	</div>\n	<div data-dojo-type="dijit/form/Form" data-dojo-attach-point="loginFormNode">\n		<div data-dojo-type="dijit/form/ValidationTextBox"\n		data-dojo-attach-point="txtLoginNode"\n		style="margin-bottom: 10px;display: block;padding: 8px;width:233px" \n		data-dojo-props="\'placeholder\':\'邮箱/手机号/用户名\',\n		\'required\':true,\n		\'name\':\'login\',\n		\'value\':\'c@c.com\',\n		\'missingMessage\':\'请输入登录名\'"></div>\n		<div data-dojo-type="dijit/form/ValidationTextBox"\n		data-dojo-attach-point="txtPwdNode"\n		style="display: block;padding: 8px;width:233px" \n		data-dojo-props="\'type\':\'password\',\n		\'placeholder\':\'密码\',\n		\'required\':true, \n		\'name\':\'password\',\n		\'value\':\'123qaz\',\n		\'missingMessage\':\'请输入密码\'"></div>\n		<div style="padding-top: 3px; padding-bottom: 3px">\n			<div data-dojo-type="dijit/form/CheckBox" id="rememberMe"></div><label for="rememberMe">下次自动登录</label>\n			<span style="float: right"><a href="#">忘记密码？</a></span>\n		</div>\n		<div style="text-align: center;">\n			<div data-dojo-type="dijit/form/Button" style="font-size: 14px; margin-top: 10px;" data-dojo-attach-point="btnLoginNode">登录</div>\n		</div>\n	</div>\n</div>'}}),define("drip/widget/Login",["dojo/_base/declare","dojo/_base/lang","dojo/keys","dojo/request/xhr","dojo/dom-style","dojo/dom-form","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/Login.html","dijit/form/Form","dijit/form/ValidationTextBox","dijit/form/CheckBox","dijit/form/Button"],function(declare,lang,keys,xhr,domStyle,domForm,_WidgetBase,_TemplatedMixin,_WidgetsInTemplateMixin,loginTemplate){return declare("drip.widget.Login",[_WidgetBase,_TemplatedMixin,_WidgetsInTemplateMixin],{templateString:loginTemplate,url:"/login/form",postCreate:function(){this.btnLoginNode.on("click",lang.hitch(this,this._confirmLogin)),this.txtLoginNode.on("keyPress",lang.hitch(this,function(e){e.keyCode==keys.ENTER&&this._confirmLogin(e)})),this.txtPwdNode.on("keyPress",lang.hitch(this,function(e){e.keyCode==keys.ENTER&&this._confirmLogin(e)})),this.txtLoginNode.focus()},_confirmLogin:function(e){this._showErrorMsg(!1);var loginForm=this.loginFormNode;if(loginForm.validate()){var sessionInfo=domForm.toJson(loginForm.domNode);xhr.post(this.url,{data:sessionInfo,handleAs:"json"}).then(function(response){window.location="/"},function(error){this._showErrorMsg(!0)})}},_showErrorMsg:function(show){show?domStyle.set(this.errorMsgNode,"display",""):domStyle.set(this.errorMsgNode,"display","none")}})})