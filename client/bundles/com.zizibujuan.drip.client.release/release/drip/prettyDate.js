//>>built
define("drip/prettyDate",["dojo/_base/lang","dojo/query","dojo/string","dojo/dom-prop","dojo/date","dojo/date/stamp","dojo/i18n!./nls/prettyDate"],function(lang,query,string,domProp,date,stamp,prettyDateMessages){"use strict";var prettyDate={pretty:function(dateString){var date=stamp.fromISOString(dateString),nowTime=(new Date).getTime(),diff=(nowTime-date.getTime())/1e3,dayDiff=Math.floor(diff/86400);if(isNaN(dayDiff)||dayDiff<0)return"";var messages=prettyDateMessages;if(dayDiff===0){if(diff<60)return messages.now;if(diff<120)return messages.minute;if(diff<3600)return string.substitute(messages.minutes,{num:Math.floor(diff/60)});if(diff<7200)return messages.hour;if(diff<86400)return string.substitute(messages.hours,{num:Math.floor(diff/3600)})}if(dayDiff===1)return messages.yesterday;if(dayDiff<7)return string.substitute(messages.days,{num:dayDiff});if(dayDiff<8)return messages.week;if(dayDiff<14)return string.substitute(messages.days,{num:dayDiff});if(dayDiff<30)return string.substitute(messages.weeks,{num:Math.ceil(dayDiff/7)});if(dayDiff<32)return messages.month;if(dayDiff<363)return string.substitute(messages.months,{num:Math.ceil(dayDiff/31)});if(dayDiff<=380)return messages.year;if(dayDiff>380)return string.substitute(messages.years,{num:Math.ceil(dayDiff/365)})},setInterval:function(parent,interval){this.parent=parent,interval&&setInterval(lang.hitch(this,this._format),interval)},_format:function(){query("time",this.parent).forEach(lang.hitch(this,function(el,index){var datetime=domProp.get(el,"datetime"),pretty=this.pretty(datetime);el.innerHTML=pretty}))}};return prettyDate})