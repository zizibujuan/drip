//>>built
require({cache:{"url:drip/templates/MemberNode.html":'\x3cli\x3e\n\t\x3ca data-dojo-attach-point\x3d"userImgLinkNode"\x3e\x3cimg class\x3d"avatar" width\x3d"20px" height\x3d"20px" data-dojo-attach-point\x3d"userImgNode"/\x3e\x3c/a\x3e\n\t\x3cspan\x3e\x3ca  data-dojo-attach-point\x3d"userNickNameLinkNode"\x3e\u6635\u79f0\x3c/a\x3e\x3cem data-dojo-attach-point\x3d"userRealNameNode"\x3e(\u59d3\u540d)\x3c/em\x3e\x3c/span\x3e\n\t\x3cspan class\x3d"user-following"\x3e\x3cinput type\x3d"button" data-dojo-attach-point\x3d"actionNode"/\x3e\x3c/span\x3e\n\x3c/li\x3e'}});
define("drip/MemberList","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/on dojo/topic dojo/request/xhr dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/MemberNode.html".split(" "),function(e,b,k,l,f,m,d,g,h,n){var p=e("drip.MemberNode",[g,h],{templateString:n,data:{},postCreate:function(){this.inherited(arguments);var a=this.data,c=a.nickName||a.loginName,b="/users/"+a.digitalId;this.userImgLinkNode.href=b;this.userImgNode.src=a.smallImageUrl||"/drip/resources/images/profile_50_50.gif";
this.userImgNode.alt=c;this.userNickNameLinkNode.innerHTML=c;this.userNickNameLinkNode.href=b;this.userRealNameNode.innerHTML=a.realName?"("+a.realName+")":"";c=a.connectUserId;"0"==a.watched?l.destroy(this.actionNode):"1"==a.watched?this._cancelWatch(c):"2"==a.watched&&this._watch(c)},_cancelWatch:function(a){this.actionNode.value="\u53d6\u6d88\u5173\u6ce8";f.once(this.actionNode,"click",b.hitch(this,function(c){d.put("/follow/"+a,{handleAs:"json",query:{op:"off"}}).then(b.hitch(this,function(b){this._watch(a);
this.updateFollowingCount(-1)}),b.hitch(this,function(a){}))}))},_watch:function(a){this.actionNode.value="+ \u5173\u6ce8";f.once(this.actionNode,"click",b.hitch(this,function(c){d.put("/follow/"+a,{handleAs:"json",query:{op:"on"}}).then(b.hitch(this,function(b){this._cancelWatch(a);this.updateFollowingCount(1)}),b.hitch(this,function(a){}))}))},updateFollowingCount:function(a){m.publish("memberList/updateFollowingCount",a)}});return e("drip.MemberList",[g,h],{templateString:"\x3cul class\x3d'members'\x3e\x3c/ul\x3e",
url:null,emptyHtml:"",postCreate:function(){this.inherited(arguments);d.get(this.url,{handleAs:"json",preventCache:!0}).then(b.hitch(this,this._load))},_load:function(a){0==a.length?this.domNode.innerHTML=this.emptyHtml:k.forEach(a,b.hitch(this,function(a,b){var d=new p({data:a});this.domNode.appendChild(d.domNode)}))}})});
//@ sourceMappingURL=MemberList.js.map