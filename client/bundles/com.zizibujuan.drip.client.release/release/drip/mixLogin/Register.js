//>>built
require({cache:{"url:drip/templates/Register.html":'\x3cdiv\x3e\n\t\x3cdiv\x3e\n\t\t\x3cform data-dojo-attach-point\x3d"signupForm"\x3e\n\t\t\t\x3cdiv class\x3d"form_row"\x3e\n\t\t\t\t\x3cspan class\x3d"add-on"\x3e\x3ci class\x3d"icon-envelope"\x3e\x3c/i\x3e\x3c/span\x3e\n\t\t\t\t\x3cinput data-dojo-attach-point\x3d"email" name\x3d"email" type\x3d"email" placeholder\x3d"\u90ae\u7bb1" maxlength\x3d"50"\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d"form_row"\x3e\n\t\t\t\t\x3cspan class\x3d"add-on"\x3e\x3ci class\x3d"icon-key"\x3e\x3c/i\x3e\x3c/span\x3e\n\t\t\t\t\x3cinput data-dojo-attach-point\x3d"password" name\x3d"password" type\x3d"password" placeholder\x3d"\u5bc6\u7801" maxlength\x3d"20"\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d"form_row"\x3e\n\t\t\t\t\x3cspan class\x3d"add-on"\x3e\x3ci class\x3d"icon-user"\x3e\x3c/i\x3e\x3c/span\x3e\n\t\t\t\t\x3cinput data-dojo-attach-point\x3d"loginName" name\x3d"loginName" type\x3d"text" placeholder\x3d"\u7528\u6237\u540d" maxlength\x3d"20"\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/form\x3e\n\t\x3c/div\x3e\n\t\x3cul data-dojo-attach-point\x3d"errorContainer" class\x3d"signup_form_errors"\x3e\x3c/ul\x3e\n\t\x3cbutton class\x3d"signup_form_submit" data-dojo-attach-point\x3d"btnSignup"\x3e\u6ce8\u518c\x3c/button\x3e\n\x3c/div\x3e'}});
define("drip/mixLogin/Register","dojo/_base/declare dojo/_base/lang dojo/request/xhr dojo/on dojo/keys dojo/string dojo/dom-form dojo/dom-construct dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!drip/templates/Register.html".split(" "),function(k,b,l,e,f,g,m,h,n,p,q){return k("drip.mixLogin.Register",[n,p],{templateString:q,errors:[],postCreate:function(){this.inherited(arguments);e(this.btnSignup,"click",b.hitch(this,this._signup));e(this.email,"keydown",b.hitch(this,function(a){a.keyCode==f.ENTER&&
this._signup()}));e(this.password,"keydown",b.hitch(this,function(a){a.keyCode==f.ENTER&&this._signup()}));e(this.loginName,"keydown",b.hitch(this,function(a){a.keyCode==f.ENTER&&this._signup()}));e(this.btnSignup,"keydown",b.hitch(this,function(a){a.keyCode==f.ENTER&&this._signup()}))},_signup:function(){this.validate();if(this._hasErrors())this._showErrors();else{var a=m.toJson(this.signupForm);l.post("/users",{handleAs:"json",data:a}).then(b.hitch(this,this._signupSuccess),b.hitch(this,this._signupError))}},
validate:function(){var a=[],b=this.email.value,c=this.password.value,d=this.loginName.value,b=g.trim(b);""==b?a.push("\u8bf7\u8f93\u5165\u5e38\u7528\u90ae\u7bb1"):50<b.length?a.push("\u90ae\u7bb1\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26"):/[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}/.test(b)||a.push("\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e");""==c?a.push("\u8bf7\u8f93\u5165\u5bc6\u7801"):0<c.length&&""==g.trim(c)?a.push("\u5bc6\u7801\u4e0d\u80fd\u5168\u4e3a\u7a7a\u683c"):6>c.length||20<
c.length?a.push("\u5bc6\u7801\u957f\u5ea6\u5e94\u4e3a6\u523020\u4e2a\u5b57\u7b26"):/^[0-9]+$/.test(c)?a.push("\u5bc6\u7801\u4e0d\u80fd\u5168\u4e3a\u6570\u5b57"):/^[A-Za-z]+$/.test(c)&&a.push("\u5bc6\u7801\u4e0d\u80fd\u5168\u4e3a\u5b57\u6bcd");d=g.trim(d);""==d?a.push("\u8bf7\u8f93\u5165\u7528\u6237\u540d"):20<d.length?a.push("\u7528\u6237\u540d\u4e0d\u80fd\u591a\u4e8e20\u4e2a\u5b57\u7b26"):/^(?![-_])[a-zA-Z0-9_-]+$/.test(d)||a.push("\u7528\u6237\u540d\u53ea\u80fd\u5305\u542b\u82f1\u6587\u5b57\u6bcd\uff0c\u6570\u5b57,-\u6216_\uff0c\u4e0d\u80fd\u4ee5-\u6216_\u5f00\u5934\uff0c\u4e0d\u533a\u5206\u5927\u5c0f\u5199");
this.errors=a},_hasErrors:function(){return 0<this.errors.length},_showErrors:function(){var a=this.errorContainer;h.empty(a);for(var b=this.errors,c=b.length,d=0;d<c;d++)h.create("li",{innerHTML:b[d],"class":"error"},a)},_signupSuccess:function(){window.location.href="/"},_signupError:function(a){a.response.data&&(this.errors=a.response.data,this._showErrors())},startup:function(){this.inherited(arguments);setTimeout(b.hitch(this,function(){this.email.focus()}),0)}})});
//@ sourceMappingURL=Register.js.map