//>>built
define("drip/mixLogin/Login","dojo/_base/declare dojo/_base/lang dojo/request/xhr dojo/on dojo/string dojo/dom-form dojo/dom-construct dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!drip/templates/Login.html".split(" "),function(f,b,g,h,k,l,e,m,n,p){return f("drip.mixLogin.Login",[m,n],{templateString:p,errors:[],postCreate:function(){this.inherited(arguments);h(this.btnLogin,"click",b.hitch(this,this._login))},_login:function(){this.validate();if(this._hasErrors())this._showErrors();else{var a=
l.toJson(this.loginForm);g.post("/login/form",{handleAs:"json",data:a}).then(b.hitch(this,this._loginSuccess),b.hitch(this,this._loginError))}},validate:function(){var a=[],c=this.login.value,b=this.password.value,c=k.trim(c);""==c&&a.push("\u8bf7\u8f93\u5165\u90ae\u7bb1\u6216\u7528\u6237\u540d");""==b&&a.push("\u8bf7\u8f93\u5165\u5bc6\u7801");this.errors=a},_hasErrors:function(){return 0<this.errors.length},_showErrors:function(){var a=this.errorContainer;e.empty(a);for(var c=this.errors,b=c.length,
d=0;d<b;d++)e.create("li",{innerHTML:c[d]},a)},_loginSuccess:function(){window.location.href="/"},_loginError:function(a){a.response.data&&(this.errors=a.response.data,this._showErrors())}})});require({cache:{"url:drip/templates/Login.html":'\x3cdiv\x3e\n\t\x3cdiv\x3e\n\t\t\x3cform data-dojo-attach-point\x3d"loginForm"\x3e\n\t\t\t\x3cdiv\x3e\n\t\t\t\t\x3cinput data-dojo-attach-point\x3d"login" name\x3d"login" type\x3d"text" placeholder\x3d"\u8bf7\u8f93\u5165\u90ae\u7bb1\u6216\u7528\u6237\u540d" maxlength\x3d"50"\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\x3cdiv\x3e\n\t\t\t\t\x3cinput data-dojo-attach-point\x3d"password" name\x3d"password" type\x3d"password" placeholder\x3d"\u8bf7\u8f93\u5165\u5bc6\u7801" maxlength\x3d"20"\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/form\x3e\n\t\x3c/div\x3e\n\t\x3cul data-dojo-attach-point\x3d"errorContainer"\x3e\x3c/ul\x3e\n\t\x3cbutton data-dojo-attach-point\x3d"btnLogin"\x3e\u767b\u5f55\x3c/button\x3e\n\x3c/div\x3e'}});
//@ sourceMappingURL=Login.js.map