//>>built
require({cache:{"url:drip/templates/Login.html":'\x3cdiv\x3e\n\t\x3cdiv\x3e\n\t\t\x3cform data-dojo-attach-point\x3d"loginForm"\x3e\n\t\t\t\x3cdiv class\x3d"form_row"\x3e\n\t\t\t\t\x3cspan class\x3d"add-on"\x3e\x3ci class\x3d"icon-envelope"\x3e\x3c/i\x3e\x3c/span\x3e\n\t\t\t\t\x3cinput data-dojo-attach-point\x3d"login" name\x3d"login" type\x3d"text" placeholder\x3d"\u90ae\u7bb1\u6216\u7528\u6237\u540d" maxlength\x3d"50"\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d"form_row"\x3e\n\t\t\t \t\x3cspan class\x3d"add-on"\x3e\x3ci class\x3d"icon-key"\x3e\x3c/i\x3e\x3c/span\x3e\n\t\t\t\t\x3cinput data-dojo-attach-point\x3d"password" name\x3d"password" type\x3d"password" placeholder\x3d"\u5bc6\u7801" maxlength\x3d"20"\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/form\x3e\n\t\x3c/div\x3e\n\t\x3cul data-dojo-attach-point\x3d"errorContainer" class\x3d"signup_form_errors"\x3e\x3c/ul\x3e\n\t\x3cbutton class\x3d"signup_form_submit" data-dojo-attach-point\x3d"btnLogin"\x3e\u767b\u5f55\x3c/button\x3e\n\x3c/div\x3e'}});
define("drip/mixLogin/Login","dojo/_base/declare dojo/_base/lang dojo/request/xhr dojo/on dojo/keys dojo/string dojo/dom-form dojo/dom-construct dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!drip/templates/Login.html".split(" "),function(f,b,g,c,d,h,k,e,l,m,n){return f("drip.mixLogin.Login",[l,m],{templateString:n,errors:[],postCreate:function(){this.inherited(arguments);c(this.btnLogin,"click",b.hitch(this,this._login));c(this.login,"keydown",b.hitch(this,function(a){a.keyCode==d.ENTER&&this._login()}));
c(this.password,"keydown",b.hitch(this,function(a){a.keyCode==d.ENTER&&this._login()}));c(this.btnLogin,"keydown",b.hitch(this,function(a){a.keyCode==d.ENTER&&this._login()}))},_login:function(){this.validate();if(this._hasErrors())this._showErrors();else{var a=k.toJson(this.loginForm);g.post("/login/form",{handleAs:"json",data:a}).then(b.hitch(this,this._loginSuccess),b.hitch(this,this._loginError))}},validate:function(){var a=[],b=this.login.value,c=this.password.value,b=h.trim(b);""==b&&a.push("\u8bf7\u8f93\u5165\u90ae\u7bb1\u6216\u7528\u6237\u540d");
""==c&&a.push("\u8bf7\u8f93\u5165\u5bc6\u7801");this.errors=a},_hasErrors:function(){return 0<this.errors.length},_showErrors:function(){var a=this.errorContainer;e.empty(a);for(var b=this.errors,c=b.length,d=0;d<c;d++)e.create("li",{innerHTML:b[d],"class":"error"},a)},_loginSuccess:function(){window.location.href="/"},_loginError:function(a){a.response.data&&(this.errors=a.response.data,this._showErrors())},startup:function(){this.inherited(arguments);setTimeout(b.hitch(this,function(){this.login.focus()}),
0)}})});
//@ sourceMappingURL=Login.js.map