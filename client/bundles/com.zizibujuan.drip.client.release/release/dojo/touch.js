//>>built
define("dojo/touch","./_base/kernel,./aspect,./dom,./dom-class,./_base/lang,./on,./has,./mouse,./domReady,./_base/window".split(","),function(B,l,D,C,m,e,i,j,n,b){function f(a,b,c){return o&&c?function(a,b){return e(a,c,b)}:k?function(p,c){var d=e(p,b,c),f=e(p,a,function(a){(!g||(new Date).getTime()>g+1E3)&&c.call(this,a)});return{remove:function(){d.remove();f.remove()}}}:function(b,c){return e(b,a,c)}}function q(a){do if(a.dojoClick)return a.dojoClick;while(a=a.parentNode)}function r(a,d,f){if(c=
q(a.target))s=a.target,t=a.touches?a.touches[0].pageX:a.clientX,u=a.touches?a.touches[0].pageY:a.clientY,v=("object"==typeof c?c.x:"number"==typeof c?c:0)||4,w=("object"==typeof c?c.y:"number"==typeof c?c:0)||4,x||(x=!0,b.doc.addEventListener(d,function(a){c=c&&a.target==s&&Math.abs((a.touches?a.touches[0].pageX:a.clientX)-t)<=v&&Math.abs((a.touches?a.touches[0].pageY:a.clientY)-u)<=w},!0),b.doc.addEventListener(f,function(a){c&&(y=(new Date).getTime(),setTimeout(function(){e.emit(a.target,"click",
{target:a.target,bubbles:!0,cancelable:!0,_dojo_click:!0})}))},!0),a=function(a){b.doc.addEventListener(a,function(a){!a._dojo_click&&(q(a.target)||(new Date).getTime()<=y+1E3&&!("INPUT"==a.target.tagName&&C.contains(a.target,"dijitOffScreen")))&&a.stopImmediatePropagation()},!0)},a("click"),a("mousedown"),a("mouseup"))}var k=i("touch"),h=i("ios")&&5>i("ios"),o=navigator.msPointerEnabled,x,c,s,t,u,v,w,y,g,z,A,d;k&&(o?n(function(){b.doc.addEventListener("MSPointerDown",function(a){r(a,"MSPointerMove",
"MSPointerUp")},!0)}):(n(function(){d=b.body();b.doc.addEventListener("touchstart",function(a){g=(new Date).getTime();var b=d;d=a.target;e.emit(b,"dojotouchout",{target:b,relatedTarget:d,bubbles:!0});e.emit(d,"dojotouchover",{target:d,relatedTarget:b,bubbles:!0});r(a,"touchmove","touchend")},!0);e(b.doc,"touchmove",function(a){g=(new Date).getTime();A=a;if(a=b.doc.elementFromPoint(a.pageX-(h?0:b.global.pageXOffset),a.pageY-(h?0:b.global.pageYOffset)))d!==a&&(e.emit(d,"dojotouchout",{target:d,relatedTarget:a,
bubbles:!0}),e.emit(a,"dojotouchover",{target:a,relatedTarget:d,bubbles:!0}),d=a),e.emit(a,"dojotouchmove",{target:a,bubbles:!0})});e(b.doc,"touchend",function(a){g=(new Date).getTime();var c=b.doc.elementFromPoint(a.pageX-(h?0:b.global.pageXOffset),a.pageY-(h?0:b.global.pageYOffset))||b.body();e.emit(c,"dojotouchend",m.delegate(a,{target:c,bubbles:!0}))})}),z=function(a,b){return e(a,"dojotouchmove",function(a){b(m.delegate(A,{target:a.target,stopPropagation:function(){a.stopPropagation()}}))})}));
l={press:f("mousedown","touchstart","MSPointerDown"),move:f("mousemove",z,"MSPointerMove"),release:f("mouseup","dojotouchend","MSPointerUp"),cancel:f(j.leave,"touchcancel",k?"MSPointerCancel":null),over:f("mouseover","dojotouchover","MSPointerOver"),out:f("mouseout","dojotouchout","MSPointerOut"),enter:j._eventHandler(f("mouseover","dojotouchover","MSPointerOver")),leave:j._eventHandler(f("mouseout","dojotouchout","MSPointerOut"))};return B.touch=l});