//>>built
define("dojo/touch","./_base/kernel,./aspect,./dom,./_base/lang,./on,./has,./mouse,./domReady,./_base/window".split(","),function(B,n,D,o,d,k,l,p,b){function e(a,b,c){return q&&c?function(a,g){return d(a,c,g)}:m?function(c,g){var e=d(c,b,g),C=d(c,a,function(a){(!h||(new Date).getTime()>h+1E3)&&g.call(this,a)});return{remove:function(){e.remove();C.remove()}}}:function(b,g){return d(b,a,g)}}function r(a){do if(a.dojoClick)return a.dojoClick;while(a=a.parentNode)}function s(a,c,e){var f;if(f=r(a.target))i=
!0,t=a.target,u=a.touches?a.touches[0].pageX:a.clientX,v=a.touches?a.touches[0].pageY:a.clientY,w=("object"==typeof f?f.x:"number"==typeof f?f:0)||4,x=("object"==typeof f?f.y:"number"==typeof f?f:0)||4,y||(y=!0,b.doc.addEventListener(c,function(a){i=i&&a.target==t&&Math.abs((a.touches?a.touches[0].pageX:a.clientX)-u)<=w&&Math.abs((a.touches?a.touches[0].pageY:a.clientY)-v)<=x},!0),b.doc.addEventListener(e,function(a){i&&setTimeout(function(){d.emit(a.target,"click",{target:a.target,bubbles:!0,cancelable:!0,
_dojo_click:!0})})},!0),b.doc.addEventListener("click",function(a){!a._dojo_click&&r(a.target)&&(a.stopImmediatePropagation(),a.preventDefault())},!0))}var m=k("touch"),j=k("ios")&&5>k("ios"),q=navigator.msPointerEnabled,y,i,t,u,v,w,x,h,z,A,c;m&&(q?p(function(){b.doc.addEventListener("MSPointerDown",function(a){s(a,"MSPointerMove","MSPointerUp")},!0)}):(p(function(){c=b.body();b.doc.addEventListener("touchstart",function(a){h=(new Date).getTime();var b=c;c=a.target;d.emit(b,"dojotouchout",{target:b,
relatedTarget:c,bubbles:!0});d.emit(c,"dojotouchover",{target:c,relatedTarget:b,bubbles:!0});s(a,"touchmove","touchend")},!0);d(b.doc,"touchmove",function(a){h=(new Date).getTime();A=a;if(a=b.doc.elementFromPoint(a.pageX-(j?0:b.global.pageXOffset),a.pageY-(j?0:b.global.pageYOffset)))c!==a&&(d.emit(c,"dojotouchout",{target:c,relatedTarget:a,bubbles:!0}),d.emit(a,"dojotouchover",{target:a,relatedTarget:c,bubbles:!0}),c=a),d.emit(a,"dojotouchmove",{target:a,bubbles:!0})});d(b.doc,"touchend",function(a){var c=
b.doc.elementFromPoint(a.pageX-(j?0:b.global.pageXOffset),a.pageY-(j?0:b.global.pageYOffset))||b.body();d.emit(c,"dojotouchend",o.delegate(a,{target:c,bubbles:!0}))})}),z=function(a,b){return d(a,"dojotouchmove",function(a){b(o.delegate(A,{target:a.target,stopPropagation:function(){a.stopPropagation()}}))})}));n={press:e("mousedown","touchstart","MSPointerDown"),move:e("mousemove",z,"MSPointerMove"),release:e("mouseup","dojotouchend","MSPointerUp"),cancel:e(l.leave,"touchcancel",m?"MSPointerCancel":
null),over:e("mouseover","dojotouchover","MSPointerOver"),out:e("mouseout","dojotouchout","MSPointerOut"),enter:l._eventHandler(e("mouseover","dojotouchover","MSPointerOver")),leave:l._eventHandler(e("mouseout","dojotouchout","MSPointerOut"))};return B.touch=n});