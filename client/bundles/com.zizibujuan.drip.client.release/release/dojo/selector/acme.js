//>>built
define("dojo/selector/acme",["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(dom,has,array,lang,win){var trim=lang.trim,each=array.forEach,getDoc=function(){return win.doc},cssCaseBug=getDoc().compatMode=="BackCompat",specials=">~+",caseSensitive=!1,yesman=function(){return!0},getQueryParts=function(query){specials.indexOf(query.slice(-1))>=0?query+=" * ":query+=" ";var ts=function(s,e){return trim(query.slice(s,e))},queryParts=[],inBrackets=-1,inParens=-1,inMatchFor=-1,inPseudo=-1,inClass=-1,inId=-1,inTag=-1,currentQuoteChar,lc="",cc="",pStart,x=0,ql=query.length,currentPart=null,_cp=null,endTag=function(){if(inTag>=0){var tv=inTag==x?null:ts(inTag,x);currentPart[specials.indexOf(tv)<0?"tag":"oper"]=tv,inTag=-1}},endId=function(){inId>=0&&(currentPart.id=ts(inId,x).replace(/\\/g,""),inId=-1)},endClass=function(){inClass>=0&&(currentPart.classes.push(ts(inClass+1,x).replace(/\\/g,"")),inClass=-1)},endAll=function(){endId(),endTag(),endClass()},endPart=function(){endAll(),inPseudo>=0&&currentPart.pseudos.push({name:ts(inPseudo+1,x)}),currentPart.loops=currentPart.pseudos.length||currentPart.attrs.length||currentPart.classes.length,currentPart.oquery=currentPart.query=ts(pStart,x),currentPart.otag=currentPart.tag=currentPart.oper?null:currentPart.tag||"*",currentPart.tag&&(currentPart.tag=currentPart.tag.toUpperCase()),queryParts.length&&queryParts[queryParts.length-1].oper&&(currentPart.infixOper=queryParts.pop(),currentPart.query=currentPart.infixOper.query+" "+currentPart.query),queryParts.push(currentPart),currentPart=null};for(;lc=cc,cc=query.charAt(x),x<ql;x++){if(lc=="\\")continue;currentPart||(pStart=x,currentPart={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return caseSensitive?this.otag:this.tag}},inTag=x);if(currentQuoteChar){cc==currentQuoteChar&&(currentQuoteChar=null);continue}if(cc=="'"||cc=='"'){currentQuoteChar=cc;continue}if(inBrackets>=0){if(cc=="]"){_cp.attr?_cp.matchFor=ts(inMatchFor||inBrackets+1,x):_cp.attr=ts(inBrackets+1,x);var cmf=_cp.matchFor;cmf&&(cmf.charAt(0)=='"'||cmf.charAt(0)=="'")&&(_cp.matchFor=cmf.slice(1,-1)),_cp.matchFor&&(_cp.matchFor=_cp.matchFor.replace(/\\/g,"")),currentPart.attrs.push(_cp),_cp=null,inBrackets=inMatchFor=-1}else if(cc=="="){var addToCc="|~^$*".indexOf(lc)>=0?lc:"";_cp.type=addToCc+cc,_cp.attr=ts(inBrackets+1,x-addToCc.length),inMatchFor=x+1}}else inParens>=0?cc==")"&&(inPseudo>=0&&(_cp.value=ts(inParens+1,x)),inPseudo=inParens=-1):cc=="#"?(endAll(),inId=x+1):cc=="."?(endAll(),inClass=x):cc==":"?(endAll(),inPseudo=x):cc=="["?(endAll(),inBrackets=x,_cp={}):cc=="("?(inPseudo>=0&&(_cp={name:ts(inPseudo+1,x),value:null},currentPart.pseudos.push(_cp)),inParens=x):cc==" "&&lc!=cc&&endPart()}return queryParts},agree=function(first,second){return first?second?function(){return first.apply(window,arguments)&&second.apply(window,arguments)}:first:second},getArr=function(i,arr){var r=arr||[];return i&&r.push(i),r},_isElement=function(n){return 1==n.nodeType},blank="",_getAttr=function(elem,attr){return elem?attr=="class"?elem.className||blank:attr=="for"?elem.htmlFor||blank:attr=="style"?elem.style.cssText||blank:(caseSensitive?elem.getAttribute(attr):elem.getAttribute(attr,2))||blank:blank},attrs={"*=":function(attr,value){return function(elem){return _getAttr(elem,attr).indexOf(value)>=0}},"^=":function(attr,value){return function(elem){return _getAttr(elem,attr).indexOf(value)==0}},"$=":function(attr,value){return function(elem){var ea=" "+_getAttr(elem,attr),lastIndex=ea.lastIndexOf(value);return lastIndex>-1&&lastIndex==ea.length-value.length}},"~=":function(attr,value){var tval=" "+value+" ";return function(elem){var ea=" "+_getAttr(elem,attr)+" ";return ea.indexOf(tval)>=0}},"|=":function(attr,value){var valueDash=value+"-";return function(elem){var ea=_getAttr(elem,attr);return ea==value||ea.indexOf(valueDash)==0}},"=":function(attr,value){return function(elem){return _getAttr(elem,attr)==value}}},_noNES=typeof getDoc().firstChild.nextElementSibling=="undefined",_ns=_noNES?"nextSibling":"nextElementSibling",_ps=_noNES?"previousSibling":"previousElementSibling",_simpleNodeTest=_noNES?_isElement:yesman,_lookLeft=function(node){while(node=node[_ps])if(_simpleNodeTest(node))return!1;return!0},_lookRight=function(node){while(node=node[_ns])if(_simpleNodeTest(node))return!1;return!0},getNodeIndex=function(node){var root=node.parentNode;root=root.nodeType!=7?root:root.nextSibling;var i=0,tret=root.children||root.childNodes,ci=node._i||node.getAttribute("_i")||-1,cl=root._l||(typeof root.getAttribute!="undefined"?root.getAttribute("_l"):-1);if(!tret)return-1;var l=tret.length;if(cl==l&&ci>=0&&cl>=0)return ci;has("ie")&&typeof root.setAttribute!="undefined"?root.setAttribute("_l",l):root._l=l,ci=-1;for(var te=root.firstElementChild||root.firstChild;te;te=te[_ns])_simpleNodeTest(te)&&(has("ie")?te.setAttribute("_i",++i):te._i=++i,node===te&&(ci=i));return ci},isEven=function(elem){return!(getNodeIndex(elem)%2)},isOdd=function(elem){return getNodeIndex(elem)%2},pseudos={checked:function(name,condition){return function(elem){return"checked"in elem?!!elem.checked:!!elem.selected}},disabled:function(name,condition){return function(elem){return elem.disabled}},enabled:function(name,condition){return function(elem){return!elem.disabled}},"first-child":function(){return _lookLeft},"last-child":function(){return _lookRight},"only-child":function(name,condition){return function(node){return _lookLeft(node)&&_lookRight(node)}},empty:function(name,condition){return function(elem){var cn=elem.childNodes,cnl=elem.childNodes.length;for(var x=cnl-1;x>=0;x--){var nt=cn[x].nodeType;if(nt===1||nt==3)return!1}return!0}},contains:function(name,condition){var cz=condition.charAt(0);if(cz=='"'||cz=="'")condition=condition.slice(1,-1);return function(elem){return elem.innerHTML.indexOf(condition)>=0}},not:function(name,condition){var p=getQueryParts(condition)[0],ignores={el:1};p.tag!="*"&&(ignores.tag=1),p.classes.length||(ignores.classes=1);var ntf=getSimpleFilterFunc(p,ignores);return function(elem){return!ntf(elem)}},"nth-child":function(name,condition){var pi=parseInt;if(condition=="odd")return isOdd;if(condition=="even")return isEven;if(condition.indexOf("n")!=-1){var tparts=condition.split("n",2),pred=tparts[0]?tparts[0]=="-"?-1:pi(tparts[0]):1,idx=tparts[1]?pi(tparts[1]):0,lb=0,ub=-1;pred>0?idx<0?idx=idx%pred&&pred+idx%pred:idx>0&&(idx>=pred&&(lb=idx-idx%pred),idx%=pred):pred<0&&(pred*=-1,idx>0&&(ub=idx,idx%=pred));if(pred>0)return function(elem){var i=getNodeIndex(elem);return i>=lb&&(ub<0||i<=ub)&&i%pred==idx};condition=idx}var ncount=pi(condition);return function(elem){return getNodeIndex(elem)==ncount}}},defaultGetter=has("ie")<9||has("ie")==9&&has("quirks")?function(cond){var clc=cond.toLowerCase();return clc=="class"&&(cond="className"),function(elem){return caseSensitive?elem.getAttribute(cond):elem[cond]||elem[clc]}}:function(cond){return function(elem){return elem&&elem.getAttribute&&elem.hasAttribute(cond)}},getSimpleFilterFunc=function(query,ignores){if(!query)return yesman;ignores=ignores||{};var ff=null;return"el"in ignores||(ff=agree(ff,_isElement)),"tag"in ignores||query.tag!="*"&&(ff=agree(ff,function(elem){return elem&&(caseSensitive?elem.tagName:elem.tagName.toUpperCase())==query.getTag()})),"classes"in ignores||each(query.classes,function(cname,idx,arr){var re=new RegExp("(?:^|\\s)"+cname+"(?:\\s|$)");ff=agree(ff,function(elem){return re.test(elem.className)}),ff.count=idx}),"pseudos"in ignores||each(query.pseudos,function(pseudo){var pn=pseudo.name;pseudos[pn]&&(ff=agree(ff,pseudos[pn](pn,pseudo.value)))}),"attrs"in ignores||each(query.attrs,function(attr){var matcher,a=attr.attr;attr.type&&attrs[attr.type]?matcher=attrs[attr.type](a,attr.matchFor):a.length&&(matcher=defaultGetter(a)),matcher&&(ff=agree(ff,matcher))}),"id"in ignores||query.id&&(ff=agree(ff,function(elem){return!!elem&&elem.id==query.id})),ff||"default"in ignores||(ff=yesman),ff},_nextSibling=function(filterFunc){return function(node,ret,bag){while(node=node[_ns]){if(_noNES&&!_isElement(node))continue;(!bag||_isUnique(node,bag))&&filterFunc(node)&&ret.push(node);break}return ret}},_nextSiblings=function(filterFunc){return function(root,ret,bag){var te=root[_ns];while(te){if(_simpleNodeTest(te)){if(bag&&!_isUnique(te,bag))break;filterFunc(te)&&ret.push(te)}te=te[_ns]}return ret}},_childElements=function(filterFunc){return filterFunc=filterFunc||yesman,function(root,ret,bag){var te,x=0,tret=root.children||root.childNodes;while(te=tret[x++])_simpleNodeTest(te)&&(!bag||_isUnique(te,bag))&&filterFunc(te,x)&&ret.push(te);return ret}},_isDescendant=function(node,root){var pn=node.parentNode;while(pn){if(pn==root)break;pn=pn.parentNode}return!!pn},_getElementsFuncCache={},getElementsFunc=function(query){var retFunc=_getElementsFuncCache[query.query];if(retFunc)return retFunc;var io=query.infixOper,oper=io?io.oper:"",filterFunc=getSimpleFilterFunc(query,{el:1}),qt=query.tag,wildcardTag="*"==qt,ecs=getDoc().getElementsByClassName;if(!oper)if(query.id)filterFunc=!query.loops&&wildcardTag?yesman:getSimpleFilterFunc(query,{el:1,id:1}),retFunc=function(root,arr){var te=dom.byId(query.id,root.ownerDocument||root);if(!te||!filterFunc(te))return;if(9==root.nodeType)return getArr(te,arr);if(_isDescendant(te,root))return getArr(te,arr)};else if(ecs&&/\{\s*\[native code\]\s*\}/.test(String(ecs))&&query.classes.length&&!cssCaseBug){filterFunc=getSimpleFilterFunc(query,{el:1,classes:1,id:1});var classesString=query.classes.join(" ");retFunc=function(root,arr,bag){var ret=getArr(0,arr),te,x=0,tret=root.getElementsByClassName(classesString);while(te=tret[x++])filterFunc(te,root)&&_isUnique(te,bag)&&ret.push(te);return ret}}else!wildcardTag&&!query.loops?retFunc=function(root,arr,bag){var ret=getArr(0,arr),te,x=0,tag=query.getTag(),tret=tag?root.getElementsByTagName(tag):[];while(te=tret[x++])_isUnique(te,bag)&&ret.push(te);return ret}:(filterFunc=getSimpleFilterFunc(query,{el:1,tag:1,id:1}),retFunc=function(root,arr,bag){var ret=getArr(0,arr),te,x=0,tag=query.getTag(),tret=tag?root.getElementsByTagName(tag):[];while(te=tret[x++])filterFunc(te,root)&&_isUnique(te,bag)&&ret.push(te);return ret});else{var skipFilters={el:1};wildcardTag&&(skipFilters.tag=1),filterFunc=getSimpleFilterFunc(query,skipFilters),"+"==oper?retFunc=_nextSibling(filterFunc):"~"==oper?retFunc=_nextSiblings(filterFunc):">"==oper&&(retFunc=_childElements(filterFunc))}return _getElementsFuncCache[query.query]=retFunc},filterDown=function(root,queryParts){var candidates=getArr(root),qp,x,te,qpl=queryParts.length,bag,ret;for(var i=0;i<qpl;i++){ret=[],qp=queryParts[i],x=candidates.length-1,x>0&&(bag={},ret.nozip=!0);var gef=getElementsFunc(qp);for(var j=0;te=candidates[j];j++)gef(te,ret,bag);if(!ret.length)break;candidates=ret}return ret},_queryFuncCacheDOM={},_queryFuncCacheQSA={},getStepQueryFunc=function(query){var qparts=getQueryParts(trim(query));if(qparts.length==1){var tef=getElementsFunc(qparts[0]);return function(root){var r=tef(root,[]);return r&&(r.nozip=!0),r}}return function(root){return filterDown(root,qparts)}},noZip=has("ie")?"commentStrip":"nozip",qsa="querySelectorAll",qsaAvail=!!getDoc()[qsa],infixSpaceRe=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,infixSpaceFunc=function(match,pre,ch,post){return ch?(pre?pre+" ":"")+ch+(post?" "+post:""):match},attRe=/([^[]*)([^\]]*])?/g,attFunc=function(match,nonAtt,att){return nonAtt.replace(infixSpaceRe,infixSpaceFunc)+(att||"")},getQueryFunc=function(query,forceDOM){query=query.replace(attRe,attFunc);if(qsaAvail){var qsaCached=_queryFuncCacheQSA[query];if(qsaCached&&!forceDOM)return qsaCached}var domCached=_queryFuncCacheDOM[query];if(domCached)return domCached;var qcz=query.charAt(0),nospace=-1==query.indexOf(" ");query.indexOf("#")>=0&&nospace&&(forceDOM=!0);var useQSA=qsaAvail&&!forceDOM&&specials.indexOf(qcz)==-1&&(!has("ie")||query.indexOf(":")==-1)&&!(cssCaseBug&&query.indexOf(".")>=0)&&query.indexOf(":contains")==-1&&query.indexOf(":checked")==-1&&query.indexOf("|=")==-1;if(useQSA){var tq=specials.indexOf(query.charAt(query.length-1))>=0?query+" *":query;return _queryFuncCacheQSA[query]=function(root){try{if(9!=root.nodeType&&!nospace)throw"";var r=root[qsa](tq);return r[noZip]=!0,r}catch(e){return getQueryFunc(query,!0)(root)}}}var parts=query.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return _queryFuncCacheDOM[query]=parts.length<2?getStepQueryFunc(query):function(root){var pindex=0,ret=[],tp;while(tp=parts[pindex++])ret=ret.concat(getStepQueryFunc(tp)(root));return ret}},_zipIdx=0,_nodeUID=has("ie")?function(node){return caseSensitive?node.getAttribute("_uid")||node.setAttribute("_uid",++_zipIdx)||_zipIdx:node.uniqueID}:function(node){return node._uid||(node._uid=++_zipIdx)},_isUnique=function(node,bag){if(!bag)return 1;var id=_nodeUID(node);return bag[id]?0:bag[id]=1},_zipIdxName="_zipIdx",_zip=function(arr){if(arr&&arr.nozip)return arr;var ret=[];if(!arr||!arr.length)return ret;arr[0]&&ret.push(arr[0]);if(arr.length<2)return ret;_zipIdx++;var x,te;if(has("ie")&&caseSensitive){var szidx=_zipIdx+"";arr[0].setAttribute(_zipIdxName,szidx);for(x=1;te=arr[x];x++)arr[x].getAttribute(_zipIdxName)!=szidx&&ret.push(te),te.setAttribute(_zipIdxName,szidx)}else if(has("ie")&&arr.commentStrip)try{for(x=1;te=arr[x];x++)_isElement(te)&&ret.push(te)}catch(e){}else{arr[0]&&(arr[0][_zipIdxName]=_zipIdx);for(x=1;te=arr[x];x++)arr[x][_zipIdxName]!=_zipIdx&&ret.push(te),te[_zipIdxName]=_zipIdx}return ret},query=function(query,root){root=root||getDoc();var od=root.ownerDocument||root;caseSensitive=od.createElement("div").tagName==="div";var r=getQueryFunc(query)(root);return r&&r.nozip?r:_zip(r)};return query.filter=function(nodeList,filter,root){var tmpNodeList=[],parts=getQueryParts(filter),filterFunc=parts.length==1&&!/[^\w#\.]/.test(filter)?getSimpleFilterFunc(parts[0]):function(node){return array.indexOf(query(filter,dom.byId(root)),node)!=-1};for(var x=0,te;te=nodeList[x];x++)filterFunc(te)&&tmpNodeList.push(te);return tmpNodeList},query})