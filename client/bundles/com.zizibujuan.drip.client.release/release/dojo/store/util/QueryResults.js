//>>built
define("dojo/store/util/QueryResults",["../../_base/array","../../_base/lang","../../when"],function(array,lang,when){var QueryResults=function(results){function addIterativeMethod(method){results[method]||(results[method]=function(){var args=arguments;return when(results,function(results){return Array.prototype.unshift.call(args,results),QueryResults(array[method].apply(array,args))})})}return results?(results.then&&(results=lang.delegate(results)),addIterativeMethod("forEach"),addIterativeMethod("filter"),addIterativeMethod("map"),results.total||(results.total=when(results,function(results){return results.length})),results):results};return lang.setObject("dojo.store.util.QueryResults",QueryResults),QueryResults})