//>>built
define("dojo/request/notify",["../Evented","../_base/lang","./util"],function(Evented,lang,util){function notify(type,listener){return hub.on(type,listener)}var pubCount=0,slice=[].slice,hub=lang.mixin(new Evented,{onsend:function(data){pubCount||this.emit("start"),pubCount++},_onload:function(data){this.emit("done",data)},_onerror:function(data){this.emit("done",data)},_ondone:function(data){--pubCount<=0&&(pubCount=0,this.emit("stop"))},emit:function(type,event){var result=Evented.prototype.emit.apply(this,arguments);return this["_on"+type]&&this["_on"+type].apply(this,slice.call(arguments,1)),result}});return notify.emit=function(type,event,cancel){return hub.emit(type,event,cancel)},util.notify=notify})