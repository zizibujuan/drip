<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link type="text/css" rel="stylesheet" href="/dijit/themes/claro/claro.css" />
<link type="text/css" rel="stylesheet" href="/dojo/resources/dojo.css" />
<link type="text/css" rel="stylesheet" href="/drip/Editor.css" />
<link type="text/css" rel="stylesheet" href="/resources/main.css" />

<title>我的首页 · 孜孜不倦</title>
<script type="text/javascript" 
	data-dojo-config="
		async:true,
		parseOnLoad:true,
		isDebug:true" 
	src="/dojo/dojo.js"></script>
<script type="text/javascript"
   src="/mathjax/MathJax.js?config=MML_HTMLorMML">
</script>
<script type="text/javascript" src="renren.js"></script>
<script type="text/javascript">
require(["dojo/ready",
         "dojo/dom",
         "dojo/request/xhr",
         "dijit/registry",
         "userSession",
         "Header",
         "Activity",
         "dojo/parser",
         "dojo/domReady!"],function(
        		 ready,
        		 dom,
        		 xhr,
        		 registry,
        		 userSession){
	// 加载左侧栏目中的数据，因为左侧没有用dijit部件，所无需放在ready方法中
	userSession.getLoggedUserInfo().then(function(userInfo){
		var profileImg = dom.byId("profileImage");
		profileImg.alt = userInfo.displayName;
		profileImg.src = userInfo.headUrl;
		dom.byId("userName").innerHTML = userInfo.displayName;
		dom.byId("follow_count").innerHTML = userInfo.followCount;
		dom.byId("fan_count").innerHTML = userInfo.fanCount;
		dom.byId("answer_count").innerHTML = userInfo.answerCount;
		dom.byId("exer_count").innerHTML = userInfo.exerciseCount;
	});
	
	ready(function(){
		/*
		var btnNewExercise = registry.byId("btnNewExercise");
		btnNewExercise.on("click",function(e){
			window.location.href = "/exercises/new";
		});
		
		// 进入题库页面
		registry.byId("btnExercises").on("click", function(e){
			window.location.href = "/exercises";
		});
		*/
	});
});
</script>

<script type="text/javascript">
function sendRenrenRequest(){
	var uiOptions = {
		url: "request",
		display: "popup",
		params: { // TODO：这里的文本需要反复优化
			"accept_url":"http://www.zizibujuan.com/login/renren",// 接受邀请按钮url
			"accept_label":"好的,一起学习",//接受文本
			"redirect_uri":"http://www.zizibujuan.com/closeRenrenInviteWindow.html",// 点击确定或取消后跳转的url,需要在这个url中在drip中保存数据。 TODO
			"actiontext":"邀请好友一起学习",// 好友喊你来学习
			"selector_mode":"1",//2,3
			"app_msg":"孜孜不倦诚邀您与大家一起学习",
			"send_btn_label":"真诚邀请"
		},
		//access_token	
		onSuccess: function(a,b,c){
			console.log(a,b,c);
		},
		onFailure: function(a,b,c){
			console.log(a,b,c);
		}
	};
	Renren.ui(uiOptions);
}
</script>

<style type="text/css">
html,body {
	height: 100%;
}

a{
	text-decoration: none;
}

a.logo {
	font-weight: bolder;
	font-size: 32px;
	color: white;
	letter-spacing: 4px;
}

.nav {
	
}

.nav ul li {
	position: relative;
	color: white;
	font-size: 14px;
	color: white;
}

.menu-item {
	
}

.menu-item .title {
	color: #333;
	text-decoration: none;
	padding-top: 3px;
	padding-bottom: 3px;
	padding-left: 10px;
	display: block;
}

.menu-item .title:hover {
	background-color: #00d100;
	color: white;
}

.menu-focus {
	color: white;
	background-color: #00a300;
}

.menu-focus .title{
	color:white;
}

.menu-focus a {
	color: white;
}

.menu-focus .title:hover {
	color: white;
	background-color: #00a300
}

.op {
	position: absolute;
	color: #69768C;
	right: 18px;
	top: 0px;
	padding-left: 0px;
	text-decoration: none;
	padding-top: 3px;
}

.op:VISITED{
color:#69768C;
}

.op:HOVER{
	text-decoration: underline;
	background-color: white;
	
}


.count {
	display: inline-block;
	margin: 0 0 0 5px;
	padding: 0 8px 1px 8px;
	height: auto;
	font-family: Helvetica, arial, freesans, clean, sans-serif;
	font-size: 10px;
	line-height: 14px;
	text-align: center;
	vertical-align: text-top;
	color: #777;
	background: white;
	border-top: 1px solid #CCC;
	border-radius: 8px;
}
</style>

</head>
<body  class="claro">
<script type="text/javascript">
	/* TODO：appId不能在这里硬编码*/
	Renren.init({appId:220706});
</script>

<div style="height:100%">
 <div style="float:left;width:200px;border-right:solid 1px #00a300;height:100%; position: fixed;">
 	<div  style="padding-top: 10px; padding-left: 20px;padding-bottom: 10px;background-color: #00a300;">
 		<a href="/" style="text-decoration: none;" class="logo">孜孜不倦</a>
 	</div>
 	<div style="color:#00a300; font-weight: bold; padding-left: 20px;margin-top: 5px;margin-bottom: 5px;">
 		亲，一起学习高等数学吧！
 	</div>
 	<div class="profile" style="margin-left: 10px;margin-top: 10px;">
 		<div style="height:50px;">
 			<div style="float:left">
 				<a href="#">
 					<img id="profileImage" width="50px" height="50px">
 				</a>
 			</div>
 			<div style="padding-left: 10px; padding-top: 5px;float:left">
 				<a style="font-size: 14px; font-weight: bold;text-decoration: none;color: #333" id="userName"></a>
 				<div>
 					
 				</div>
 			</div>
 		</div>
 		<div style="height:20px">
 			<ul style="list-style: none;padding-left: 0px">
				<li style="float:left">
					<a href="#" style="text-decoration: none;color:#333">关注<span class="count" id="follow_count"></span></a>
				</li>
				<li style="float:left; margin-left: 10px;">
					<a href="#" style="text-decoration: none;color:#333">粉丝<span class="count" id="fan_count"></span></a>
				</li>
			</ul>
 		</div>
 	</div>
 	<div>
 		<input value="邀请人人好友一起学习" style="width:100%; color:#00a300; padding-top: 8px; padding-bottom: 8px;
 		margin-top:10px; font-weight:bold;
 		font-size: 17px;cursor: pointer;" type="button" onclick="sendRenrenRequest();"></input>
 	</div>
 	<div class="nav">
 	 <!-- 导航 -->
 	 <ul style="list-style: none;padding-left: 0px">
 	 	<li class="menu-item menu-focus"><a href="/" class="title">首页</a></li>
 	 	<li class="menu-item">
 	 		<a href="/answers" class="title">已答习题<span class="count" id="answer_count" style="margin-left:10px;"></span>
 	 		</a>
 	 	</li>
 	 	<li class="menu-item">
 	 		<a href="/exercises" class="title">已录习题<span class="count" style="margin-left:10px;" id="exer_count"></span></a>
 	 		<a href="/exercises/new" class="op" id="exer_input">录入</a>
 	 	</li>
 	 </ul>
 	</div>
 	
 	<div style="padding-left:10px; position: absolute;bottom: 30px;right:20px;font-size: 18px; ">
 		<a href="/logout" style="">退出</a>
 	</div>
 </div>
 <div style=" min-height: 100%;height: 1000px;position: relative;left: 210px;width: 600px;">
 	<div data-dojo-type="Activity"></div>
 </div>
 
 
</div>	

<footer>
一起交流学习心得，一起分享教育资源
</footer>
</body>
</html>